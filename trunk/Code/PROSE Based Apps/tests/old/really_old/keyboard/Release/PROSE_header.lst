Zilog eZ80 Macro Assembler Version 4.1 (10060805)16-Dec-10     15:24:10     page:   1


PC     Object              I  Line    Source 
                           A     1    
                           A     2    ;-- EZ80P Hardware equates --------------------
                           A     3    
       00000000            A     4    port_pic_data  			equ 0000h
       00000001            A     5    port_pic_control		equ 0001h
       00000001            A     6    port_hw_flags			equ 0001h
       00000002            A     7    port_sdc_ctrl			equ 0002h	; this is a
       00000002            A     8    port_keyboard_data		equ 0002h
       00000003            A     9    port_sdc_data		 	equ 0003h	
       00000004            A    10    port_memory_paging		equ 0004h
       00000005            A    11    port_irq_ctrl			equ 0005h
       00000006            A    12    port_nmi_ack			equ 0006h
       00000007            A    13    port_selector			equ 0007h
                           A    14    
       00000000            A    15    sdc_power				equ 0		;(port_sd_c
       00000001            A    16    sdc_cs					equ 1		;(port_sd_c
       00000002            A    17    sdc_speed				equ 2 		;(port_sd_c
                           A    18    
       00000004            A    19    sdc_serializer_busy		equ 4 		;(port_hw_f
       00000005            A    20    vrt						equ 5		;(port_hw_f
                           A    21    
                           A    22    ;-- Memory locations --------------------------
                           A    23    
       00800000            A    24    hw_vram_a		equ 0800000h
       00F00000            A    25    hw_palette	equ 0f00000h
                           A    26    
                           A    27    ;----------------------------------------------
                           A    28    
                           A    29    
       00000800            A    30    os_start equ 800h
                           A    31    
       00000804            A    32    prose_return equ os_start+4
       00000808            A    33    prose_kernal equ os_start+8
                           A    34    
                           A    35    ;----------------------------------------------
                           A    36    ; Kernal Jump Table values for mode PROSE
                           A    37    ;----------------------------------------------
                           A    38    		
       00000000            A    39    kr_mount_volumes				equ 00h	
       00000001            A    40    kr_get_device_info				equ 01h	
       00000002            A    41    kr_check_volume_format			equ 02h	
       00000003            A    42    kr_change_volume				equ 03h	
       00000004            A    43    kr_get_volume_info				equ 04h	
       00000005            A    44    kr_format_device				equ 05h	
       00000006            A    45    kr_make_dir						equ 06h
                           A    46    
       00000007            A    47    kr_change_dir					equ 07h	
       00000008            A    48    kr_parent_dir					equ 08h	
       00000009            A    49    kr_root_dir						equ 09h
       0000000A            A    50    kr_delete_dir					equ 0ah
       0000000B            A    51    kr_find_file					equ 0bh
       0000000C            A    52    kr_set_file_pointer				equ 0ch
Zilog eZ80 Macro Assembler Version 4.1 (10060805)16-Dec-10     15:24:10     page:   2


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\includes\PROSE_header.asm
       0000000D            A    53    kr_set_load_length				equ 0dh
       0000000E            A    54    kr_read_file					equ 0eh
                           A    55    
       0000000F            A    56    kr_erase_file					equ 0fh
       00000010            A    57    kr_rename_file					equ 10h
       00000011            A    58    kr_create_file					equ 11h
       00000012            A    59    kr_write_file					equ 12h
       00000013            A    60    kr_get_total_sectors			equ 13h
       00000014            A    61    kr_dir_list_first_entry			equ 14h
       00000015            A    62    kr_dir_list_get_entry			equ 15h
       00000016            A    63    kr_dir_list_next_entry			equ 16h
                           A    64    
       00000017            A    65    kr_read_sector					equ 17h
       00000018            A    66    kr_write_sector					equ 18h
       00000019            A    67    kr_file_sector_list				equ 19h
       0000001A            A    68    kr_get_dir_cluster				equ 1ah
       0000001B            A    69    kr_set_dir_cluster				equ 1bh
       0000001C            A    70    kr_get_dir_name					equ 1ch
       0000001D            A    71    kr_wait_key_press				equ 1dh
       0000001E            A    72    kr_get_key						equ 1eh
                           A    73    
       0000001F            A    74    kr_get_key_mod_flags			equ 1fh
       00000020            A    75    kr_serial_receive_header		equ 20h
       00000021            A    76    kr_serial_receive_file			equ 21h
       00000022            A    77    kr_serial_send_file				equ 22h
       00000023            A    78    kr_serial_tx_byte				equ 23h
       00000024            A    79    kr_serial_rx_byte				equ 24h
                           A    80    
       00000025            A    81    kr_print_string					equ 25h
       00000026            A    82    kr_clear_screen					equ 26h
       00000027            A    83    kr_wait_vrt						equ 27h
       00000028            A    84    kr_set_cursor_position			equ 28h
       00000029            A    85    kr_plot_char					equ 29h
       0000002A            A    86    kr_set_pen						equ 2ah
       0000002B            A    87    kr_background_colours			equ 2bh
       0000002C            A    88    kr_draw_cursor					equ 2ch
       0000002D            A    89    kr_get_pen						equ 2dh
       0000002E            A    90    kr_scroll_up					equ 2eh
       0000002F            A    91    kr_os_display					equ 2fh
       00000030            A    92    kr_get_display_size				equ 30h
       00000031            A    93    kr_get_charmap_addr_xy			equ 31h
       00000032            A    94    kr_get_cursor_position			equ 32h
                           A    95    
       00000033            A    96    kr_set_envar					equ 33h
       00000034            A    97    kr_get_envar					equ 34h
       00000035            A    98    kr_delete_envar					equ 35h
                           A    99    
       00000036            A   100    kr_enable_mouse					equ 36h
       00000037            A   101    kr_get_mouse_position			equ 37h
       00000038            A   102    kr_get_mouse_disp				equ 38h
                           A   103    
       00000039            A   104    kr_timer_wait					equ 39h
Zilog eZ80 Macro Assembler Version 4.1 (10060805)16-Dec-10     15:24:10     page:   3


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\includes\PROSE_header.asm
       0000003A            A   105    kr_compare_strings				equ 3ah
       0000003B            A   106    kr_hex_byte_to_ascii			equ 3bh
       0000003C            A   107    kr_ascii_to_hex_word			equ 3ch
       0000003D            A   108    kr_wait_for_typed_string		equ 3dh
                           A   109    
       0000003E            A   110    kr_get_version					equ 3eh
       0000003F            A   111    kr_dont_store_registers			equ 3fh
                           A   112    
                           A   113    ;----------------------------------------------
                           A   114    ; Standard PROSE executable header
                           A   115    ;----------------------------------------------
                           A   116    
                           A   117    
                           A   118    	IF ADL_mode = 0
-----WARNING (407) Unexpected relocatable boolean/relational operand(s)
000000                     A   119    		org load_location&0ffffh	; if Z80 mo
-----ERROR (407) Forward referenced labels not allowed in this expression
                           A   120    	ELSE
                           A   121    		org load_location			; otherwise
                           A   122    	ENDIF
                           A   123    	
                           A   124    		.assume ADL = 1				; All PROSE
                           A   125    
000000 18 0E               A   126    		jr skip_header				; $0 - Jump
000002 50524F              A   127    		db 'PRO'					; $2 - ASCI
000005 000000              A   128    mb_loc	dw24 load_location			; $5 - Desi
-----ERROR (405) Label "load_location" not defined
000008 000000              A   129    		dw24 0						; $8 - If >
00000B 0000                A   130    		dw 0						; $B - If >
00000D 0000                A   131    		dw 0						; $D - If >
00000F 00                  A   132    		db ADL_mode					; $F - Z80 
-----ERROR (405) Label "ADL_mode" not defined
                           A   133    
000010                     A   134    skip_header
                           A   135    	
                           A   136    	IF ADL_mode = 0 
-----WARNING (407) Unexpected relocatable boolean/relational operand(s)
                           A   137    		
       00000000            A   138    mbase_offset equ load_location & 0ff0000h
                           A   139    
000010 3E 00               A   140    		ld a,load_location/65536	; Additiona
000012 ED6D                A   141    		ld MB,a						; Set MBASE
000014 40C3 18 00          A   142    		jp.sis go_z80_mode			; switches 
                           A   143    
000018                     A   144    go_z80_mode
                           A   145    
                           A   146    		.assume ADL = 0
                           A   147    
                           A   148    	ENDIF
                           A   149    	
                           A   150    ;----------------------------------------------
                           A   151    	
Zilog eZ80 Macro Assembler Version 4.1 (10060805)16-Dec-10     15:24:10     page:   4


PC     Object              I  Line    Source 


Errors: 3
Warnings: 2
Lines Assembled: 152
