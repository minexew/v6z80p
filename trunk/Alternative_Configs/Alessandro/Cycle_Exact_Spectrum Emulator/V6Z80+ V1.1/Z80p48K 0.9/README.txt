Z80p48K 0.9 README
==================
This is the binary distribution of Z80p48K, a ZX Spectrum 48K FPGA core for the V6Z80P+ v1.1
or v1.1b board. Version 1.1 or 1.1b of the board are required because:

- The CPU clock must be generated by the FPGA
- A 14MHz oscillator is required to achieve the exact CPU clock frequency

1. COPYRIGHT
============
Z80p48K is released under the "Modified BSD license".
Please, read the COPYRIGHT.txt file provided with the distribution package for further details.

2. CORE DESCRIPTION
===================
The core simulates a ZX Spectrum 48K equipped with a ULA supporting the "ULA+ 64 color mode",
a tape player and a Kempston joystick interface. The CPU clock frequence can be changed on-the-fly
to 3.5MHz, 7MHz, 14MHz.

PLEASE NOTE! The does not support VGA output yet (please use the VGA to SCART RGB cable supplied
with the board). The core starts in PAL mode, but by pressing F12 you can switch between PAL and
NTSC mode.

3. SETUP
========
To install the core, you should copy the ".bin" file contained in the "configuration" directory
to the root directory of the SD card. Start FLOS, then start the EEPROM TOOL typing "EEPROM + <Enter>"
at the prompt. Identify a free slot, then type "1"; when asked, enter the number of the free slot.
When the file selector appears, select the ".bin" file you have previously copied on the SD card.

Currently, the core requires some manual initialization under FLOS before starting up each time.
You need to copy the Spectrum ROM to system memory and a .TAP file to multimedia memory (TZX files
are not supported at present). See details below.

You also can attach a joystick to the V6Z80P joystick port "A"; this joystick will be seen as
a Kempston joystick. A PS/2 keyboard must be, of course, connected to the board.

4. USAGE
========
Start FLOS.
First of all you must copy the ZX Spectrum 48K ROM into the system RAM.
Assuming you have the Spectrum ROM file inside the directory "SPECTRUM" of the SD card and that
it's named "ZXSPEC48.ROM", type the following commands at the prompt:

CD SPECTRUM <Enter>
LB ZXSPEC48.ROM 8000 1

If you want to use a TAP file as tape image for the core, you have to load it into the multimedia
RAM. To do this, type the following command at the prompt:

LOADVID <file_name.tap> 20000

(The Spectrum ROM file and a test .tap file (Manic Miner) are supplied in the "support files"
subdirectory of this project)

At this point you can boot the Spectrum core typing:

BOOT <n>, with <n> the slot number where you flashed the configuration file using the EEPROM tool.

After the core startup, you'll see the familiar Sinclair copyright screen.

- Keyboard
----------
The keyboard now behaves like that of normal Spectrum. For reference, you will find (in the
binary core distribution root directory) a JPG image ("spectrum_keyboard.jpg") of a real ZX
Spectrum 48K "rubby" keyboard. All the original keys are mapped to the corresponding PS/2 key;
"CAPS SHIFT" is mapped on the PS/2 "LEFT SHIFT", "SYMBOL SHIFT" is mapped on "RIGHT SHIFT".

- Tape player
-------------
Assuming you copied a "TAP" file into memory, you can load it with the following steps:

- Type the command LOAD "" (to do this you must press the following keys: "J", "RIGHT SHIFT + P",
"RIGHT SHIFT + P", "ENTER". - Press the key "TAB".

You will see the familiar loading stripes, and if you rise the volume of the speakers you will
also hear the loading sounds.

The tape player can be stopped/restarted when needed with the key "TAB".

- Reset
-------
The RESET jumper on the board is handled by the core and, if closed, will reset the ZX Spectrum.

- CPU clock speed
-----------------
At the core startup, the CPU clock frequence will be set to 3.5MHz (standard ZX Spectrum 48K);
pressing F2 or F3 on the keyboard, you can change the CPU clock frequence:

F1 = 3.5MHz
F2 = 7.0MHz
F3 = 14.0MHz

The tape player will change its speed accordingly to the CPU clock frequence.

F1 = tape speed 1x
F2 = tape speed 2x
F3 = tape speed 4x

In this way, you can load tapes at 4 times the original speed, and 1/4 of the original time.

7MHz and 14MHz modes are "experimental"; if you use them, be prepared to some incompatibility issues
(i.e.: zx spectrum resets, program crashes), in particular when you run demos or similar programs.

5. ULA Plus 64 color mode
=========================
This core supports one of the graphics mode of ULAplus, an enhanced ULA for the ZX Spectrum designed
by Cheveron, Nikki, CSmith and KLP2. It is designed to make it easy to re-colour existing software
with the minimum of effort.

For further information about ULA+, please visit the following link:
http://sites.google.com/site/ulaplus/

6. USEFUL LINKS
===============
The best source for ZX Spectrum stuff is "World of Spectrum" (http://www.worldofspectrum.org/).
From there you can download tons of games in "TAP" format (http://www.worldofspectrum.org/archive.html).

If you are new to the ZX Spectrum, you could take a look to the following guides:

ZX Spectrum introduction - http://www.worldofspectrum.org/ZXSpectrumIntroduction/
Basic programming manual - http://www.worldofspectrum.org/ZXBasicManual/

7. ACKNOWLEDGEMENTS
===================
The Z80p48K 0.9 core is derived from the ZX-One 1.0 core.

I'd like to sincerely thank:

Peter Wendrich for his continuous support (and patience) during the whole development process
(http://www.syntiac.com/)

Chris Smith for his exceptional book "The ZX Spectrum ULA", source of inspiration for this work
(http://www.zxdesign.info/)

Tobias Gubener for the support and the information about the C-One startup sequence

Jens Sch√∂nfeld for the C-One and for hosting the ZX-One core on the C-One official web-site
(http://www.c64upgra.de/c-one/)

Phil Ruston for the support during the Z80p48K core development and for the V6Z80p board
(http://www.retroleum.co.uk/v6z80p/)

8. CONTACT ME
=============
You can contact me (Alessandro Dorigatti) at the following e-mail address: adorigatti@gmail.com
Every feedback is welcome.
