
Normal power On activity
------------------------

(Applies to all V6Z80P configurations)

0. Power switched on.

1. Z80 CPU is held reset (by FPGA "done" line)

2. PIC checks JTAG-mode jumpers (J1 and J2)

  * If jumpers are installed, the yellow LED flashes rapidly until the FPGA has 
    been manually configured by downloading a .bit file from Xilinx impact software
    on PC.

  * If the JTAG-mode jumpers are not installed, the PIC sends the config data stored in
    the current active slot of the EEPROM to the FPGA. (The active slot address can
    be changed via software - by default (slot 1) the source address is $20000)

3. If the FPGA starts up correctly with the architecture file supplied (ie: the
   FPGA "Done" line goes high) the yellow LED stays on. If the config fails, the
   yellow LED will pulse and the PIC goes back to step 2.


(The following is OSCA v652+ specific)


4. The Z80 is released from reset and runs the ROM code which is held internally
   in the FPGA (mapped into $0-$1ff). This short bootstrap ROM sends a request for
   a "Bootcode" file to the PIC (from EEPROM address $F000, loaded to Z80 address $200-$FBF)

5. If the bootcode is received OK it executes; Keyboard resets, welcome text appears etc.
   If no bootcode is received, or the CRC word at offset $DBE does not match that computed
   from the rest of the file; the display flashes: magenta=CRC error, yellow=timed out.
   At this point, EEPROM location $1F000 will be checked for a backup copy of the bootcode.

6. Once loaded, the Bootcode looks for an .OSF file on the SD card , if not found it
   looks at EEPROM memory location $800. (If at this time the ESC key is pressed, the
   bootcode prompts for code to be serially downloaded instead). If keys F1-F3 are
   pressed, the FPGA reconfigures from the relevant slot. If an OS file is found,
   it is loaded to $1000, the checksum is tested and if OK, code executes from $1010.

7. If no OS is found then the bootcode requests a serial download. Files downloaded
   at boot time are loaded to $1000 with the code execution start address being $1010.
  