Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Test Z80-mode Protracker Player, 50Hz.
                           A     2    ; Need to preload samples to $c00000
                           A     3    ; and pattern to $16000
                           A     4    
                           A     5    ;----------------------------------------------
                           A     6    ; Set these two values to suit user program
                           A     7    ;----------------------------------------------
                           A     8    
       00000000            A     9    ADL_mode		equ 0				; 0 if user
       00010000            A    10    load_location	equ 10000h			; anywhere 
                           A    11    
                           B     0    				include	'PROSE_header.asm'
                           B     1    
                           B     2    ;-- EZ80P Hardware equates --------------------
                           B     3    
       00000000            B     4    port_pic_data  			equ 0000h
       00000001            B     5    port_pic_ctrl			equ 0001h
       00000001            B     6    port_hw_flags			equ 0001h
       00000002            B     7    port_sdc_ctrl			equ 0002h	; this is a
       00000002            B     8    port_keyboard_data		equ 0002h
       00000003            B     9    port_sdc_data		 	equ 0003h	
       00000004            B    10    port_memory_paging		equ 0004h
       00000005            B    11    port_irq_ctrl			equ 0005h
       00000006            B    12    port_nmi_ack			equ 0006h
       00000007            B    13    port_selector			equ 0007h
                           B    14    
                           B    15    
       00000040            B    16    port_video_mode			equ 040h
                           B    17    
                           B    18    
       00000000            B    19    sdc_power				equ 0		;(port_sd_c
       00000001            B    20    sdc_cs					equ 1		;(port_sd_c
       00000002            B    21    sdc_speed				equ 2 		;(port_sd_c
                           B    22    
       00000004            B    23    sdc_serializer_busy		equ 4 		;(port_hw_f
       00000005            B    24    vrt						equ 5		;(port_hw_f
                           B    25    
                           B    26    
                           B    27    ;-- Memory locations --------------------------
                           B    28    
       00800000            B    29    hw_vram_a			equ 0800000h
       00F00000            B    30    hw_palette			equ 0f00000h
       00F80000            B    31    hw_audio_registers 	equ 0f80000h
                           B    32    
                           B    33    ;----------------------------------------------
                           B    34    
                           B    35    
       00000A00            B    36    os_start 	equ 0a00h
                           B    37    
       00000A14            B    38    prose_return equ os_start+14h
       00000A20            B    39    prose_kernal equ os_start+20h
                           B    40    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   2


PC     Object              I  Line    Source ..\..\includes\PROSE_header.asm
                           B    41    ;----------------------------------------------
                           B    42    ; Kernal Jump Table values for mode PROSE
                           B    43    ;----------------------------------------------
                           B    44    		
       00000000            B    45    kr_mount_volumes				equ 00h	
       00000001            B    46    kr_get_device_info				equ 01h	
       00000002            B    47    kr_check_volume_format			equ 02h	
       00000003            B    48    kr_change_volume				equ 03h	
       00000004            B    49    kr_get_volume_info				equ 04h	
       00000005            B    50    kr_format_device				equ 05h	
       00000006            B    51    kr_make_dir						equ 06h
                           B    52    
       00000007            B    53    kr_change_dir					equ 07h	
       00000008            B    54    kr_parent_dir					equ 08h	
       00000009            B    55    kr_root_dir						equ 09h
       0000000A            B    56    kr_delete_dir					equ 0ah
       0000000B            B    57    kr_find_file					equ 0bh
       0000000C            B    58    kr_set_file_pointer				equ 0ch
       0000000D            B    59    kr_set_load_length				equ 0dh
       0000000E            B    60    kr_read_file					equ 0eh
                           B    61    
       0000000F            B    62    kr_erase_file					equ 0fh
       00000010            B    63    kr_rename_file					equ 10h
       00000011            B    64    kr_create_file					equ 11h
       00000012            B    65    kr_write_file					equ 12h
       00000013            B    66    kr_get_total_sectors			equ 13h
       00000014            B    67    kr_dir_list_first_entry			equ 14h
       00000015            B    68    kr_dir_list_get_entry			equ 15h
       00000016            B    69    kr_dir_list_next_entry			equ 16h
                           B    70    
       00000017            B    71    kr_read_sector					equ 17h
       00000018            B    72    kr_write_sector					equ 18h
       00000019            B    73    kr_file_sector_list				equ 19h
       0000001A            B    74    kr_get_dir_cluster				equ 1ah
       0000001B            B    75    kr_set_dir_cluster				equ 1bh
       0000001C            B    76    kr_get_dir_name					equ 1ch
       0000001D            B    77    kr_wait_key						equ 1dh
       0000001E            B    78    kr_get_key						equ 1eh
                           B    79    
       0000001F            B    80    kr_get_key_mod_flags			equ 1fh
       00000020            B    81    kr_serial_receive_header		equ 20h
       00000021            B    82    kr_serial_receive_file			equ 21h
       00000022            B    83    kr_serial_send_file				equ 22h
       00000023            B    84    kr_serial_tx_byte				equ 23h
       00000024            B    85    kr_serial_rx_byte				equ 24h
                           B    86    
       00000025            B    87    kr_print_string					equ 25h
       00000026            B    88    kr_clear_screen					equ 26h
       00000027            B    89    kr_wait_vrt						equ 27h
       00000028            B    90    kr_set_cursor_position			equ 28h
       00000029            B    91    kr_plot_char					equ 29h
       0000002A            B    92    kr_set_pen						equ 2ah
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   3


PC     Object              I  Line    Source ..\..\includes\PROSE_header.asm
       0000002B            B    93    kr_background_colours			equ 2bh
       0000002C            B    94    kr_draw_cursor					equ 2ch
       0000002D            B    95    kr_get_pen						equ 2dh
       0000002E            B    96    kr_scroll_up					equ 2eh
       0000002F            B    97    kr_os_display					equ 2fh
       00000030            B    98    kr_get_display_size				equ 30h
       00000031            B    99    kr_get_charmap_addr_xy			equ 31h
       00000032            B   100    kr_get_cursor_position			equ 32h
                           B   101    
       00000033            B   102    kr_set_envar					equ 33h
       00000034            B   103    kr_get_envar					equ 34h
       00000035            B   104    kr_delete_envar					equ 35h
                           B   105    
       00000036            B   106    kr_enable_mouse					equ 36h
       00000037            B   107    kr_get_mouse_position			equ 37h
       00000038            B   108    kr_get_mouse_disp				equ 38h
                           B   109    
       00000039            B   110    kr_time_delay					equ 39h
       0000003A            B   111    kr_compare_strings				equ 3ah
       0000003B            B   112    kr_hex_byte_to_ascii			equ 3bh
       0000003C            B   113    kr_ascii_to_hex_word			equ 3ch
       0000003D            B   114    kr_get_string					equ 3dh
                           B   115    
       0000003E            B   116    kr_get_version					equ 3eh
       0000003F            B   117    kr_dont_store_registers			equ 3fh
       00000040            B   118    kr_os_video_settings			equ 40h
       00000041            B   119    kr_read_rtc						equ 41h
       00000042            B   120    kr_write_rtc					equ 42h
                           B   121    
                           B   122    ;----------------------------------------------
                           B   123    ; Standard PROSE executable header
                           B   124    ;----------------------------------------------
                           B   125    
                           B   126    
                           B   127    	IF ADL_mode = 0
000000                     B   128    		org load_location&0ffffh	; if Z80 mo
                           B   129    	ELSE
                           B   130    		org load_location			; otherwise
                           B   131    	ENDIF
                           B   132    	
                           B   133    		.assume ADL = 1				; All PROSE
                           B   134    
000000 18 0E               B   135    		jr skip_header				; $0 - Jump
000002 50524F              B   136    		db 'PRO'					; $2 - ASCI
000005 000001              B   137    mb_loc	dw24 load_location			; $5 - Desi
000008 000000              B   138    		dw24 0						; $8 - If >
00000B 0000                B   139    		dw 0						; $B - If >
00000D 0000                B   140    		dw 0						; $D - If >
00000F 00                  B   141    		db ADL_mode					; $F - Z80 
                           B   142    
000010                     B   143    skip_header
                           B   144    	
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   4


PC     Object              I  Line    Source ..\..\includes\PROSE_header.asm
                           B   145    	IF ADL_mode = 0 
                           B   146    		
       00010000            B   147    mbase_offset equ load_location & 0ff0000h
                           B   148    
000010 3E01                B   149    		ld a,load_location/65536	; Additiona
000012 ED6D                B   150    		ld MB,a						; Set MBASE
000014 40C3 18 00          B   151    		jp.sis go_z80_mode			; switches 
                           B   152    
000018                     B   153    go_z80_mode
                           B   154    
                           B   155    		.assume ADL = 0
                           B   156    
                           B   157    	ENDIF
                           B   158    	
                           B   159    ;----------------------------------------------
                           B   160    	
                           A    13    
                           A    14    ;----------------------------------------------
                           A    15    ; Z80-mode user program follows..
                           A    16    ;----------------------------------------------
                           A    17    
                           B     0    include "ez80_cpu_equates.asm"
                           B     1    ;--- EZ80 Internal Ports ----------------------
                           B     2    
       0000009A            B     3    PB_DR			equ 09ah
       0000009B            B     4    PB_DDR			equ 09bh
       0000009C            B     5    PB_ALT1			equ 09ch
       0000009D            B     6    PB_ALT2			equ 09dh
                           B     7    
       0000009E            B     8    PC_DR			equ 09eh
       0000009F            B     9    PC_DDR			equ 09fh
       000000A0            B    10    PC_ALT1			equ 0a0h
       000000A1            B    11    PC_ALT2			equ 0a1h
                           B    12    
       000000A2            B    13    PD_DR			equ 0a2h
       000000A3            B    14    PD_DDR			equ 0a3h
       000000A4            B    15    PD_ALT1			equ 0a4h
       000000A5            B    16    PD_ALT2			equ 0a5h
                           B    17    
       000000C0            B    18    UART0_RBR		equ 0c0h
       000000C0            B    19    UART0_THR		equ 0c0h
       000000C0            B    20    UART0_BRG_L		equ 0c0h
       000000C1            B    21    UART0_BRG_H		equ 0c1h
       000000C1            B    22    UART0_IER		equ 0c1h
       000000C2            B    23    UART0_FCTL		equ 0c2h
       000000C3            B    24    UART0_LCTL		equ 0c3h
       000000C4            B    25    UART0_MCTL		equ 0c4h
       000000C5            B    26    UART0_LSR		equ 0c5h
                           B    27    
       000000A8            B    28    CS0_LBR			equ 0a8h			;eZ80 wait 
       000000A9            B    29    CS0_UBR			equ 0a9h
       000000AA            B    30    CS0_CTL			equ 0aah			
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   5


PC     Object              I  Line    Source ..\..\includes\ez80_cpu_equates.asm
       000000AB            B    31    CS1_LBR			equ 0abh			;eZ80 wait 
       000000AC            B    32    CS1_UBR			equ 0ach
       000000AD            B    33    CS1_CTL			equ 0adh
       000000AE            B    34    CS2_LBR			equ 0aeh			;eZ80 wait 
       000000AF            B    35    CS2_UBR			equ 0afh
       000000B0            B    36    CS2_CTL			equ 0b0h
       000000B1            B    37    CS3_LBR			equ 0b1h			;eZ80 wait 
       000000B2            B    38    CS3_UBR			equ 0b2h
       000000B3            B    39    CS3_CTL			equ 0b3h
                           B    40    
       00000080            B    41    TMR0_CTL		equ 080h			;timer 0 eq
       00000081            B    42    TMR0_DR_L		equ 081h
       00000081            B    43    TMR0_RR_L		equ 081h
       00000082            B    44    TMR0_DR_H		equ 082h
       00000082            B    45    TMR0_RR_H		equ 082h
       00000092            B    46    TMR_ISS			equ 092h
                           B    47    
       000000ED            B    48    RTC_CTRL		equ 0edh			;RTC equate
       000000EC            B    49    RTC_ACTRL		equ 0ech
       000000E0            B    50    RTC_SEC			equ 0e0h
       000000E1            B    51    RTC_MIN			equ 0e1h
       000000E2            B    52    RTC_HRS			equ 0e2h
       000000E3            B    53    RTC_DOW			equ 0e3h
       000000E4            B    54    RTC_DOM			equ 0e4h
       000000E5            B    55    RTC_MON			equ 0e5h
       000000E6            B    56    RTC_YR			equ 0e6h
       000000E7            B    57    RTC_CEN			equ 0e7h
                           B    58    
                           B    59    ;----------------------------------------------
                           A    19    
000018 CD 93 00            A    20    			call init_tracker
                           A    21    
00001B 21 76 00            A    22    			ld hl,message_txt					00001E CD 66 00            A    23    			call print_string
                           A    24    			
                           A    25    ;----------------------------------------------
                           A    26    
000021 118F02              A    27    			ld de,655							000024 7B                  A    28    			ld a,e							
000025 ED3981              A    29    			out0 (TMR0_RR_L),a					000028 7A                  A    30    			ld a,d
000029 ED3982              A    31    			out0 (TMR0_RR_H),a					00002C 3E13                A    32    			ld a,00010011b						00002E ED3980              A    33    			out0 (TMR0_CTL),a					                           A    34    
000031 ED3880              A    35    wait_50hz	in0 a,(TMR0_CTL)					000034 CB7F                A    36    			bit 7,a
000036 C4 51 00            A    37    			call nz,do_tracker_update			                           A    38    		
000039 3E1E                A    39    			ld a,kr_get_key						00003B 5BCD200A 00         A    40    			call.lil prose_kernal
000040 FE76                A    41    			cp 076h
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   6


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\left_mono_play.asm
000042 20 ED               A    42    			jr nz,wait_50hz
                           A    43    
000044 3E00                A    44    			ld a,0
000046 5B320300 F8         A    45    			ld.lil (hw_audio_registers+3),a		00004B AF                  A    46    			xor a
00004C 5BC3140A 00         A    47    			jp.lil prose_return					                           A    48    
                           A    49    ;----------------------------------------------
                           A    50    
000051                     A    51    do_tracker_update
                           A    52    
                           A    53    ; call this routine every 50 Hz
                           A    54    
000051 3E08                A    55    			ld a,08h							000053 5B320100 F0         A    56    			ld.lil (hw_palette+1),a				                           A    57    			
000058 CD 0E 01            A    58    			call play_tracker					                           A    59    			
00005B 3E00                A    60    			ld a,00h							00005D 5B320100 F0         A    61    			ld.lil (hw_palette+1),a				                           A    62    			
000062 CD 61 11            A    63    			call update_audio_hardware			000065 C9                  A    64    			ret
                           A    65    			
                           A    66    ;----------------------------------------------
                           A    67    
000066                     A    68    print_string
                           A    69    
000066 3E25                A    70    			ld a,kr_print_string			 
000068 5BCD200A 00         A    71    			call.lil prose_kernal			 
00006D C9                  A    72    			ret
                           A    73    
                           A    74    
00006E 3E1D                A    75    waitkey		ld a,kr_wait_key
000070 5BCD200A 00         A    76    			call.lil prose_kernal
000075 C9                  A    77    			ret
                           A    78    
                           A    79    
                           A    80    ;----------------------------------------------
                           A    81    		
000076                     A    82    message_txt
                           A    83    
000076 496E6974 69616C69   A    84    			db 'Initialized song. Playing..',11
00007E 7A656420 736F6E67 
000086 2E20506C 6179696E 
00008E 672E2E0B 00 
                           A    85    
                           A    86    ;----------------------------------------------
                           A    87    		
                           B     0    			include "50Hz_Z80_Protracker_Player
                           B     1    ;----------------------------------------------
                           B     2    ; Z80 Protracker Music Player - V5.05
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   7


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B     3    ; By Phil Ruston 2011
                           B     4    ; http://www.retroleum.co.uk
                           B     5    ;
                           B     6    ; SYNTAX CONVERTED TO ZDSII STANDARD (Z80 mode,
                           B     7    ; NOT OPTIMIZED AT ALL 
                           B     8    ;----------------------------------------------
                           B     9    ;
                           B    10    ;
                           B    11    ; Z80 Code to play standard 31 instrument Protr
                           B    12    ;
                           B    13    ; The code has been designed so that is hardwar
                           B    14    ; does not write to any hardware registers. It 
                           B    15    ; Amiga hardware registers but still uses the A
                           B    16    ; to them. Therefore it is up to a seperate "up
                           B    17    ; variables and adapt/convert the values therei
                           B    18    ; output the sound. (A routine to do this for m
                           B    19    ;
                           B    20    ;
                           B    21    ; Equates (must be defined in external code)
                           B    22    ; -------
                           B    23    ;
                           B    24    ; "music_module" = location of protracker modul
                           B    25    ; at a word address boundary.
                           B    26    ;
                           B    27    ;
                           B    28    ; Routines:
                           B    29    ; ---------
                           B    30    ;
                           B    31    ; call "init_tracker" to initialize/reset tune
                           B    32    ; call "play_tracker" every frame to update the
                           B    33    ;
                           B    34    ; (Obviously you need a routine to read the Ami
                           B    35    ; that this code updates,  convert the values a
                           B    36    ;
                           B    37    ;
                           B    38    ; Variables:
                           B    39    ; ----------
                           B    40    ;
                           B    41    ; "force_sample_base" (WORD) - write the WORD l
                           B    42    ; (ie: not Z80 address space) here  prior to in
                           B    43    ; been seperated from the module (eg: written t
                           B    44    ; ignore it (or write $FFFF).
                           B    45    ;
                           B    46    ; "filter_on_off" (BYTE) reads ONE if player ha
                           B    47    ; zero if not. (Whether or not this is of any u
                           B    48    ;
                           B    49    ; Replacing the Amiga hardware registers is a b
                           B    50    ; These begin at "channel_data". There are 33 b
                           B    51    ; within each block are:
                           B    52    ;
                           B    53    ; samp_loc_lo (WORD address **)	
                           B    54    ; samp_loc_hi (WORD address **)	
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   8


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B    55    ; samp_len_lo 	
                           B    56    ; samp_len_hi 	
                           B    57    ; samp_loop_offset_lo (IN WORDS **)
                           B    58    ; samp_loop_offset_hi (IN WORDS **)	
                           B    59    ; samp_loop_len_lo	
                           B    60    ; samp_loop_len_hi	
                           B    61    ; samp_offset_lo	
                           B    62    ; samp_offset_hi	
                           B    63    ; period_lo
                           B    64    ; period_hi
                           B    65    ; volume
                           B    66    ; control_bits
                           B    67    ;
                           B    68    ; Variable names should be self-explanitory.
                           B    69    ; "control_bits" replaces the Amiga's DMA sound
                           B    70    ; When bit 0 of each channel's control_bits var
                           B    71    ; hardware conversion routine knows to trigger 
                           B    72    ; loopstart/looplength). The conversion routine
                           B    73    ; after triggering a sample.
                           B    74    ;
                           B    75    ; ** These are WORD locations, the Amiga hardwa
                           B    76    ; samples to begin on odd-byte addresses. There
                           B    77    ; to address word locations allows a sample add
                           B    78    ; of 64KB. This is relevent - despite the Z80's
                           B    79    ; hardware may have its own sample RAM . Simply
                           B    80    ; byte addresses.
                           B    81    ;
                           B    82    ; Limitations:
                           B    83    ; ------------
                           B    84    ; The Z80's 64KB address space limits the size 
                           B    85    ; played. However, as mentioned, the samples ca
                           B    86    ; and loaded into seperate dedicated Audio RAM 
                           B    87    ;
                           B    88    ; Revisions:
                           B    89    ; ----------
                           B    90    ;
                           B    91    ; V5.05 - If a pattern note entry is blank, cle
                           B    92    ;
                           B    93    ; V5.04 - Fixed note triggering -  a bug in the
                           B    94    ;         was masking the incorrect retrigging 
                           B    95    ;         period is specified)
                           B    96    ; 
                           B    97    ; Known issues:
                           B    98    ; -------------
                           B    99    ; $EF - invert loop is not implemented (rarely 
                           B   100    ;
                           B   101    ;
                           B   102    ;==============================================
                           B   103    ; Start of hardware-agnostic specific Z80 Protr
                           B   104    ;==============================================
                           B   105    
                           B   106    .assume ADL = 0
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:   9


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B   107    
000093                     B   108    init_tracker
                           B   109    
000093 3E06                B   110    				ld a,6						; d
000095 32 D6 10            B   111    				ld (songspeed),a
000098 AF                  B   112    				xor a						; c
000099 32 D3 10            B   113    				ld (ticker),a
00009C 32 D4 10            B   114    				ld (songpos),a
00009F 32 D5 10            B   115    				ld (patindex),a
0000A2 32 D7 10            B   116    				ld (arpeggio_counter),a
0000A5 32 D8 10            B   117    				ld (pattloop_pos),a
0000A8 32 D9 10            B   118    				ld (pattloop_count),a
0000AB 32 DA 10            B   119    				ld (pattdelay_count),a	
0000AE 32 DB 10            B   120    				ld (pattdelay_flag),a	
0000B1 21 DD 10            B   121    				ld hl,channel_data
0000B4 06 84               B   122    				ld b,vars_per_channel*4
0000B6 77                  B   123    clchdlp			ld (hl),a
0000B7 23                  B   124    				inc hl
0000B8 10 FC               B   125    				djnz clchdlp
                           B   126    
0000BA 21 B8 63            B   127    				ld hl,music_module+952		; f
0000BD 0680                B   128    				ld b,128					; t
0000BF 0E00                B   129    				ld c,0
0000C1 7E                  B   130    ptfhplp			ld a,(hl)	
0000C2 B9                  B   131    				cp c
0000C3 38 01               B   132    				jr c,patlower
0000C5 4F                  B   133    				ld c,a
0000C6 23                  B   134    patlower		inc hl
0000C7 10 F8               B   135    				djnz ptfhplp
0000C9 0C                  B   136    				inc c
0000CA CB21                B   137    				sla c
0000CC CB21                B   138    				sla c
0000CE 61                  B   139    				ld h,c
0000CF 2E00                B   140    				ld l,0
0000D1 01 3C 64            B   141    				ld bc,music_module+1084			0000D4 09                  B   142    				add hl,bc						0000D5 CB3C                B   143    				srl h							0000D7 CB1D                B   144    				rr l							0000D9 22 91 10            B   145    				ld (sample_base),hl
                           B   146    
0000DC ED5B 93 10          B   147    				ld de,(force_sample_base)		0000E0 13                  B   148    				inc de							0000E1 7A                  B   149    				ld a,d							0000E2 B3                  B   150    				or e
0000E3 28 03               B   151    				jr z,usenormsb
0000E5 2A 93 10            B   152    				ld hl,(force_sample_base)	
                           B   153    
0000E8 DD21 95 10          B   154    usenormsb		ld ix,sample_location_list		0000EC FD21 2A 60          B   155    				ld iy,music_module+42
0000F0 061F                B   156    				ld b,31
0000F2 DD7500              B   157    bsstlp			ld (ix),l						0000F5 DD7401              B   158    				ld (ix+1),h						Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  10


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
0000F8 DD23                B   159    				inc ix
0000FA DD23                B   160    				inc ix
0000FC FD7E01              B   161    				ld a,(iy+1)						0000FF 85                  B   162    				add a,l							000100 6F                  B   163    				ld l,a
000101 FD7E00              B   164    				ld a,(iy)						000104 8C                  B   165    				adc a,h							000105 67                  B   166    				ld h,a	
000106 111E00              B   167    				ld de,30			
000109 FD19                B   168    				add iy,de						00010B 10 E5               B   169    				djnz bsstlp
00010D C9                  B   170    				ret
                           B   171    
                           B   172    ;----------------------------------------------
                           B   173    
00010E                     B   174    play_tracker
                           B   175    
00010E 3A D3 10            B   176    				ld a,(ticker)
000111 B7                  B   177    				or a			
000112 C2 B9 02            B   178    				jp nz,not_new_line
                           B   179    
000115 3A D4 10            B   180    				ld a,(songpos)					000118 0600                B   181    				ld b,0
00011A 4F                  B   182    				ld c,a
00011B 21 B8 63            B   183    				ld hl,music_module+952			00011E 09                  B   184    				add hl,bc						00011F 46                  B   185    				ld b,(hl)			
000120 0E00                B   186    				ld c,0
000122 CB20                B   187    				sla b
000124 CB20                B   188    				sla b							                           B   189    				
000126 3A D5 10            B   190    				ld a,(patindex)					000129 61                  B   191    				ld h,c							00012A 6F                  B   192    				ld l,a
00012B 29                  B   193    				add hl,hl
00012C 29                  B   194    				add hl,hl
00012D 29                  B   195    				add hl,hl
00012E 29                  B   196    				add hl,hl						00012F 09                  B   197    				add hl,bc						000130 EB                  B   198    				ex de,hl
                           B   199    				
000131 FD21 DD 10          B   200    				ld iy,channel_data	
000135 DD21 3C 64          B   201    				ld ix,music_module+1084			000139 DD19                B   202    				add ix,de						00013B 0604                B   203    				ld b,4							00013D C5                  B   204    chan_loop		push bc
00013E DD7E00              B   205    				ld a,(ix)						000141 DDB601              B   206    				or (ix+1)
000144 DDB602              B   207    				or (ix+2)
000147 DDB603              B   208    				or (ix+3)
00014A 20 06               B   209    				jr nz,parse_dat
00014C FD36 04 FF          B   210    				ld (iy+fx_number),0ffh			Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  11


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000150 18 03               B   211    				jr skipchan	
000152 CD 65 01            B   212    parse_dat		call new_note_data	
000155 01 21 00            B   213    skipchan		ld bc,vars_per_channel		
000158 FD09                B   214    				add iy,bc						00015A 010400              B   215    				ld bc,4
00015D DD09                B   216    				add ix,bc						00015F C1                  B   217    				pop bc
000160 10 DB               B   218    				djnz chan_loop
000162 C3 CB 02            B   219    				jp tick_advance
                           B   220    
                           B   221    
                           B   222    ;----- New note routines ----------------------
                           B   223    
000165                     B   224    new_note_data
                           B   225    				
000165 FD36 12 00          B   226    				ld (iy+instrument_waiting),0
000169 DD7E00              B   227    				ld a,(ix)						00016C E6F0                B   228    				and 0f0h
00016E DD4602              B   229    				ld b,(ix+2)
000171 CB38                B   230    				srl b
000173 CB38                B   231    				srl b
000175 CB38                B   232    				srl b
000177 CB38                B   233    				srl b
000179 B0                  B   234    				or b			
00017A 28 54               B   235    				jr z,no_new_instrument			                           B   236    
00017C FD77 12             B   237    				ld (iy+instrument_waiting),a
00017F 3D                  B   238    				dec a
000180 CB27                B   239    				sla a
000182 4F                  B   240    				ld c,a
000183 0600                B   241    				ld b,0
000185 21 95 10            B   242    				ld hl,sample_location_list		000188 09                  B   243    				add hl,bc
000189 7E                  B   244    				ld a,(hl)
00018A FD77 17             B   245    				ld (iy+samp_loc_lo),a			00018D 23                  B   246    				inc hl
00018E 7E                  B   247    				ld a,(hl)
00018F FD77 18             B   248    				ld (iy+samp_loc_hi),a			                           B   249    				
000192 21 51 10            B   250    				ld hl,multiply_30_table			000195 09                  B   251    				add hl,bc
000196 7E                  B   252    				ld a,(hl)
000197 23                  B   253    				inc hl
000198 66                  B   254    				ld h,(hl)
000199 6F                  B   255    				ld l,a
00019A 01 2A 60            B   256    				ld bc,music_module+42	
00019D 09                  B   257    				add hl,bc						00019E 7E                  B   258    				ld a,(hl)
00019F FD77 1A             B   259    				ld (iy+samp_len_hi),a			0001A2 23                  B   260    				inc hl
0001A3 7E                  B   261    				ld a,(hl)
0001A4 FD77 19             B   262    				ld (iy+samp_len_lo),a			Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  12


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
0001A7 23                  B   263    				inc hl	
0001A8 7E                  B   264    				ld a,(hl)			
0001A9 E60F                B   265    				and 0fh
0001AB FD77 14             B   266    				ld (iy+finetune),a				0001AE 23                  B   267    				inc hl
0001AF 7E                  B   268    				ld a,(hl)
0001B0 FD77 13             B   269    				ld (iy+volume_waiting),a		0001B3 23                  B   270    				inc hl
0001B4 46                  B   271    				ld b,(hl)						0001B5 23                  B   272    				inc hl
0001B6 4E                  B   273    				ld c,(hl)						0001B7 E5                  B   274    				push hl
0001B8 FD66 18             B   275    				ld h,(iy+samp_loc_hi)
0001BB FD6E 17             B   276    				ld l,(iy+samp_loc_lo)
0001BE 09                  B   277    				add hl,bc
0001BF FD74 1C             B   278    				ld (iy+samp_loop_loc_hi),h		0001C2 FD75 1B             B   279    				ld (iy+samp_loop_loc_lo),l		0001C5 E1                  B   280    				pop hl	
0001C6 23                  B   281    				inc hl
0001C7 7E                  B   282    				ld a,(hl)
0001C8 FD77 1E             B   283    				ld (iy+samp_loop_len_hi),a		0001CB 23                  B   284    				inc hl
0001CC 7E                  B   285    				ld a,(hl)
0001CD FD77 1D             B   286    				ld (iy+samp_loop_len_lo),a		                           B   287    				
                           B   288    				
                           B   289    				
0001D0                     B   290    no_new_instrument	
                           B   291    
0001D0 DD7E00              B   292    				ld a,(ix)						0001D3 E60F                B   293    				and 0fh
0001D5 47                  B   294    				ld b,a
0001D6 DD4E01              B   295    				ld c,(ix+1)						                           B   296    					
0001D9 DD7E03              B   297    				ld a,(ix+3)						0001DC FD77 05             B   298    				ld (iy+fx_args),a				0001DF DD7E02              B   299    				ld a,(ix+2)						0001E2 E60F                B   300    				and 0fh							0001E4 FD77 04             B   301    				ld (iy+fx_number),a
                           B   302    
0001E7 FE03                B   303    				cp 3							0001E9 CA 6F 02            B   304    				jp z,set_portadest				0001EC FE05                B   305    				cp 5 			
0001EE 28 7F               B   306    				jr z,set_portadest
                           B   307    
0001F0 FE0E                B   308    				cp 0eh							0001F2 20 11               B   309    				jr nz,no_ftoveride
0001F4 FD7E 05             B   310    				ld a,(iy+fx_args)
0001F7 E6F0                B   311    				and 0f0h
0001F9 FE50                B   312    				cp 050h
0001FB 20 08               B   313    				jr nz,no_ftoveride
0001FD FD7E 05             B   314    				ld a,(iy+fx_args)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  13


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000200 E60F                B   315    				and 0fh
000202 FD77 14             B   316    				ld (iy+finetune),a				                           B   317    
000205                     B   318    no_ftoveride
                           B   319    
000205 FDCB 0F 9E          B   320    				res 3,(iy+control_bits)			000209 78                  B   321    				ld a,b							00020A B1                  B   322    				or c							00020B 28 15               B   323    				jr z,nonewp1
                           B   324    
00020D FDCB 0F DE          B   325    				set 3,(iy+control_bits)			000211 C5                  B   326    				push bc
000212 FD71 15             B   327    				ld (iy+arp_base_period_lo),c	000215 FD70 16             B   328    				ld (iy+arp_base_period_hi),b	000218 CD 97 02            B   329    				call finetune_bc_period
00021B FD71 06             B   330    				ld (iy+period_for_fx_lo),c		00021E FD70 07             B   331    				ld (iy+period_for_fx_hi),b
000221 C1                  B   332    				pop bc
                           B   333    				
000222 FD7E 04             B   334    nonewp1			ld a,(iy+fx_number)
000225 FE0E                B   335    				cp 0eh							000227 20 0A               B   336    				jr nz,not_ed		 
000229 FD7E 05             B   337    				ld a,(iy+fx_args)
00022C E6F0                B   338    				and 0f0h
00022E FED0                B   339    				cp 0d0h
000230 CA 46 03            B   340    				jp z,check_more_fx
                           B   341    				
000233 78                  B   342    not_ed			ld a,b							000234 B1                  B   343    				or c			
000235 28 19               B   344    				jr z,nonewp2
000237 FD4E 06             B   345    				ld c,(iy+period_for_fx_lo)		00023A FD46 07             B   346    				ld b,(iy+period_for_fx_hi)
00023D FD71 01             B   347    				ld (iy+period_lo),c
000240 FD70 02             B   348    				ld (iy+period_hi),b
000243 FDCB 0F C6          B   349    				set 0,(iy+control_bits)			000247 FD7E 12             B   350    				ld a,(iy+instrument_waiting)	00024A B7                  B   351    				or a
00024B CA 46 03            B   352    				jp z,check_more_fx
00024E 18 10               B   353    				jr do_vol						                           B   354    				
000250 FD7E 12             B   355    nonewp2			ld a,(iy+instrument_waiting)	000253 B7                  B   356    				or a							000254 CA 46 03            B   357    				jp z,check_more_fx
000257 FDBE 00             B   358    				cp (iy+instrument)			
00025A 28 04               B   359    				jr z,do_vol
00025C FDCB 0F C6          B   360    				set 0,(iy+control_bits)
                           B   361    
000260 FD77 00             B   362    do_vol			ld (iy+instrument),a
000263 FD7E 13             B   363    				ld a,(iy+volume_waiting)		000266 FD77 03             B   364    				ld (iy+volume),a	
000269 FD77 08             B   365    				ld (iy+volume_for_fx),a			00026C C3 46 03            B   366    				jp check_more_fx
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  14


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B   367    				
                           B   368    
00026F                     B   369    set_portadest
                           B   370    
00026F 78                  B   371    				ld a,b							000270 B1                  B   372    				or c			
000271 28 09               B   373    				jr z,spd_same			
000273 CD 97 02            B   374    				call finetune_bc_period
000276 FD71 10             B   375    				ld (iy+portamento_dest_lo),c	000279 FD70 11             B   376    				ld (iy+portamento_dest_hi),b
                           B   377    				
00027C FD7E 12             B   378    spd_same		ld a,(iy+instrument_waiting)	00027F B7                  B   379    				or a			
000280 C8                  B   380    				ret z
000281 FDBE 00             B   381    				cp (iy+instrument)				000284 28 07               B   382    				jr z,skiptrig
000286 FDCB 0F C6          B   383    				set 0,(iy+control_bits)			00028A FD77 00             B   384    				ld (iy+instrument),a
00028D FD7E 13             B   385    skiptrig		ld a,(iy+volume_waiting)
000290 FD77 03             B   386    				ld (iy+volume),a	
000293 FD77 08             B   387    				ld (iy+volume_for_fx),a	
000296 C9                  B   388    				ret
                           B   389    				
                           B   390    
                           B   391    
000297                     B   392    finetune_bc_period
                           B   393    
000297 FD7E 14             B   394    				ld a,(iy+finetune)				00029A B7                  B   395    				or a
00029B C8                  B   396    				ret z
00029C CB27                B   397    				sla a
00029E 21 91 0B            B   398    				ld hl,tuning_table_list	
0002A1 5F                  B   399    				ld e,a			
0002A2 1600                B   400    				ld d,0
0002A4 19                  B   401    				add hl,de
0002A5 5E                  B   402    				ld e,(hl)
0002A6 23                  B   403    				inc hl	
0002A7 56                  B   404    				ld d,(hl)						0002A8 21 30 08            B   405    				ld hl,period_lookup_table-113
0002AB 09                  B   406    				add hl,bc
0002AC 7E                  B   407    				ld a,(hl)						0002AD CB27                B   408    				sla a
0002AF 83                  B   409    				add a,e
0002B0 30 01               B   410    				jr nc,ttmok
0002B2 14                  B   411    				inc d
0002B3 5F                  B   412    ttmok			ld e,a			
0002B4 EB                  B   413    				ex de,hl						0002B5 4E                  B   414    				ld c,(hl)
0002B6 23                  B   415    				inc hl
0002B7 46                  B   416    				ld b,(hl)						0002B8 C9                  B   417    				ret
                           B   418    				
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  15


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B   419    				
                           B   420    ;-------- "FX during line" routines -----------
                           B   421    
                           B   422    
0002B9                     B   423    not_new_line
                           B   424    
0002B9 FD21 DD 10          B   425    				ld iy,channel_data				0002BD 0604                B   426    				ld b,4							0002BF C5                  B   427    chanfxlp		push bc							0002C0 CD 11 03            B   428    				call check_fx		
0002C3 01 21 00            B   429    				ld bc,vars_per_channel
0002C6 FD09                B   430    				add iy,bc
0002C8 C1                  B   431    				pop bc
0002C9 10 F4               B   432    				djnz chanfxlp
                           B   433    				
0002CB                     B   434    tick_advance
                           B   435    
0002CB 21 D7 10            B   436    				ld hl,arpeggio_counter			0002CE 34                  B   437    				inc (hl)
0002CF 7E                  B   438    				ld a,(hl)
0002D0 FE03                B   439    				cp 3
0002D2 20 02               B   440    				jr nz,arp_ok
0002D4 3600                B   441    				ld (hl),0
0002D6 21 D3 10            B   442    arp_ok			ld hl,ticker					0002D9 34                  B   443    				inc (hl)
0002DA 3A D6 10            B   444    				ld a,(songspeed)	
0002DD BE                  B   445    				cp (hl)							0002DE 20 30               B   446    				jr nz,nspwrap
0002E0 AF                  B   447    				xor a
0002E1 77                  B   448    				ld (hl),a						0002E2 32 D7 10            B   449    				ld (arpeggio_counter),a			0002E5 21 DA 10            B   450    				ld hl,pattdelay_count			0002E8 B6                  B   451    				or (hl)
0002E9 28 04               B   452    				jr z,nopatdel
0002EB 35                  B   453    				dec (hl)						0002EC C3 10 03            B   454    				jp nspwrap
0002EF AF                  B   455    nopatdel		xor a
0002F0 32 DB 10            B   456    				ld (pattdelay_flag),a
0002F3 21 D5 10            B   457    				ld hl,patindex
0002F6 34                  B   458    				inc (hl)						0002F7 7E                  B   459    				ld a,(hl)
0002F8 FE40                B   460    				cp 64							0002FA 20 14               B   461    				jr nz,nspwrap
0002FC AF                  B   462    				xor a
0002FD 77                  B   463    				ld (hl),a
0002FE 32 D8 10            B   464    				ld (pattloop_pos),a				000301 32 D9 10            B   465    				ld (pattloop_count),a			000304 21 D4 10            B   466    				ld hl,songpos		
000307 34                  B   467    				inc (hl)						000308 3A B6 63            B   468    				ld a,(music_module+950)
00030B BE                  B   469    				cp (hl)							00030C 20 02               B   470    				jr nz,nspwrap
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  16


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
00030E 3600                B   471    				ld (hl),0
000310 C9                  B   472    nspwrap			ret
                           B   473    
                           B   474    
                           B   475    ;----------------------------------------------
                           B   476    				
000311 FD7E 04             B   477    check_fx		ld a,(iy+fx_number)	
000314 B7                  B   478    				or a							000315 CA 68 03            B   479    				jp z,arpeggio					000318 FE01                B   480    				cp 1
00031A CA AF 03            B   481    				jp z,portamento_up
00031D FE02                B   482    				cp 2
00031F CA D7 03            B   483    				jp z,portamento_down
000322 FE03                B   484    				cp 3
000324 CA FF 03            B   485    				jp z,tone_portamento
000327 FE04                B   486    				cp 4
000329 CA CD 04            B   487    				jp z,vibrato
00032C FE05                B   488    				cp 5
00032E CA 85 05            B   489    				jp z,tone_portamento_volslide
000331 FE06                B   490    				cp 6
000333 CA 8B 05            B   491    				jp z,vibrato_volslide
000336 FE07                B   492    				cp 7
000338 CA 91 05            B   493    				jp z,tremolo
00033B FE0A                B   494    				cp 0ah
00033D CA 8F 06            B   495    				jp z,volslide
000340 FE0E                B   496    				cp 0eh
000342 CA F9 06            B   497    				jp z,extended_fx
000345 C9                  B   498    				ret
                           B   499    
                           B   500    
000346                     B   501    check_more_fx
                           B   502    
000346 FD7E 04             B   503    				ld a,(iy+fx_number)				000349 FE09                B   504    				cp 9
00034B CA 4C 06            B   505    				jp z,sample_offset
00034E FE0B                B   506    				cp 0bh			
000350 CA B4 06            B   507    				jp z,position_jump
000353 FE0D                B   508    				cp 0dh
000355 CA D0 06            B   509    				jp z,pattern_break
000358 FE0E                B   510    				cp 0eh
00035A CA F9 06            B   511    				jp z,extended_fx
00035D FE0F                B   512    				cp 0fh
00035F CA 9A 08            B   513    				jp z,set_speed
000362 FE0C                B   514    				cp 0ch
000364 CA C0 06            B   515    				jp z,set_volume
000367 C9                  B   516    				ret
                           B   517    					
                           B   518    
                           B   519    ;------- FX $00 -------------------------------
                           B   520    
000368 FD7E 05             B   521    arpeggio		ld a,(iy+fx_args)				00036B B7                  B   522    				or a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  17


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
00036C C8                  B   523    				ret z
00036D FD4E 15             B   524    				ld c,(iy+arp_base_period_lo)	000370 FD46 16             B   525    				ld b,(iy+arp_base_period_hi)
000373 3A D7 10            B   526    				ld a,(arpeggio_counter)	
000376 1E00                B   527    				ld e,0
000378 B7                  B   528    				or a	
000379 28 17               B   529    				jr z,doarp		
00037B FE02                B   530    				cp 2
00037D 28 0D               B   531    				jr z,arptwo
00037F FD5E 05             B   532    arpone			ld e,(iy+fx_args)
000382 CB3B                B   533    				srl e
000384 CB3B                B   534    				srl e
000386 CB3B                B   535    				srl e
000388 CB3B                B   536    				srl e							00038A 18 06               B   537    				jr doarp
00038C FD7E 05             B   538    arptwo			ld a,(iy+fx_args)
00038F E60F                B   539    				and 15
000391 5F                  B   540    				ld e,a							000392 21 30 08            B   541    doarp			ld hl,period_lookup_table-113
000395 09                  B   542    				add hl,bc
000396 7E                  B   543    				ld a,(hl)						000397 83                  B   544    				add a,e							000398 CB27                B   545    				sla a
00039A 21 B1 0B            B   546    				ld hl,period_table_p0
00039D 85                  B   547    				add a,l
00039E 30 01               B   548    				jr nc,alumok
0003A0 24                  B   549    				inc h
0003A1 6F                  B   550    alumok			ld l,a
0003A2 4E                  B   551    				ld c,(hl)
0003A3 23                  B   552    				inc hl
0003A4 46                  B   553    				ld b,(hl)
0003A5 CD 97 02            B   554    				call finetune_bc_period
0003A8 FD71 01             B   555    				ld (iy+period_lo),c
0003AB FD70 02             B   556    				ld (iy+period_hi),b
0003AE C9                  B   557    				ret
                           B   558    
                           B   559    
                           B   560    ;-------- FX $01 ------------------------------
                           B   561    
0003AF                     B   562    portamento_up
                           B   563    
0003AF 0600                B   564    				ld b,0							0003B1 FD4E 05             B   565    				ld c,(iy+fx_args)				0003B4 FD6E 06             B   566    				ld l,(iy+period_for_fx_lo)
0003B7 FD66 07             B   567    				ld h,(iy+period_for_fx_hi)
0003BA AF                  B   568    				xor a
0003BB ED42                B   569    				sbc hl,bc
0003BD 38 08               B   570    				jr c,portumin
0003BF B4                  B   571    				or h
0003C0 20 08               B   572    				jr nz,portugnp
0003C2 7D                  B   573    				ld a,l
0003C3 FE71                B   574    				cp 113
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  18


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
0003C5 30 03               B   575    				jr nc,portugnp
0003C7 217100              B   576    portumin		ld hl,113
0003CA FD75 06             B   577    portugnp		ld (iy+period_for_fx_lo),l
0003CD FD74 07             B   578    				ld (iy+period_for_fx_hi),h
0003D0 FD75 01             B   579    				ld (iy+period_lo),l
0003D3 FD74 02             B   580    				ld (iy+period_hi),h
0003D6 C9                  B   581    				ret
                           B   582    
                           B   583    				
                           B   584    ;--------- FX $02 -----------------------------
                           B   585    
0003D7                     B   586    portamento_down			
                           B   587    
0003D7 0600                B   588    				ld b,0							0003D9 FD4E 05             B   589    				ld c,(iy+fx_args)				0003DC FD6E 06             B   590    				ld l,(iy+period_for_fx_lo)
0003DF FD66 07             B   591    				ld h,(iy+period_for_fx_hi)
0003E2 09                  B   592    				add hl,bc
0003E3 7C                  B   593    				ld a,h
0003E4 FE03                B   594    				cp 3
0003E6 38 0A               B   595    				jr c,portdgnp
0003E8 20 05               B   596    				jr nz,portdmax
0003EA 7D                  B   597    				ld a,l
0003EB FE8B                B   598    				cp 139
0003ED 38 03               B   599    				jr c,portdgnp
0003EF 215803              B   600    portdmax		ld hl,856
0003F2 FD75 06             B   601    portdgnp		ld (iy+period_for_fx_lo),l
0003F5 FD74 07             B   602    				ld (iy+period_for_fx_hi),h
0003F8 FD75 01             B   603    				ld (iy+period_lo),l
0003FB FD74 02             B   604    				ld (iy+period_hi),h
0003FE C9                  B   605    				ret
                           B   606    
                           B   607    
                           B   608    ;--------- FX $03 -----------------------------
                           B   609    
0003FF                     B   610    tone_portamento
                           B   611    
0003FF FD4E 09             B   612    				ld c,(iy+portamento_rate)		000402 FD7E 05             B   613    				ld a,(iy+fx_args)
000405 B7                  B   614    				or a
000406 28 0B               B   615    				jr z,uexistpr
000408 4F                  B   616    				ld c,a
000409 FD7E 04             B   617    				ld a,(iy+fx_number)
00040C FE03                B   618    				cp 3							00040E 20 03               B   619    				jr nz,uexistpr
000410 FD71 09             B   620    				ld (iy+portamento_rate),c	
000413 FD5E 10             B   621    uexistpr		ld e,(iy+portamento_dest_lo)	000416 FD56 11             B   622    				ld d,(iy+portamento_dest_hi)
000419 FD6E 06             B   623    				ld l,(iy+period_for_fx_lo)		00041C FD66 07             B   624    				ld h,(iy+period_for_fx_hi)
00041F AF                  B   625    				xor a
000420 ED52                B   626    				sbc hl,de						Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  19


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000422 C8                  B   627    				ret z							000423 38 1B               B   628    				jr c,tp_peru					                           B   629    
000425 FD6E 06             B   630    tp_perd			ld l,(iy+period_for_fx_lo)		000428 FD66 07             B   631    				ld h,(iy+period_for_fx_hi)
00042B 0600                B   632    				ld b,0
00042D AF                  B   633    				xor a
00042E ED42                B   634    				sbc hl,bc						000430 30 03               B   635    				jr nc,tp_dnw					000432 210000              B   636    				ld hl,0
000435 4D                  B   637    tp_dnw			ld c,l							000436 44                  B   638    				ld b,h
000437 AF                  B   639    				xor a
000438 ED52                B   640    				sbc hl,de						00043A 30 18               B   641    				jr nc,chk_gliss
00043C 4B                  B   642    				ld c,e
00043D 42                  B   643    				ld b,d
00043E 18 1A               B   644    				jr tp_end						                           B   645    
000440 FD6E 06             B   646    tp_peru			ld l,(iy+period_for_fx_lo)		000443 FD66 07             B   647    				ld h,(iy+period_for_fx_hi)
000446 0600                B   648    				ld b,0
000448 09                  B   649    				add hl,bc
000449 4D                  B   650    				ld c,l							00044A 44                  B   651    				ld b,h
00044B AF                  B   652    				xor a
00044C ED52                B   653    				sbc hl,de		
00044E 38 04               B   654    				jr c,chk_gliss
000450 4B                  B   655    				ld c,e							000451 42                  B   656    				ld b,d
000452 18 06               B   657    				jr tp_end	
                           B   658    
000454 FDCB 0F 4E          B   659    chk_gliss		bit 1,(iy+control_bits)			000458 20 0D               B   660    				jr nz,do_gliss		
                           B   661    				
00045A FD71 06             B   662    tp_end			ld (iy+period_for_fx_lo),c
00045D FD70 07             B   663    				ld (iy+period_for_fx_hi),b
000460 FD71 01             B   664    				ld (iy+period_lo),c	
000463 FD70 02             B   665    				ld (iy+period_hi),b
000466 C9                  B   666    				ret	
                           B   667    				
000467 FD71 06             B   668    do_gliss		ld (iy+period_for_fx_lo),c		00046A FD70 07             B   669    				ld (iy+period_for_fx_hi),b
00046D FD7E 14             B   670    				ld a,(iy+finetune)	
000470 CB27                B   671    				sla a
000472 21 91 0B            B   672    				ld hl,tuning_table_list	
000475 5F                  B   673    				ld e,a			
000476 1600                B   674    				ld d,0
000478 19                  B   675    				add hl,de
000479 5E                  B   676    				ld e,(hl)
00047A 23                  B   677    				inc hl	
00047B 56                  B   678    				ld d,(hl)						Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  20


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B   679    
00047C DDE5                B   680    				push ix
00047E D5                  B   681    				push de
00047F DDE1                B   682    				pop ix
000481 AF                  B   683    				xor a
000482 110000              B   684    				ld de,0							000485 DD6E16              B   685    				ld l,(ix+22)					000488 DD6617              B   686    				ld h,(ix+23)
00048B ED42                B   687    				sbc hl,bc
00048D 28 2B               B   688    				jr z,tp_glend
00048F 38 12               B   689    				jr c,gltest
000491 111800              B   690    				ld de,24
000494 DD6E2E              B   691    				ld l,(ix+46)
000497 DD662F              B   692    				ld h,(ix+47)
00049A ED42                B   693    				sbc hl,bc
00049C 28 1C               B   694    				jr z,tp_glend
00049E 38 03               B   695    				jr c,gltest
0004A0 113000              B   696    				ld de,48
                           B   697    
0004A3 DD19                B   698    gltest			add ix,de
0004A5 50                  B   699    				ld d,b
0004A6 59                  B   700    				ld e,c
0004A7 AF                  B   701    				xor a
0004A8 060C                B   702    				ld b,12
0004AA DD6E00              B   703    glissfper		ld l,(ix)						0004AD DD6601              B   704    				ld h,(ix+1)
0004B0 ED52                B   705    				sbc hl,de
0004B2 30 0F               B   706    				jr nc,nggliss
0004B4 DD4E00              B   707    				ld c,(ix)
0004B7 DD4601              B   708    				ld b,(ix+1)
0004BA FD71 01             B   709    tp_glend		ld (iy+period_lo),c	
0004BD FD70 02             B   710    				ld (iy+period_hi),b
0004C0 DDE1                B   711    				pop ix
0004C2 C9                  B   712    				ret
                           B   713    
0004C3 DD23                B   714    nggliss			inc ix
0004C5 DD23                B   715    				inc ix
0004C7 10 E1               B   716    				djnz glissfper
0004C9 42                  B   717    				ld b,d
0004CA 4B                  B   718    				ld c,e
0004CB 18 ED               B   719    				jr tp_glend
                           B   720    
                           B   721    
                           B   722    ;--------- FX $04 -----------------------------
                           B   723    
0004CD FD46 0A             B   724    vibrato			ld b,(iy+vibrato_args)			0004D0 FD7E 04             B   725    				ld a,(iy+fx_number)
0004D3 FE04                B   726    				cp 4
0004D5 20 1C               B   727    				jr nz,vibrsame					0004D7 FD7E 05             B   728    				ld a,(iy+fx_args)
0004DA B7                  B   729    				or a
0004DB 28 16               B   730    				jr z,vibrsame					Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  21


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
0004DD 4F                  B   731    				ld c,a
0004DE E60F                B   732    				and 15
0004E0 28 06               B   733    				jr z,vibdsame					0004E2 57                  B   734    				ld d,a
0004E3 78                  B   735    				ld a,b
0004E4 E6F0                B   736    				and 0f0h
0004E6 B2                  B   737    				or d
0004E7 47                  B   738    				ld b,a							0004E8 79                  B   739    vibdsame		ld a,c
0004E9 E6F0                B   740    				and 0f0h
0004EB 28 06               B   741    				jr z,vibrsame					0004ED 4F                  B   742    				ld c,a
0004EE 78                  B   743    				ld a,b
0004EF E60F                B   744    				and 0fh
0004F1 B1                  B   745    				or c							0004F2 47                  B   746    				ld b,a			
0004F3 FD70 0A             B   747    vibrsame		ld (iy+vibrato_args),b			                           B   748    				
0004F6 FD4E 0B             B   749    				ld c,(iy+vibrato_pos)
0004F9 CB39                B   750    				srl c
0004FB CB39                B   751    				srl c
0004FD 79                  B   752    				ld a,c
0004FE E61F                B   753    				and 1fh
000500 4F                  B   754    				ld c,a							000501 FD7E 0E             B   755    				ld a,(iy+wave_type)	
000504 E60F                B   756    				and 0fh
000506 B7                  B   757    				or a							000507 28 1D               B   758    				jr z,vib_sine					000509 CB21                B   759    				sla c		
00050B CB21                B   760    				sla c
00050D CB21                B   761    				sla c							00050F FE01                B   762    				cp 1
000511 28 04               B   763    				jr z,vib_ramp					000513 1EFF                B   764    				ld e,255			
000515 18 16               B   765    				jr vib_gotd						                           B   766    
000517 FDCB 0B 7E          B   767    vib_ramp		bit 7,(iy+vibrato_pos)			00051B 28 06               B   768    				jr z,vibr2
00051D 3EFF                B   769    				ld a,255
00051F 91                  B   770    				sub c
000520 5F                  B   771    				ld e,a
000521 18 0A               B   772    				jr vib_gotd
000523 59                  B   773    vibr2			ld e,c
000524 18 07               B   774    				jr vib_gotd
                           B   775    
000526 21 31 10            B   776    vib_sine		ld hl,vibrato_table				000529 0600                B   777    				ld b,0
00052B 09                  B   778    				add hl,bc
00052C 5E                  B   779    				ld e,(hl)			
                           B   780    
00052D DDE5                B   781    vib_gotd		push ix
00052F FD7E 0A             B   782    				ld a,(iy+vibrato_args)	
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  22


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000532 2F                  B   783    				cpl
000533 E60F                B   784    				and 0fh			
000535 4F                  B   785    				ld c,a							000536 0600                B   786    				ld b,0			
000538 50                  B   787    				ld d,b
000539 21 44 05            B   788    				ld hl,vmul15
00053C 09                  B   789    				add hl,bc
00053D E5                  B   790    				push hl
00053E DDE1                B   791    				pop ix
000540 60                  B   792    				ld h,b
000541 68                  B   793    				ld l,b
000542 DDE9                B   794    				jp (ix)							000544 19                  B   795    vmul15			add hl,de						000545 19                  B   796    vmul14			add hl,de						000546 19                  B   797    vmul13			add hl,de						000547 19                  B   798    vmul12			add hl,de						000548 19                  B   799    vmul11			add hl,de						000549 19                  B   800    vmul10			add hl,de						00054A 19                  B   801    vmul9			add hl,de						00054B 19                  B   802    vmul8			add hl,de						00054C 19                  B   803    vmul7			add hl,de						00054D 19                  B   804    vmul6			add hl,de						00054E 19                  B   805    vmul5			add hl,de						00054F 19                  B   806    vmul4			add hl,de						000550 19                  B   807    vmul3			add hl,de						000551 19                  B   808    vmul2			add hl,de						000552 19                  B   809    vmul1			add hl,de						000553 CB25                B   810    vmul0			sla l							000555 CB14                B   811    				rl h
000557 5C                  B   812    				ld e,h
000558 1600                B   813    				ld d,0
00055A DDE1                B   814    				pop ix
                           B   815    				
00055C FD6E 06             B   816    				ld l,(iy+period_for_fx_lo)		00055F FD66 07             B   817    				ld h,(iy+period_for_fx_hi)
000562 FDCB 0B 7E          B   818    				bit 7,(iy+vibrato_pos)
000566 20 03               B   819    				jr nz,vib_sub	
000568 19                  B   820    				add hl,de						000569 18 03               B   821    				jr vib_pdone
00056B AF                  B   822    vib_sub			xor a
00056C ED52                B   823    				sbc hl,de						00056E FD75 01             B   824    vib_pdone		ld (iy+period_lo),l
000571 FD74 02             B   825    				ld (iy+period_hi),h
                           B   826    
000574 FD46 0B             B   827    				ld b,(iy+vibrato_pos)			000577 FD7E 0A             B   828    				ld a,(iy+vibrato_args)
00057A CB3F                B   829    				srl a
00057C CB3F                B   830    				srl a
00057E E63C                B   831    				and 3ch							000580 80                  B   832    				add a,b
000581 FD77 0B             B   833    				ld (iy+vibrato_pos),a			000584 C9                  B   834    				ret
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  23


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B   835    
                           B   836    
                           B   837    ;-------- FX $05 ------------------------------
                           B   838    				
000585                     B   839    tone_portamento_volslide
                           B   840    
000585 CD FF 03            B   841    				call tone_portamento
000588 C3 8F 06            B   842    				jp volslide
                           B   843    
                           B   844    			
                           B   845    ;-------- FX $06 ------------------------------
                           B   846    				
00058B                     B   847    vibrato_volslide	
                           B   848    				
00058B CD CD 04            B   849    				call vibrato
00058E C3 8F 06            B   850    				jp volslide
                           B   851    				
                           B   852    				
                           B   853    ;-------- FX $07 ------------------------------
                           B   854    
000591 FD46 0C             B   855    tremolo			ld b,(iy+tremolo_args)			000594 FD7E 05             B   856    				ld a,(iy+fx_args)
000597 B7                  B   857    				or a
000598 28 16               B   858    				jr z,trersame					00059A 4F                  B   859    				ld c,a
00059B E60F                B   860    				and 15
00059D 28 06               B   861    				jr z,tredsame					00059F 57                  B   862    				ld d,a
0005A0 78                  B   863    				ld a,b
0005A1 E6F0                B   864    				and 0f0h
0005A3 B2                  B   865    				or d
0005A4 47                  B   866    				ld b,a							0005A5 79                  B   867    tredsame		ld a,c
0005A6 E6F0                B   868    				and 0f0h
0005A8 28 06               B   869    				jr z,trersame					0005AA 4F                  B   870    				ld c,a
0005AB 78                  B   871    				ld a,b
0005AC E60F                B   872    				and 0fh
0005AE B1                  B   873    				or c							0005AF 47                  B   874    				ld b,a			
0005B0 FD70 0C             B   875    trersame		ld (iy+tremolo_args),b			                           B   876    				
0005B3 FD4E 0D             B   877    				ld c,(iy+tremolo_pos)
0005B6 CB39                B   878    				srl c
0005B8 CB39                B   879    				srl c
0005BA 79                  B   880    				ld a,c
0005BB E61F                B   881    				and 1fh
0005BD 4F                  B   882    				ld c,a							0005BE FD7E 0E             B   883    				ld a,(iy+wave_type)				0005C1 CB3F                B   884    				srl a
0005C3 CB3F                B   885    				srl a
0005C5 CB3F                B   886    				srl a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  24


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
0005C7 CB3F                B   887    				srl a
0005C9 E60F                B   888    				and 0fh							0005CB 28 1D               B   889    				jr z,tre_sine					0005CD CB21                B   890    				sla c		
0005CF CB21                B   891    				sla c
0005D1 CB21                B   892    				sla c							0005D3 FE01                B   893    				cp 1
0005D5 28 04               B   894    				jr z,tre_ramp					0005D7 1EFF                B   895    				ld e,255			
0005D9 18 16               B   896    				jr tre_gotd						                           B   897    
0005DB FDCB 0D 7E          B   898    tre_ramp		bit 7,(iy+tremolo_pos)			0005DF 28 06               B   899    				jr z,trer2
0005E1 3EFF                B   900    				ld a,255
0005E3 91                  B   901    				sub c
0005E4 5F                  B   902    				ld e,a
0005E5 18 0A               B   903    				jr tre_gotd
0005E7 59                  B   904    trer2			ld e,c
0005E8 18 07               B   905    				jr tre_gotd
                           B   906    
0005EA 21 31 10            B   907    tre_sine		ld hl,vibrato_table				0005ED 0600                B   908    				ld b,0
0005EF 09                  B   909    				add hl,bc
0005F0 5E                  B   910    				ld e,(hl)			
                           B   911    
0005F1 DDE5                B   912    tre_gotd		push ix
0005F3 FD7E 0C             B   913    				ld a,(iy+tremolo_args)	
0005F6 2F                  B   914    				cpl
0005F7 E60F                B   915    				and 0fh			
0005F9 4F                  B   916    				ld c,a							0005FA 0600                B   917    				ld b,0			
0005FC 50                  B   918    				ld d,b
0005FD 21 08 06            B   919    				ld hl,tmul15
000600 09                  B   920    				add hl,bc
000601 E5                  B   921    				push hl
000602 DDE1                B   922    				pop ix
000604 60                  B   923    				ld h,b
000605 68                  B   924    				ld l,b
000606 DDE9                B   925    				jp (ix)							000608 19                  B   926    tmul15			add hl,de						000609 19                  B   927    tmul14			add hl,de						00060A 19                  B   928    tmul13			add hl,de						00060B 19                  B   929    tmul12			add hl,de						00060C 19                  B   930    tmul11			add hl,de						00060D 19                  B   931    tmul10			add hl,de						00060E 19                  B   932    tmul9			add hl,de						00060F 19                  B   933    tmul8			add hl,de						000610 19                  B   934    tmul7			add hl,de						000611 19                  B   935    tmul6			add hl,de						000612 19                  B   936    tmul5			add hl,de						000613 19                  B   937    tmul4			add hl,de						000614 19                  B   938    tmul3			add hl,de						Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  25


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000615 19                  B   939    tmul2			add hl,de						000616 19                  B   940    tmul1			add hl,de						000617 CB25                B   941    tmul0			sla l							000619 CB14                B   942    				rl h
00061B CB25                B   943    				sla l
00061D CB14                B   944    				rl h
00061F 6C                  B   945    				ld l,h
000620 DDE1                B   946    				pop ix
                           B   947    				
000622 FD7E 08             B   948    tshftl			ld a,(iy+volume_for_fx)			000625 FDCB 0D 7E          B   949    				bit 7,(iy+tremolo_pos)
000629 20 09               B   950    				jr nz,tre_sub	
00062B 85                  B   951    				add a,l							00062C FE40                B   952    				cp 64
00062E 38 08               B   953    				jr c,tre_done
000630 3E40                B   954    				ld a,64
000632 18 04               B   955    				jr tre_done
000634 95                  B   956    tre_sub			sub l							000635 30 01               B   957    				jr nc,tre_done
000637 AF                  B   958    				xor a
000638 FD77 03             B   959    tre_done		ld (iy+volume),a
                           B   960    				
00063B FD46 0D             B   961    				ld b,(iy+tremolo_pos)			00063E FD7E 0C             B   962    				ld a,(iy+tremolo_args)
000641 CB3F                B   963    				srl a
000643 CB3F                B   964    				srl a
000645 E63C                B   965    				and 3ch							000647 80                  B   966    				add a,b
000648 FD77 0D             B   967    				ld (iy+tremolo_pos),a			00064B C9                  B   968    				ret
                           B   969    
                           B   970    ;-------- FX $09 ------------------------------
                           B   971    
00064C                     B   972    sample_offset
                           B   973    
00064C FD7E 05             B   974    				ld a,(iy+fx_args)		
00064F B7                  B   975    				or a
000650 28 0D               B   976    				jr z,usexoffs					000652 47                  B   977    				ld b,a
000653 0E00                B   978    				ld c,0
000655 CB38                B   979    				srl b
000657 CB19                B   980    				rr c							000659 FD71 1F             B   981    				ld (iy+samp_offset_lo),c
00065C FD70 20             B   982    				ld (iy+samp_offset_hi),b
                           B   983    				
00065F FD4E 1F             B   984    usexoffs		ld c,(iy+samp_offset_lo)		000662 FD46 20             B   985    				ld b,(iy+samp_offset_hi)
000665 FD6E 19             B   986    				ld l,(iy+samp_len_lo)
000668 FD66 1A             B   987    				ld h,(iy+samp_len_hi)
00066B AF                  B   988    				xor a
00066C ED42                B   989    				sbc hl,bc
00066E 28 16               B   990    				jr z,soffbad
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  26


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000670 38 14               B   991    				jr c,soffbad
000672 FD75 19             B   992    				ld (iy+samp_len_lo),l			000675 FD74 1A             B   993    				ld (iy+samp_len_hi),h
000678 FD6E 17             B   994    				ld l,(iy+samp_loc_lo)
00067B FD66 18             B   995    				ld h,(iy+samp_loc_hi)
00067E 09                  B   996    				add hl,bc
00067F FD75 17             B   997    				ld (iy+samp_loc_lo),l			000682 FD74 18             B   998    				ld (iy+samp_loc_hi),h
000685 C9                  B   999    				ret
                           B  1000    
000686 FD36 19 01          B  1001    soffbad			ld (iy+samp_len_lo),1			00068A FD36 1A 00          B  1002    				ld (iy+samp_len_hi),0			00068E C9                  B  1003    				ret
                           B  1004    				
                           B  1005    
                           B  1006    ;-------- FX $0A ------------------------------
                           B  1007    
                           B  1008    
00068F FD7E 05             B  1009    volslide		ld a,(iy+fx_args)				000692 47                  B  1010    				ld b,a
000693 E60F                B  1011    				and 15			
000695 28 0B               B  1012    				jr z,volup
000697 FD7E 03             B  1013    				ld a,(iy+volume)
00069A 90                  B  1014    				sub b
00069B 30 01               B  1015    				jr nc,voldok
00069D AF                  B  1016    				xor a
00069E FD77 03             B  1017    voldok			ld (iy+volume),a
0006A1 C9                  B  1018    				ret
                           B  1019    
0006A2 78                  B  1020    volup			ld a,b							0006A3 0F                  B  1021    				rrca
0006A4 0F                  B  1022    				rrca
0006A5 0F                  B  1023    				rrca
0006A6 0F                  B  1024    				rrca
0006A7 FD86 03             B  1025    				add a,(iy+volume)
0006AA FE40                B  1026    				cp 64
0006AC 38 02               B  1027    				jr c,voluok
0006AE 3E40                B  1028    				ld a,64
0006B0 FD77 03             B  1029    voluok			ld (iy+volume),a
0006B3 C9                  B  1030    				ret
                           B  1031    
                           B  1032    
                           B  1033    ;-------- FX $0B ------------------------------
                           B  1034    
0006B4                     B  1035    position_jump
                           B  1036    
0006B4 FD7E 05             B  1037    				ld a,(iy+fx_args)
0006B7 32 D4 10            B  1038    				ld (songpos),a
0006BA 3EFF                B  1039    				ld a,255
0006BC 32 D5 10            B  1040    				ld (patindex),a
0006BF C9                  B  1041    				ret
                           B  1042    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  27


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B  1043    
                           B  1044    ;-------- FX $0C ------------------------------
                           B  1045    
0006C0                     B  1046    set_volume
                           B  1047    				
0006C0 FD7E 05             B  1048    				ld a,(iy+fx_args)
0006C3 FE40                B  1049    				cp 40h
0006C5 38 02               B  1050    				jr c,vsetok
0006C7 3E40                B  1051    				ld a,40h
0006C9 FD77 03             B  1052    vsetok			ld (iy+volume),a
0006CC FD77 13             B  1053    				ld (iy+volume_waiting),a
0006CF C9                  B  1054    				ret
                           B  1055    
                           B  1056    
                           B  1057    ;-------- FX $0D ------------------------------
                           B  1058    
0006D0                     B  1059    pattern_break
                           B  1060    				
0006D0 FD7E 05             B  1061    				ld a,(iy+fx_args)
0006D3 47                  B  1062    				ld b,a
0006D4 CB3F                B  1063    				srl a
0006D6 CB3F                B  1064    				srl a
0006D8 CB3F                B  1065    				srl a
0006DA CB3F                B  1066    				srl a
0006DC 4F                  B  1067    				ld c,a
0006DD 81                  B  1068    				add a,c
0006DE 81                  B  1069    				add a,c
0006DF 81                  B  1070    				add a,c
0006E0 81                  B  1071    				add a,c
0006E1 CB27                B  1072    				sla a
0006E3 4F                  B  1073    				ld c,a
0006E4 78                  B  1074    				ld a,b
0006E5 E60F                B  1075    				and 0fh
0006E7 81                  B  1076    				add a,c
0006E8 3D                  B  1077    				dec a
0006E9 32 D5 10            B  1078    				ld (patindex),a
0006EC 21 D4 10            B  1079    				ld hl,songpos
0006EF 34                  B  1080    				inc (hl)
0006F0 3A B6 63            B  1081    				ld a,(music_module+950)
0006F3 BE                  B  1082    				cp (hl)							0006F4 20 02               B  1083    				jr nz,nspw_pb
0006F6 3600                B  1084    				ld (hl),0
0006F8 C9                  B  1085    nspw_pb			ret
                           B  1086    
                           B  1087    				
                           B  1088    ;-------- FX $0E ------------------------------
                           B  1089    
                           B  1090    
0006F9                     B  1091    extended_fx
                           B  1092    
0006F9 FD7E 05             B  1093    				ld a,(iy+fx_args)
0006FC 47                  B  1094    				ld b,a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  28


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
0006FD E6F0                B  1095    				and 0f0h
0006FF FE00                B  1096    				cp 0h
000701 28 40               B  1097    				jr z,e0_filter
000703 FE10                B  1098    				cp 10h
000705 28 43               B  1099    				jr z,e1_fineport_up
000707 FE20                B  1100    				cp 20h
000709 28 69               B  1101    				jr z,e2_fineport_down
00070B FE30                B  1102    				cp 30h
00070D CA 9E 07            B  1103    				jp z,e3_glissando_control
000710 FE40                B  1104    				cp 40h
000712 CA AB 07            B  1105    				jp z,e4_vibrato_control
000715 FE50                B  1106    				cp 50h
000717 CA B9 07            B  1107    				jp z,e5_finetune_control
00071A FE60                B  1108    				cp 60h
00071C CA C0 07            B  1109    				jp z,e6_pattern_loop
00071F FE70                B  1110    				cp 70h
000721 CA E5 07            B  1111    				jp z,e7_tremolo_control
000724 FE90                B  1112    				cp 90h
000726 CA FB 07            B  1113    				jp z,e9_retrigger_note
000729 FEA0                B  1114    				cp 0a0h
00072B CA 11 08            B  1115    				jp z,ea_finevol_up
00072E FEB0                B  1116    				cp 0b0h
000730 CA 26 08            B  1117    				jp z,eb_finevol_down
000733 FEC0                B  1118    				cp 0c0h
000735 CA 3A 08            B  1119    				jp z,ec_cutnote
000738 FED0                B  1120    				cp 0d0h
00073A CA 48 08            B  1121    				jp z,ed_delayedtrig
00073D FEE0                B  1122    				cp 0e0h
00073F CA 89 08            B  1123    				jp z,ee_pattdelay
000742 C9                  B  1124    				ret
                           B  1125    
000743                     B  1126    e0_filter
                           B  1127    
000743 78                  B  1128    				ld a,b							000744 E601                B  1129    				and 01h			
000746 32 DC 10            B  1130    				ld (filter_on_off),a
000749 C9                  B  1131    				ret
                           B  1132    				
                           B  1133    
00074A                     B  1134    e1_fineport_up
                           B  1135    
00074A 3A D3 10            B  1136    				ld a,(ticker)
00074D B7                  B  1137    				or a
00074E C0                  B  1138    				ret nz
00074F 0600                B  1139    				ld b,0							000751 FD7E 05             B  1140    				ld a,(iy+fx_args)		
000754 E60F                B  1141    				and 0fh
000756 4F                  B  1142    				ld c,a
000757 FD6E 01             B  1143    				ld l,(iy+period_lo)
00075A FD66 02             B  1144    				ld h,(iy+period_hi)
00075D AF                  B  1145    				xor a
00075E ED42                B  1146    				sbc hl,bc
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  29


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000760 38 08               B  1147    				jr c,fportumin
000762 B4                  B  1148    				or h
000763 20 08               B  1149    				jr nz,fportugnp
000765 7D                  B  1150    				ld a,l
000766 FE71                B  1151    				cp 113
000768 30 03               B  1152    				jr nc,fportugnp
00076A 217100              B  1153    fportumin		ld hl,113						00076D FD75 01             B  1154    fportugnp		ld (iy+period_lo),l
000770 FD74 02             B  1155    				ld (iy+period_hi),h
000773 C9                  B  1156    				ret
                           B  1157    
                           B  1158    
000774                     B  1159    e2_fineport_down
                           B  1160    				
000774 3A D3 10            B  1161    				ld a,(ticker)
000777 B7                  B  1162    				or a
000778 C0                  B  1163    				ret nz
000779 0600                B  1164    				ld b,0							00077B FD7E 05             B  1165    				ld a,(iy+fx_args)		
00077E E60F                B  1166    				and 0fh
000780 4F                  B  1167    				ld c,a
000781 FD6E 01             B  1168    				ld l,(iy+period_lo)
000784 FD66 02             B  1169    				ld h,(iy+period_hi)
000787 09                  B  1170    				add hl,bc
000788 7C                  B  1171    				ld a,h
000789 FE03                B  1172    				cp 3
00078B 38 0A               B  1173    				jr c,fportdgnp
00078D 20 05               B  1174    				jr nz,fportdmax
00078F 7D                  B  1175    				ld a,l
000790 FE58                B  1176    				cp 88
000792 38 03               B  1177    				jr c,fportdgnp
000794 215803              B  1178    fportdmax		ld hl,856						000797 FD75 01             B  1179    fportdgnp		ld (iy+period_lo),l
00079A FD74 02             B  1180    				ld (iy+period_hi),h
00079D C9                  B  1181    				ret
                           B  1182    
                           B  1183    
00079E                     B  1184    e3_glissando_control
                           B  1185    
00079E FDCB 0F 8E          B  1186    				res 1,(iy+control_bits)
0007A2 78                  B  1187    				ld a,b
0007A3 E601                B  1188    				and 01h
0007A5 C8                  B  1189    				ret z
0007A6 FDCB 0F CE          B  1190    				set 1,(iy+control_bits)
0007AA C9                  B  1191    				ret
                           B  1192    
                           B  1193    
0007AB                     B  1194    e4_vibrato_control
                           B  1195    				
0007AB 78                  B  1196    				ld a,b
0007AC E607                B  1197    				and 07h
0007AE 47                  B  1198    				ld b,a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  30


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
0007AF FD7E 0E             B  1199    				ld a,(iy+wave_type)
0007B2 E6F0                B  1200    				and 0f0h
0007B4 B0                  B  1201    				or b
0007B5 FD77 0E             B  1202    				ld (iy+wave_type),a
0007B8 C9                  B  1203    				ret
                           B  1204    
                           B  1205    
0007B9                     B  1206    e5_finetune_control
                           B  1207    				
0007B9 78                  B  1208    				ld a,b							0007BA E60F                B  1209    				and 0fh			
0007BC FD77 14             B  1210    				ld (iy+finetune),a
0007BF C9                  B  1211    				ret
                           B  1212    
                           B  1213    
0007C0                     B  1214    e6_pattern_loop
                           B  1215    
0007C0 3A D3 10            B  1216    				ld a,(ticker)
0007C3 B7                  B  1217    				or a
0007C4 C0                  B  1218    				ret nz
0007C5 78                  B  1219    				ld a,b
0007C6 E60F                B  1220    				and 0fh
0007C8 28 14               B  1221    				jr z,setplp
0007CA 21 D9 10            B  1222    				ld hl,pattloop_count
0007CD 34                  B  1223    				inc (hl)
0007CE BE                  B  1224    				cp (hl)
0007CF 38 08               B  1225    				jr c,plp_end
0007D1 3A D8 10            B  1226    				ld a,(pattloop_pos)				0007D4 3D                  B  1227    				dec a							0007D5 32 D5 10            B  1228    				ld (patindex),a
0007D8 C9                  B  1229    				ret
0007D9 AF                  B  1230    plp_end			xor a			
0007DA 32 D9 10            B  1231    				ld (pattloop_count),a			0007DD C9                  B  1232    				ret
0007DE 3A D5 10            B  1233    setplp			ld a,(patindex)					0007E1 32 D8 10            B  1234    				ld (pattloop_pos),a
0007E4 C9                  B  1235    				ret
                           B  1236    				
                           B  1237    
0007E5                     B  1238    e7_tremolo_control
                           B  1239    				
0007E5 78                  B  1240    				ld a,b
0007E6 E607                B  1241    				and 07h
0007E8 47                  B  1242    				ld b,a
0007E9 CB20                B  1243    				sla b
0007EB CB20                B  1244    				sla b
0007ED CB20                B  1245    				sla b
0007EF CB20                B  1246    				sla b
0007F1 FD7E 0E             B  1247    				ld a,(iy+wave_type)
0007F4 E60F                B  1248    				and 0fh
0007F6 B0                  B  1249    				or b
0007F7 FD77 0E             B  1250    				ld (iy+wave_type),a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  31


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
0007FA C9                  B  1251    				ret
                           B  1252    				
                           B  1253    
0007FB                     B  1254    e9_retrigger_note
                           B  1255    
0007FB 78                  B  1256    				ld a,b
0007FC E60F                B  1257    				and 0fh
0007FE C8                  B  1258    				ret z
0007FF 47                  B  1259    				ld b,a
000800 3A D3 10            B  1260    				ld a,(ticker)
000803 B7                  B  1261    				or a
000804 28 06               B  1262    				jr z,retrigit
000806 90                  B  1263    rtloop			sub b
000807 28 03               B  1264    				jr z,retrigit
000809 30 FB               B  1265    				jr nc,rtloop
00080B C9                  B  1266    				ret
00080C FDCB 0F C6          B  1267    retrigit		set 0,(iy+control_bits)
000810 C9                  B  1268    				ret
                           B  1269    				
                           B  1270    
                           B  1271    
000811                     B  1272    ea_finevol_up
                           B  1273    
000811 3A D3 10            B  1274    				ld a,(ticker)
000814 B7                  B  1275    				or a
000815 C0                  B  1276    				ret nz
000816 78                  B  1277    				ld a,b
000817 E60F                B  1278    				and 0fh
000819 FD86 03             B  1279    				add a,(iy+volume)
00081C FE40                B  1280    				cp 64
00081E 38 02               B  1281    				jr c,eavolok
000820 3E40                B  1282    				ld a,64
000822 FD77 03             B  1283    eavolok			ld (iy+volume),a
000825 C9                  B  1284    				ret
                           B  1285    				
                           B  1286    
000826                     B  1287    eb_finevol_down
                           B  1288    					
000826 3A D3 10            B  1289    				ld a,(ticker)
000829 B7                  B  1290    				or a
00082A C0                  B  1291    				ret nz
00082B 78                  B  1292    				ld a,b
00082C E60F                B  1293    				and 0fh
00082E 47                  B  1294    				ld b,a
00082F FD7E 03             B  1295    				ld a,(iy+volume)
000832 90                  B  1296    				sub b
000833 30 01               B  1297    				jr nc,ebvolok
000835 AF                  B  1298    				xor a
000836 FD77 03             B  1299    ebvolok			ld (iy+volume),a
000839 C9                  B  1300    				ret
                           B  1301    
                           B  1302    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  32


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
00083A                     B  1303    ec_cutnote
                           B  1304    
00083A 78                  B  1305    				ld a,b
00083B E60F                B  1306    				and 0fh
00083D 47                  B  1307    				ld b,a
00083E 3A D3 10            B  1308    				ld a,(ticker)
000841 B8                  B  1309    				cp b
000842 C0                  B  1310    				ret nz
000843 AF                  B  1311    				xor a
000844 FD77 03             B  1312    				ld (iy+volume),a
000847 C9                  B  1313    				ret
                           B  1314    				
                           B  1315    
                           B  1316    
                           B  1317    				
000848                     B  1318    ed_delayedtrig	
                           B  1319    				
000848 78                  B  1320    				ld a,b
000849 E60F                B  1321    				and 0fh
00084B 47                  B  1322    				ld b,a
00084C 3A D3 10            B  1323    				ld a,(ticker)
00084F B8                  B  1324    				cp b
000850 C0                  B  1325    				ret nz
                           B  1326    				
000851 FDCB 0F 5E          B  1327    				bit 3,(iy+control_bits)			000855 28 17               B  1328    				jr z,ed_nonewp2
000857 FD4E 06             B  1329    				ld c,(iy+period_for_fx_lo)		00085A FD46 07             B  1330    				ld b,(iy+period_for_fx_hi)
00085D FD71 01             B  1331    				ld (iy+period_lo),c
000860 FD70 02             B  1332    				ld (iy+period_hi),b
000863 FDCB 0F C6          B  1333    				set 0,(iy+control_bits)			000867 FD7E 12             B  1334    				ld a,(iy+instrument_waiting)	00086A B7                  B  1335    				or a
00086B C8                  B  1336    				ret z
00086C 18 0E               B  1337    				jr ed_do_vol					                           B  1338    				
00086E                     B  1339    ed_nonewp2
                           B  1340    
00086E FD7E 12             B  1341    				ld a,(iy+instrument_waiting)	000871 B7                  B  1342    				or a							000872 C8                  B  1343    				ret z
000873 FDBE 00             B  1344    				cp (iy+instrument)			
000876 28 04               B  1345    				jr z,ed_do_vol
000878 FDCB 0F C6          B  1346    				set 0,(iy+control_bits)
                           B  1347    
00087C FD77 00             B  1348    ed_do_vol		ld (iy+instrument),a
00087F FD7E 13             B  1349    				ld a,(iy+volume_waiting)		000882 FD77 03             B  1350    				ld (iy+volume),a	
000885 FD77 08             B  1351    				ld (iy+volume_for_fx),a			000888 C9                  B  1352    				ret
                           B  1353    
                           B  1354    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  33


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B  1355    
                           B  1356    				
                           B  1357    				
000889                     B  1358    ee_pattdelay
                           B  1359    
000889 3A DB 10            B  1360    				ld a,(pattdelay_flag)			00088C B7                  B  1361    				or a
00088D C0                  B  1362    				ret nz
00088E 78                  B  1363    				ld a,b
00088F E60F                B  1364    				and 0fh
000891 32 DA 10            B  1365    				ld (pattdelay_count),a
000894 3E01                B  1366    				ld a,1
000896 32 DB 10            B  1367    				ld (pattdelay_flag),a
000899 C9                  B  1368    				ret
                           B  1369    				
                           B  1370    
                           B  1371    
                           B  1372    ;-------- FX $0F ------------------------------
                           B  1373    
00089A                     B  1374    set_speed
00089A FD7E 05             B  1375    				ld a,(iy+fx_args)
00089D 32 D6 10            B  1376    				ld (songspeed),a
0008A0 C9                  B  1377    				ret
                           B  1378    
                           B  1379    
                           B  1380    ;---- Amiga Period List -----------------------
                           B  1381    
0008A1                     B  1382    period_lookup_table	
                           B  1383    
0008A1 23000000 00000022   B  1384    					DB 35,0,0,0,0,0,0,34,0,0,0,
0008A9 00000000 00002100 
0008B1 00000000 00002000   B  1385    					DB 0,0,0,0,0,0,32,0,0,0,0,0
0008B9 00000000 00001F00 
0008C1 00000000 00001E00   B  1386    					DB 0,0,0,0,0,0,30,0,0,0,0,0
0008C9 00000000 0000001D 
0008D1 00000000 00000000   B  1387    					DB 0,0,0,0,0,0,0,0,0,28,0,0
0008D9 001C0000 00000000 
0008E1 0000001B 00000000   B  1388    					DB 0,0,0,27,0,0,0,0,0,0,0,0
0008E9 00000000 001A0000 
0008F1 00000000 00000000   B  1389    					DB 0,0,0,0,0,0,0,0,0,25,0,0
0008F9 00190000 00000000 
000901 00000000 00180000   B  1390    					DB 0,0,0,0,0,24,0,0,0,0,0,0
000909 00000000 00000000 
000911 00170000 00000000   B  1391    					DB 0,23,0,0,0,0,0,0,0,0,0,0
000919 00000000 00000016 
000921 00000000 00000000   B  1392    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000929 00000000 00150000 
000931 00000000 00000000   B  1393    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000939 00000000 14000000 
000941 00000000 00000000   B  1394    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000949 00000000 13000000 
000951 00000000 00000000   B  1395    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  34


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000959 00000000 00120000 
000961 00000000 00000000   B  1396    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000969 00000000 00000011 
000971 00000000 00000000   B  1397    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000979 00000000 00000000 
000981 00001000 00000000   B  1398    					DB 0,0,16,0,0,0,0,0,0,0,0,0
000989 00000000 00000000 
000991 00000000 0000000F   B  1399    					DB 0,0,0,0,0,0,0,15,0,0,0,0
000999 00000000 00000000 
0009A1 00000000 00000000   B  1400    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
0009A9 00000000 0E000000 
0009B1 00000000 00000000   B  1401    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
0009B9 00000000 00000000 
0009C1 0000000D 00000000   B  1402    					DB 0,0,0,13,0,0,0,0,0,0,0,0
0009C9 00000000 00000000 
0009D1 00000000 00000000   B  1403    					DB 0,0,0,0,0,0,0,0,0,0,0,12
0009D9 0000000C 00000000 
0009E1 00000000 00000000   B  1404    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
0009E9 00000000 00000000 
0009F1 00000000 0B000000   B  1405    					DB 0,0,0,0,11,0,0,0,0,0,0,0
0009F9 00000000 00000000 
000A01 00000000 00000000   B  1406    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000A09 00000000 0000000A 
000A11 00000000 00000000   B  1407    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000A19 00000000 00000000 
000A21 00000000 00000000   B  1408    					DB 0,0,0,0,0,0,0,0,0,0,0,9,
000A29 00000009 00000000 
000A31 00000000 00000000   B  1409    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000A39 00000000 00000000 
000A41 00000000 00000000   B  1410    					DB 0,0,0,0,0,0,0,0,0,8,0,0,
000A49 00080000 00000000 
000A51 00000000 00000000   B  1411    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000A59 00000000 00000000 
000A61 00000000 00000000   B  1412    					DB 0,0,0,0,0,0,0,0,0,7,0,0,
000A69 00070000 00000000 
000A71 00000000 00000000   B  1413    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000A79 00000000 00000000 
000A81 00000000 00000000   B  1414    					DB 0,0,0,0,0,0,0,0,0,0,0,6,
000A89 00000006 00000000 
000A91 00000000 00000000   B  1415    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000A99 00000000 00000000 
000AA1 00000000 00000000   B  1416    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000AA9 00000000 00000005 
000AB1 00000000 00000000   B  1417    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000AB9 00000000 00000000 
000AC1 00000000 00000000   B  1418    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000AC9 00000000 00000000 
000AD1 00000000 00040000   B  1419    					DB 0,0,0,0,0,4,0,0,0,0,0,0,
000AD9 00000000 00000000 
000AE1 00000000 00000000   B  1420    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000AE9 00000000 00000000 
000AF1 00000000 00000000   B  1421    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  35


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000AF9 00000000 00000003 
000B01 00000000 00000000   B  1422    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000B09 00000000 00000000 
000B11 00000000 00000000   B  1423    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000B19 00000000 00000000 
000B21 00000000 00000000   B  1424    					DB 0,0,0,0,0,0,0,0,0,2,0,0,
000B29 00020000 00000000 
000B31 00000000 00000000   B  1425    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000B39 00000000 00000000 
000B41 00000000 00000000   B  1426    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000B49 00000000 00000000 
000B51 00000000 00000001   B  1427    					DB 0,0,0,0,0,0,0,1,0,0,0,0,
000B59 00000000 00000000 
000B61 00000000 00000000   B  1428    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000B69 00000000 00000000 
000B71 00000000 00000000   B  1429    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000B79 00000000 00000000 
000B81 00000000 00000000   B  1430    					DB 0,0,0,0,0,0,0,0,0,0,0,0,
000B89 00000000 00000000 
                           B  1431    
                           B  1432    
000B91 B10B                B  1433    tuning_table_list	dw period_table_p0
000B93 F90B                B  1434    					dw period_table_p1
000B95 410C                B  1435    					dw period_table_p2
000B97 890C                B  1436    					dw period_table_p3
000B99 D10C                B  1437    					dw period_table_p4
000B9B 190D                B  1438    					dw period_table_p5
000B9D 610D                B  1439    					dw period_table_p6
000B9F A90D                B  1440    					dw period_table_p7
000BA1 F10D                B  1441    					dw period_table_m8
000BA3 390E                B  1442    					dw period_table_m7
000BA5 810E                B  1443    					dw period_table_m6
000BA7 C90E                B  1444    					dw period_table_m5
000BA9 110F                B  1445    					dw period_table_m4
000BAB 590F                B  1446    					dw period_table_m3
000BAD A10F                B  1447    					dw period_table_m2
000BAF E90F                B  1448    					dw period_table_m1
                           B  1449    		
                           B  1450    
000BB1 58032803 FA02D002   B  1451    period_table_p0	dw 856,808,762,720,678,640,604,
000BB9 A6028002 5C023A02 
000BC1 1A02FC01 E001C501 
000BC9 AC019401 7D016801   B  1452    				dw 428,404,381,360,339,320,302,
000BD1 53014001 2E011D01 
000BD9 0D01FE00 F000E200 
000BE1 D600CA00 BE00B400   B  1453    				dw 214,202,190,180,170,160,151,
000BE9 AA00A000 97008F00 
000BF1 87007F00 78007100 
                           B  1454    
000BF9 52032203 F502CB02   B  1455    period_table_p1	dw 850,802,757,715,674,637,601,
000C01 A2027D02 59023702 
000C09 1702F901 DD01C201 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  36


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000C11 A9019101 7B016501   B  1456    				dw 425,401,379,357,337,318,300,
000C19 51013E01 2C011C01 
000C21 0C01FD00 EF00E100 
000C29 D500C900 BD00B300   B  1457    				dw 213,201,189,179,169,159,150,
000C31 A9009F00 96008E00 
000C39 86007E00 77007100 
                           B  1458    
000C41 4C031C03 F002C502   B  1459    period_table_p2	dw 844,796,752,709,670,632,597,
000C49 9E027802 55023302 
000C51 1402F601 DA01BF01 
000C59 A6018E01 78016301   B  1460    				dw 422,398,376,355,335,316,298,
000C61 4F013C01 2A011A01 
000C69 0A01FB00 ED00E000 
000C71 D300C700 BC00B100   B  1461    				dw 211,199,188,177,167,158,149,
000C79 A7009E00 95008D00 
000C81 85007D00 76007000 
                           B  1462    
000C89 46031703 EA02C002   B  1463    period_table_p3	dw 838,791,746,704,665,628,592,
000C91 99027402 50022F02 
000C99 1002F201 D601BC01 
000CA1 A3018B01 75016001   B  1464    				dw 419,395,373,352,332,314,296,
000CA9 4C013A01 28011801 
000CB1 0801F900 EB00DE00 
000CB9 D100C600 BB00B000   B  1465    				dw 209,198,187,176,166,157,148,
000CC1 A6009D00 94008C00 
000CC9 84007D00 76006F00 
                           B  1466    
000CD1 40031103 E502BB02   B  1467    period_table_p4	dw 832,785,741,699,660,623,588,
000CD9 94026F02 4C022B02 
000CE1 0C02EF01 D301B901 
000CE9 A0018801 72015E01   B  1468    				dw 416,392,370,350,330,312,294,
000CF1 4A013801 26011601 
000CF9 0601F700 E900DC00 
000D01 D000C400 B900AF00   B  1469    				dw 208,196,185,175,165,156,147,
000D09 A5009C00 93008B00 
000D11 83007C00 75006E00 
                           B  1470    
000D19 3A030B03 E002B602   B  1471    period_table_p5	dw 826,779,736,694,655,619,584,
000D21 8F026B02 48022702 
000D29 0802EB01 CF01B501 
000D31 9D018601 70015B01   B  1472    				dw 413,390,368,347,328,309,292,
000D39 48013501 24011401 
000D41 0401F500 E800DB00 
000D49 CE00C300 B800AE00   B  1473    				dw 206,195,184,174,164,155,146,
000D51 A4009B00 92008A00 
000D59 82007B00 74006D00 
                           B  1474    
000D61 34030603 DA02B102   B  1475    period_table_p6	dw 820,774,730,689,651,614,580,
000D69 8B026602 44022302 
000D71 0402E701 CC01B201 
000D79 9A018301 6D015901   B  1476    				dw 410,387,365,345,325,307,290,
000D81 45013301 22011201 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  37


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000D89 0201F400 E600D900 
000D91 CD00C100 B700AC00   B  1477    				dw 205,193,183,172,163,154,145,
000D99 A3009A00 91008900 
000DA1 81007A00 73006D00 
                           B  1478    
000DA9 2E030003 D502AC02   B  1479    period_table_p7	dw 814,768,725,684,646,610,575,
000DB1 86026202 3F021F02 
000DB9 0102E401 C901AF01 
000DC1 97018001 6B015601   B  1480    				dw 407,384,363,342,323,305,288,
000DC9 43013101 20011001 
000DD1 0001F200 E400D800 
000DD9 CC00C000 B500AB00   B  1481    				dw 204,192,181,171,161,152,144,
000DE1 A1009800 90008800 
000DE9 80007900 72006C00 
                           B  1482    
000DF1 8B035803 2803FA02   B  1483    period_table_m8	dw 907,856,808,762,720,678,640,
000DF9 D002A602 80025C02 
000E01 3A021A02 FC01E001 
000E09 C501AC01 94017D01   B  1484    				dw 453,428,404,381,360,339,320,
000E11 68015301 40012E01 
000E19 1D010D01 FE00F000 
000E21 E200D600 CA00BE00   B  1485    				dw 226,214,202,190,180,170,160,
000E29 B400AA00 A0009700 
000E31 8F008700 7F007800 
                           B  1486    
000E39 84035203 2203F502   B  1487    period_table_m7	dw 900,850,802,757,715,675,636,
000E41 CB02A302 7C025902 
000E49 37021702 F901DD01 
000E51 C201A901 91017B01   B  1488    				dw 450,425,401,379,357,337,318,
000E59 65015101 3E012C01 
000E61 1C010C01 FD00EE00 
000E69 E100D400 C800BD00   B  1489    				dw 225,212,200,189,179,169,159,
000E71 B300A900 9F009600 
000E79 8E008600 7E007700 
                           B  1490    
000E81 7E034C03 1C03F002   B  1491    period_table_m6	dw 894,844,796,752,709,670,632,
000E89 C5029E02 78025502 
000E91 33021402 F601DA01 
000E99 BF01A601 8E017801   B  1492    				dw 447,422,398,376,355,335,316,
000EA1 63014F01 3C012A01 
000EA9 1A010A01 FB00ED00 
000EB1 DF00D300 C700BC00   B  1493    				dw 223,211,199,188,177,167,158,
000EB9 B100A700 9E009500 
000EC1 8D008500 7D007600 
                           B  1494    
000EC9 77034603 1703EA02   B  1495    period_table_m5	dw 887,838,791,746,704,665,628,
000ED1 C0029902 74025002 
000ED9 2F021002 F201D601 
000EE1 BC01A301 8B017501   B  1496    				dw 444,419,395,373,352,332,314,
000EE9 60014C01 3A012801 
000EF1 18010801 F900EB00 
000EF9 DE00D100 C600BB00   B  1497    				dw 222,209,198,187,176,166,157,
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  38


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
000F01 B000A600 9D009400 
000F09 8C008400 7D007600 
                           B  1498    
000F11 71034003 1103E502   B  1499    period_table_m4	dw 881,832,785,741,699,660,623,
000F19 BB029402 6F024C02 
000F21 2B020C02 EE01D301 
000F29 B901A001 88017201   B  1500    				dw 441,416,392,370,350,330,312,
000F31 5E014A01 38012601 
000F39 16010601 F700E900 
000F41 DC00D000 C400B900   B  1501    				dw 220,208,196,185,175,165,156,
000F49 AF00A500 9C009300 
000F51 8B008300 7B007500 
                           B  1502    
000F59 6B033A03 0B03E002   B  1503    period_table_m3	dw 875,826,779,736,694,655,619,
000F61 B6028F02 6B024802 
000F69 27020802 EB01CF01 
000F71 B5019D01 86017001   B  1504    				dw 437,413,390,368,347,328,309,
000F79 5B014801 35012401 
000F81 14010401 F500E800 
000F89 DB00CE00 C300B800   B  1505    				dw 219,206,195,184,174,164,155,
000F91 AE00A400 9B009200 
000F99 8A008200 7B007400 
                           B  1506    
000FA1 64033403 0603DA02   B  1507    period_table_m2	dw 868,820,774,730,689,651,614,
000FA9 B1028B02 66024402 
000FB1 23020402 E701CC01 
000FB9 B2019A01 83016D01   B  1508    				dw 434,410,387,365,345,325,307,
000FC1 59014501 33012201 
000FC9 12010201 F400E600 
000FD1 D900CD00 C100B700   B  1509    				dw 217,205,193,183,172,163,154,
000FD9 AC00A300 9A009100 
000FE1 89008100 7A007300 
                           B  1510    
000FE9 5E032E03 0003D502   B  1511    period_table_m1	dw 862,814,768,725,684,646,610,
000FF1 AC028602 62023F02 
000FF9 1F020102 E401C901 
001001 AF019701 80016B01   B  1512    				dw 431,407,384,363,342,323,305,
001009 56014301 31012001 
001011 10010001 F200E400 
001019 D800CB00 C000B500   B  1513    				dw 216,203,192,181,171,161,152,
001021 AB00A100 98009000 
001029 88008000 79007200 
                           B  1514    
                           B  1515    ;----- Vibrato sine wave ----------------------
                           B  1516    
001031 0018314A 61788DA1   B  1517    vibrato_table		db 000,024,049,074,097,120,
001039 B4C5D4E0 EBF4FAFD   B  1518    					db 180,197,212,224,235,244,
001041 FFFDFAF4 EBE0D4C5   B  1519    					db 255,253,250,244,235,224,
001049 B4A18D78 614A3118   B  1520    					db 180,161,141,120,097,074,
                           B  1521    
                           B  1522    ;----------------------------------------------
                           B  1523    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  39


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
001051 00001E00 3C005A00   B  1524    multiply_30_table	dw 000,030,060,090,120,150,
001059 78009600 B400D200 
001061 F0000E01 2C014A01   B  1525    					dw 240,270,300,330,360,390,
001069 68018601 A401C201 
001071 E001FE01 1C023A02   B  1526    					dw 480,510,540,570,600,630,
001079 58027602 9402B202 
001081 D002EE02 0C032A03   B  1527    					dw 720,750,780,810,840,870,
001089 48036603 8403A203 
                           B  1528    
                           B  1529    ;----------------------------------------------
                           B  1530    
001091 0000                B  1531    sample_base				dw 0			; "init
001093 0000                B  1532    force_sample_base		dw 0			; set t
                           B  1533    
001095 00 00 00 00 00 00   B  1534    sample_location_list	blkb 62,0		; for 3
00109B 00 00 00 00 00 00 
0010A1 00 00 00 00 00 00 
0010A7 00 00 00 00 00 00 
0010AD 00 00 00 00 00 00 
0010B3 00 00 00 00 00 00 
0010B9 00 00 00 00 00 00 
0010BF 00 00 00 00 00 00 
0010C5 00 00 00 00 00 00 
0010CB 00 00 00 00 00 00 
0010D1 00 00 
                           B  1535    
                           B  1536    ;----------------------------------------------
                           B  1537    
0010D3 00                  B  1538    ticker				db 0
0010D4 00                  B  1539    songpos				db 0
0010D5 00                  B  1540    patindex			db 0
0010D6 00                  B  1541    songspeed			db 0
0010D7 00                  B  1542    arpeggio_counter	db 0
0010D8 00                  B  1543    pattloop_pos		db 0
0010D9 00                  B  1544    pattloop_count		db 0
0010DA 00                  B  1545    pattdelay_count		db 0
0010DB 00                  B  1546    pattdelay_flag		db 0
0010DC 00                  B  1547    filter_on_off		db 0
                           B  1548    
                           B  1549    ;----------------------------------------------
                           B  1550    
       00000021            B  1551    vars_per_channel	equ 33
                           B  1552    
0010DD 00 00 00 00 00 00   B  1553    channel_data		blkb vars_per_channel*4,0
0010E3 00 00 00 00 00 00 
0010E9 00 00 00 00 00 00 
0010EF 00 00 00 00 00 00 
0010F5 00 00 00 00 00 00 
0010FB 00 00 00 00 00 00 
001101 00 00 00 00 00 00 
001107 00 00 00 00 00 00 
00110D 00 00 00 00 00 00 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  40


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
001113 00 00 00 00 00 00 
001119 00 00 00 00 00 00 
00111F 00 00 00 00 00 00 
001125 00 00 00 00 00 00 
00112B 00 00 00 00 00 00 
001131 00 00 00 00 00 00 
001137 00 00 00 00 00 00 
00113D 00 00 00 00 00 00 
001143 00 00 00 00 00 00 
001149 00 00 00 00 00 00 
00114F 00 00 00 00 00 00 
001155 00 00 00 00 00 00 
00115B 00 00 00 00 00 00 
                           B  1554    	
       00000000            B  1555    instrument			equ 0
       00000001            B  1556    period_lo			equ 1
       00000002            B  1557    period_hi			equ 2
       00000003            B  1558    volume				equ 3
       00000004            B  1559    fx_number			equ 4
       00000005            B  1560    fx_args				equ 5
       00000006            B  1561    period_for_fx_lo	equ 6
       00000007            B  1562    period_for_fx_hi	equ 7
       00000008            B  1563    volume_for_fx		equ 8
       00000009            B  1564    portamento_rate		equ 9
       0000000A            B  1565    vibrato_args		equ 10
       0000000B            B  1566    vibrato_pos			equ 11
       0000000C            B  1567    tremolo_args		equ 12
       0000000D            B  1568    tremolo_pos			equ 13
       0000000E            B  1569    wave_type 			equ 14		;bits 7:4 = tre
       0000000F            B  1570    control_bits		equ 15		;bit 0 = note t
       00000010            B  1571    portamento_dest_lo	equ 16		;bit 2 = channe
       00000011            B  1572    portamento_dest_hi	equ 17
       00000012            B  1573    instrument_waiting	equ 18
       00000013            B  1574    volume_waiting		equ 19
       00000014            B  1575    finetune			equ 20
       00000015            B  1576    arp_base_period_lo  equ 21
       00000016            B  1577    arp_base_period_hi	equ 22
                           B  1578    
       00000017            B  1579    samp_loc_lo			equ 23
       00000018            B  1580    samp_loc_hi			equ 24
       00000019            B  1581    samp_len_lo			equ 25
       0000001A            B  1582    samp_len_hi			equ 26
       0000001B            B  1583    samp_loop_loc_lo	equ 27
       0000001C            B  1584    samp_loop_loc_hi	equ 28
       0000001D            B  1585    samp_loop_len_lo	equ 29
       0000001E            B  1586    samp_loop_len_hi	equ 30
       0000001F            B  1587    samp_offset_lo		equ 31
       00000020            B  1588    samp_offset_hi		equ 32
                           B  1589    
                           B  1590    ;==============================================
                           B  1591    ; End of non-hardware specific Z80 Protracker c
                           B  1592    ;==============================================
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  41


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\50Hz_Z80_Protracker_Player_v505.asm
                           B  1593    
                           A    89    	
                           B     0    			include "Amiga_to_EZ80P_audio_mono.
                           B     1    ;----------------------------------------------
                           B     2    ; Convert Amiga hardware values from Z80 Protra
                           B     3    ; and writes to hardware registers
                           B     4    ;----------------------------------------------
                           B     5    ;
                           B     6    ; V1.02 - Z80 mode (non-ADL code) for HW v0037
                           B     7    ; Writes 4 channels to left channels
                           B     8    ;----------------------------------------------
                           B     9    
                           B    10    .assume ADL = 0
                           B    11    
       000010DE            B    12    firstchan_period	equ channel_data+period_lo
       000010E0            B    13    firstchan_volume	equ channel_data+volume
       000010F4            B    14    firstchan_location	equ channel_data+samp_loc_l
       000010F6            B    15    firstchan_length	equ channel_data+samp_len_l
       000010EC            B    16    firstchan_control	equ channel_data+control_bi
       000010F8            B    17    firstchan_loop_loc	equ channel_data+samp_loop_
       000010FA            B    18    firstchan_loop_len	equ channel_data+samp_loop_
                           B    19    
       000010FF            B    20    secondchan_period	equ channel_data+vars_per_c
       00001101            B    21    secondchan_volume	equ channel_data+vars_per_c
       00001115            B    22    secondchan_location	equ channel_data+vars_per_c
       00001117            B    23    secondchan_length	equ channel_data+vars_per_c
       0000110D            B    24    secondchan_control	equ channel_data+vars_per_c
       00001119            B    25    secondchan_loop_loc	equ channel_data+vars_per_c
       0000111B            B    26    secondchan_loop_len	equ channel_data+vars_per_c
                           B    27    
       00001120            B    28    thirdchan_period	equ channel_data+(vars_per_
       00001122            B    29    thirdchan_volume	equ channel_data+(vars_per_
       00001136            B    30    thirdchan_location	equ channel_data+(vars_per_
       00001138            B    31    thirdchan_length	equ channel_data+(vars_per_
       0000112E            B    32    thirdchan_control	equ channel_data+(vars_per_
       0000113A            B    33    thirdchan_loop_loc	equ channel_data+(vars_per_
       0000113C            B    34    thirdchan_loop_len	equ channel_data+(vars_per_
                           B    35    
       00001141            B    36    fourthchan_period	equ channel_data+(vars_per_
       00001143            B    37    fourthchan_volume	equ channel_data+(vars_per_
       00001157            B    38    fourthchan_location	equ channel_data+(vars_per_
       00001159            B    39    fourthchan_length	equ channel_data+(vars_per_
       0000114F            B    40    fourthchan_control	equ channel_data+(vars_per_
       0000115B            B    41    fourthchan_loop_loc	equ channel_data+(vars_per_
       0000115D            B    42    fourthchan_loop_len	equ channel_data+(vars_per_
                           B    43    
                           B    44    ;----------------------------------------------
                           B    45    ; EZ80P specific code
                           B    46    ;----------------------------------------------
                           B    47    
001161                     B    48    update_audio_hardware
                           B    49    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  42


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\Amiga_to_EZ80P_audio_mono.asm
001161 3E01                B    50    				ld a,1
001163 5B320300 F8         B    51    				ld.lil (hw_audio_registers+3),a
001168 0E01                B    52    				ld c,port_hw_flags
00116A ED7440              B    53    wait_audreg		tstio 40h						00116D 28 FB               B    54    				jr z,wait_audreg
                           B    55    				
00116F 3EFF                B    56    				ld a,0ffh						001171 5B320000 F0         B    57    				ld.lil (hw_palette),a			                           B    58    				
                           B    59    ;----------------------------------------------
                           B    60    ; Write Period Constants - must be done in max 
                           B    61    ;----------------------------------------------
                           B    62    								
001176 5BDD2100 00F8       B    63    				ld.lil ix,hw_audio_registers	                           B    64    						
00117C 11 1C 12            B    65    				ld de,period_conv_table-200		00117F 2A DE 10            B    66    				ld hl,(firstchan_period)	  	001182 29                  B    67    				add hl,hl
001183 19                  B    68    				add hl,de
001184 5E                  B    69    				ld e,(hl)
001185 23                  B    70    				inc hl
001186 56                  B    71    				ld d,(hl)
001187 5BDD1F08            B    72    				ld.lil (ix+08h),de				                           B    73    				
00118B 11 1C 12            B    74    				ld de,period_conv_table-200		00118E 2A FF 10            B    75    				ld hl,(secondchan_period)	  	001191 29                  B    76    				add hl,hl
001192 19                  B    77    				add hl,de
001193 5E                  B    78    				ld e,(hl)
001194 23                  B    79    				inc hl
001195 56                  B    80    				ld d,(hl)
001196 5BDD1F28            B    81    				ld.lil (ix+28h),de				                           B    82    	
00119A 11 1C 12            B    83    				ld de,period_conv_table-200		00119D 2A 20 11            B    84    				ld hl,(thirdchan_period)	  	0011A0 29                  B    85    				add hl,hl
0011A1 19                  B    86    				add hl,de
0011A2 5E                  B    87    				ld e,(hl)
0011A3 23                  B    88    				inc hl
0011A4 56                  B    89    				ld d,(hl)
0011A5 5BDD1F48            B    90    				ld.lil (ix+48h),de				                           B    91    
0011A9 11 1C 12            B    92    				ld de,period_conv_table-200		0011AC 2A 41 11            B    93    				ld hl,(fourthchan_period)	  	0011AF 29                  B    94    				add hl,hl
0011B0 19                  B    95    				add hl,de
0011B1 5E                  B    96    				ld e,(hl)
0011B2 23                  B    97    				inc hl
0011B3 56                  B    98    				ld d,(hl)
0011B4 5BDD1F68            B    99    				ld.lil (ix+68h),de				                           B   100    
                           B   101    ;----------------------------------------------
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  43


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\Amiga_to_EZ80P_audio_mono.asm
                           B   102    ; Write Volume
                           B   103    ;----------------------------------------------
                           B   104    
                           B   105    
0011B8 3A E0 10            B   106    				ld a,(firstchan_volume)			0011BB 5F                  B   107    				ld e,a
0011BC 5BDD1F0C            B   108    				ld.lil (ix+0ch),de				                           B   109    					
0011C0 3A 01 11            B   110    				ld a,(secondchan_volume)
0011C3 5F                  B   111    				ld e,a
0011C4 5BDD1F2C            B   112    				ld.lil (ix+2ch),de				                           B   113    					
0011C8 3A 22 11            B   114    				ld a,(thirdchan_volume)
0011CB 5F                  B   115    				ld e,a
0011CC 5BDD1F4C            B   116    				ld.lil (ix+4ch),de				                           B   117    			
0011D0 3A 43 11            B   118    				ld a,(fourthchan_volume)
0011D3 5F                  B   119    				ld e,a
0011D4 5BDD1F6C            B   120    				ld.lil (ix+6ch),de				                           B   121    
                           B   122    ;----------------------------------------------
                           B   123    ; Write Loc and Len of triggered channels
                           B   124    ;----------------------------------------------
                           B   125    
0011D8 21 EC 10            B   126    				ld hl,firstchan_control			0011DB CB46                B   127    				bit 0,(hl)						0011DD 28 3A               B   128    				jr z,no_rt_ch0					0011DF CB86                B   129    				res 0,(hl)
0011E1 5B210000 00         B   130    				ld.lil hl,0
0011E6 2A F4 10            B   131    				ld hl,(firstchan_location)
0011E9 4929                B   132    				add.l hl,hl
0011EB 5BDD2F00            B   133    				ld.lil (ix+00h),hl				0011EF 5B210000 00         B   134    				ld.lil hl,0
0011F4 2A F8 10            B   135    				ld hl,(firstchan_loop_loc)
0011F7 4929                B   136    				add.l hl,hl
0011F9 5BDD2F10            B   137    				ld.lil (ix+10h),hl				0011FD 5B210000 00         B   138    				ld.lil hl,0
001202 2A F6 10            B   139    				ld hl,(firstchan_length)
001205 4929                B   140    				add.l hl,hl
001207 5BDD2F04            B   141    				ld.lil (ix+04h),hl				00120B 5B210000 00         B   142    				ld.lil hl,0
001210 2A FA 10            B   143    				ld hl,(firstchan_loop_len)
001213 4929                B   144    				add.l hl,hl
001215 5BDD2F14            B   145    				ld.lil (ix+14h),hl				                           B   146    
                           B   147    
001219                     B   148    no_rt_ch0
001219 21 0D 11            B   149    				ld hl,secondchan_control
00121C CB46                B   150    				bit 0,(hl)
00121E 28 3A               B   151    				jr z,no_rt_ch1
001220 CB86                B   152    				res 0,(hl)
001222 5B210000 00         B   153    				ld.lil hl,0
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  44


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\Amiga_to_EZ80P_audio_mono.asm
001227 2A 15 11            B   154    				ld hl,(secondchan_location)
00122A 4929                B   155    				add.l hl,hl
00122C 5BDD2F20            B   156    				ld.lil (ix+20h),hl				001230 5B210000 00         B   157    				ld.lil hl,0
001235 2A 19 11            B   158    				ld hl,(secondchan_loop_loc)
001238 4929                B   159    				add.l hl,hl
00123A 5BDD2F30            B   160    				ld.lil (ix+30h),hl				00123E 5B210000 00         B   161    				ld.lil hl,0
001243 2A 17 11            B   162    				ld hl,(secondchan_length)
001246 4929                B   163    				add.l hl,hl
001248 5BDD2F24            B   164    				ld.lil (ix+24h),hl				00124C 5B210000 00         B   165    				ld.lil hl,0
001251 2A 1B 11            B   166    				ld hl,(secondchan_loop_len)		001254 4929                B   167    				add.l hl,hl
001256 5BDD2F34            B   168    				ld.lil (ix+34h),hl				                           B   169    
                           B   170    
00125A                     B   171    no_rt_ch1
                           B   172    								
00125A 21 2E 11            B   173    				ld hl,thirdchan_control
00125D CB46                B   174    				bit 0,(hl)
00125F 28 3A               B   175    				jr z,no_rt_ch2
001261 CB86                B   176    				res 0,(hl)
001263 5B210000 00         B   177    				ld.lil hl,0
001268 2A 36 11            B   178    				ld hl,(thirdchan_location)
00126B 4929                B   179    				add.l hl,hl
00126D 5BDD2F40            B   180    				ld.lil (ix+40h),hl		
001271 5B210000 00         B   181    				ld.lil hl,0
001276 2A 3A 11            B   182    				ld hl,(thirdchan_loop_loc)
001279 4929                B   183    				add.l hl,hl
00127B 5BDD2F50            B   184    				ld.lil (ix+50h),hl		
00127F 5B210000 00         B   185    				ld.lil hl,0				
001284 2A 38 11            B   186    				ld hl,(thirdchan_length)
001287 4929                B   187    				add.l hl,hl
001289 5BDD2F44            B   188    				ld.lil (ix+44h),hl	
00128D 5B210000 00         B   189    				ld.lil hl,0
001292 2A 3C 11            B   190    				ld hl,(thirdchan_loop_len)
001295 4929                B   191    				add.l hl,hl
001297 5BDD2F54            B   192    				ld.lil (ix+54h),hl		
                           B   193    
                           B   194    
00129B                     B   195    no_rt_ch2
                           B   196    
00129B 21 4F 11            B   197    				ld hl,fourthchan_control
00129E CB46                B   198    				bit 0,(hl)
0012A0 28 3A               B   199    				jr z,no_rt_ch3
0012A2 CB86                B   200    				res 0,(hl)
0012A4 5B210000 00         B   201    				ld.lil hl,0
0012A9 2A 57 11            B   202    				ld hl,(fourthchan_location)
0012AC 4929                B   203    				add.l hl,hl
0012AE 5BDD2F60            B   204    				ld.lil (ix+60h),hl		
0012B2 5B210000 00         B   205    				ld.lil hl,0
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  45


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\Amiga_to_EZ80P_audio_mono.asm
0012B7 2A 5B 11            B   206    				ld hl,(fourthchan_loop_loc)
0012BA 4929                B   207    				add.l hl,hl
0012BC 5BDD2F70            B   208    				ld.lil (ix+70h),hl	
0012C0 5B210000 00         B   209    				ld.lil hl,0
0012C5 2A 59 11            B   210    				ld hl,(fourthchan_length)
0012C8 4929                B   211    				add.l hl,hl
0012CA 5BDD2F64            B   212    				ld.lil (ix+64h),hl		
0012CE 5B210000 00         B   213    				ld.lil hl,0
0012D3 2A 5D 11            B   214    				ld hl,(fourthchan_loop_len)
0012D6 4929                B   215    				add.l hl,hl
0012D8 5BDD2F74            B   216    				ld.lil (ix+74h),hl		
                           B   217    
0012DC                     B   218    no_rt_ch3
                           B   219    
0012DC 3E00                B   220    				ld a,0h							0012DE 5B320000 F0         B   221    				ld.lil (hw_palette),a			                           B   222    
0012E3 C9                  B   223    				ret
                           B   224    	
                           B   225    ;----------------------------------------------
                           B   226    ; Table for equivalent EZ80P constants to Amiga
                           B   227    ;----------------------------------------------
                           B   228    ;
                           B   229    ; Formula: (1/48828) / ((1/3579545) * period) *
                           B   230    ;
                           B   231    ; Starts at Amiga period 100, one 16-bit consta
                           B   232    
0012E4                     B   233    period_conv_table:
                           B   234    
0012E4 ABBBD0B9 FDB734B6   B   235                    db 0ABh,0BBh,0D0h,0B9h,0FDh,0B7
0012EC 74B4BCB2 0CB164AF 
0012F4 C5AD2DAC 9CAA12A9   B   236                    db 0C5h,0ADh,02Dh,0ACh,09Ch,0AA
0012FC 90A714A6 9FA431A3 
001304 C9A167A0 0B9FB59D   B   237                    db 0C9h,0A1h,067h,0A0h,00Bh,09F
00130C 649C199B D4999498 
001314 59972396 F294C593   B   238                    db 059h,097h,023h,096h,0F2h,094
00131C 9E927B91 5C90428F 
001324 2C8E1B8D 0D8C048B   B   239                    db 02Ch,08Eh,01Bh,08Dh,00Dh,08C
00132C FE89FC88 FE870487 
001334 0D861985 29843D83   B   240                    db 00Dh,086h,019h,085h,029h,084
00133C 53826D81 8A80AA7F 
001344 CE7EF47D 1D7D497C   B   241                    db 0CEh,07Eh,0F4h,07Dh,01Dh,07D
00134C 777BA97A DD791479 
001354 4D788977 C7760876   B   242                    db 04Dh,078h,089h,077h,0C7h,076
00135C 4B759074 D8732273 
001364 6F72BD71 0E716070   B   243                    db 06Fh,072h,0BDh,071h,00Eh,071
00136C B56F0C6F 656EBF6D 
001374 1C6D7B6C DB6B3D6B   B   244                    db 01Ch,06Dh,07Bh,06Ch,0DBh,06B
00137C A16A076A 6E69D868 
001384 4368AF67 1D678D66   B   245                    db 043h,068h,0AFh,067h,01Dh,067
00138C FE657165 E6645B64 
001394 D3634C63 C6624162   B   246                    db 0D3h,063h,04Ch,063h,0C6h,062
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  46


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\Amiga_to_EZ80P_audio_mono.asm
00139C BE613D61 BC603D60 
0013A4 C05F435F C85E4E5E   B   247                    db 0C0h,05Fh,043h,05Fh,0C8h,05E
0013AC D55D5E5D E85C725C 
0013B4 FE5B8C5B 1A5BA95A   B   248                    db 0FEh,05Bh,08Ch,05Bh,01Ah,05B
0013BC 3A5ACB59 5E59F158 
0013C4 86581B58 B2574A57   B   249                    db 086h,058h,01Bh,058h,0B2h,057
0013CC E2567C56 1656B155 
0013D4 4E55EB54 89542854   B   250                    db 04Eh,055h,0EBh,054h,089h,054
0013DC C8536853 0A53AC52 
0013E4 4F52F351 98513E51   B   251                    db 04Fh,052h,0F3h,051h,098h,051
0013EC E4508B50 3350DC4F 
0013F4 854F2F4F DA4E864E   B   252                    db 085h,04Fh,02Fh,04Fh,0DAh,04E
0013FC 324EDF4D 8C4D3B4D 
001404 EA4C994C 4A4CFA4B   B   253                    db 0EAh,04Ch,099h,04Ch,04Ah,04C
00140C AC4B5E4B 114BC54A 
001414 794A2D4A E2499849   B   254                    db 079h,04Ah,02Dh,04Ah,0E2h,049
00141C 4F490649 BD487548 
001424 2E48E747 A1475B47   B   255                    db 02Eh,048h,0E7h,047h,0A1h,047
00142C 1647D146 8D464946 
001434 0646C445 82454045   B   256                    db 006h,046h,0C4h,045h,082h,045
00143C FF44BE44 7E443E44 
001444 FF43C043 82434443   B   257                    db 0FFh,043h,0C0h,043h,082h,043
00144C 0643C942 8C425042 
001454 1442D941 9E416441   B   258                    db 014h,042h,0D9h,041h,09Eh,041
00145C 2941F040 B6407D40 
001464 45400D40 D53F9E3F   B   259                    db 045h,040h,00Dh,040h,0D5h,03F
00146C 673F303F FA3EC43E 
001474 8E3E593E 243EF03D   B   260                    db 08Eh,03Eh,059h,03Eh,024h,03E
00147C BB3D883D 543D213D 
001484 EE3CBC3C 8A3C583C   B   261                    db 0EEh,03Ch,0BCh,03Ch,08Ah,03C
00148C 263CF53B C43B943B 
001494 633B333B 043BD43A   B   262                    db 063h,03Bh,033h,03Bh,004h,03B
00149C A53A763A 483A1A3A 
0014A4 EC39BE39 91396439   B   263                    db 0ECh,039h,0BEh,039h,091h,039
0014AC 37390B39 DE38B238 
0014B4 87385B38 30380538   B   264                    db 087h,038h,05Bh,038h,030h,038
0014BC DA37B037 86375C37 
0014C4 32370937 DF36B636   B   265                    db 032h,037h,009h,037h,0DFh,036
0014CC 8E366536 3D361536 
0014D4 ED35C635 9E357735   B   266                    db 0EDh,035h,0C6h,035h,09Eh,035
0014DC 50352A35 0335DD34 
0014E4 B7349134 6C344634   B   267                    db 0B7h,034h,091h,034h,06Ch,034
0014EC 2134FC33 D733B333 
0014F4 8E336A33 46332233   B   268                    db 08Eh,033h,06Ah,033h,046h,033
0014FC FF32DC32 B8329532 
001504 73325032 2D320B32   B   269                    db 073h,032h,050h,032h,02Dh,032
00150C E931C731 A6318431 
001514 63314131 20310031   B   270                    db 063h,031h,041h,031h,020h,031
00151C DF30BE30 9E307E30 
001524 5E303E30 1E30FF2F   B   271                    db 05Eh,030h,03Eh,030h,01Eh,030
00152C E02FC02F A12F832F 
001534 642F452F 272F092F   B   272                    db 064h,02Fh,045h,02Fh,027h,02F
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  47


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\Amiga_to_EZ80P_audio_mono.asm
00153C EA2ECD2E AF2E912E 
001544 742E562E 392E1C2E   B   273                    db 074h,02Eh,056h,02Eh,039h,02E
00154C FF2DE22D C62DA92D 
001554 8D2D702D 542D382D   B   274                    db 08Dh,02Dh,070h,02Dh,054h,02D
00155C 1D2D012D E52CCA2C 
001564 AF2C932C 782C5D2C   B   275                    db 0AFh,02Ch,093h,02Ch,078h,02C
00156C 432C282C 0D2CF32B 
001574 D92BBF2B A52B8B2B   B   276                    db 0D9h,02Bh,0BFh,02Bh,0A5h,02B
00157C 712B572B 3E2B242B 
001584 0B2BF22A D82ABF2A   B   277                    db 00Bh,02Bh,0F2h,02Ah,0D8h,02A
00158C A72A8E2A 752A5D2A 
001594 442A2C2A 142AFC29   B   278                    db 044h,02Ah,02Ch,02Ah,014h,02A
00159C E429CC29 B4299C29 
0015A4 85296D29 56293F29   B   279                    db 085h,029h,06Dh,029h,056h,029
0015AC 27291029 F928E328 
0015B4 CC28B528 9F288828   B   280                    db 0CCh,028h,0B5h,028h,09Fh,028
0015BC 72285C28 45282F28 
0015C4 19280328 EE27D827   B   281                    db 019h,028h,003h,028h,0EEh,027
0015CC C227AD27 97278227 
0015D4 6D275827 43272E27   B   282                    db 06Dh,027h,058h,027h,043h,027
0015DC 19270427 EF26DA26 
0015E4 C626B126 9D268926   B   283                    db 0C6h,026h,0B1h,026h,09Dh,026
0015EC 75266026 4C263826 
0015F4 25261126 FD25E925   B   284                    db 025h,026h,011h,026h,0FDh,025
0015FC D625C225 AF259C25 
001604 88257525 62254F25   B   285                    db 088h,025h,075h,025h,062h,025
00160C 3C252925 16250425 
001614 F124DE24 CC24B924   B   286                    db 0F1h,024h,0DEh,024h,0CCh,024
00161C A7249524 83247024 
001624 5E244C24 3A242924   B   287                    db 05Eh,024h,04Ch,024h,03Ah,024
00162C 17240524 F323E223 
001634 D023BF23 AD239C23   B   288                    db 0D0h,023h,0BFh,023h,0ADh,023
00163C 8B237A23 68235723 
001644 46233523 24231423   B   289                    db 046h,023h,035h,023h,024h,023
00164C 0323F222 E222D122 
001654 C122B022 A0228F22   B   290                    db 0C1h,022h,0B0h,022h,0A0h,022
00165C 7F226F22 5F224F22 
001664 3F222F22 1F220F22   B   291                    db 03Fh,022h,02Fh,022h,01Fh,022
00166C FF21EF21 E021D021 
001674 C121B121 A2219221   B   292                    db 0C1h,021h,0B1h,021h,0A2h,021
00167C 83217321 64215521 
001684 46213721 28211921   B   293                    db 046h,021h,037h,021h,028h,021
00168C 0A21FB20 EC20DE20 
001694 CF20C020 B220A320   B   294                    db 0CFh,020h,0C0h,020h,0B2h,020
00169C 94208620 78206920 
0016A4 5B204D20 3E203020   B   295                    db 05Bh,020h,04Dh,020h,03Eh,020
0016AC 22201420 0620F81F 
0016B4 EA1FDC1F CF1FC11F   B   296                    db 0EAh,01Fh,0DCh,01Fh,0CFh,01F
0016BC B31FA51F 981F8A1F 
0016C4 7D1F6F1F 621F541F   B   297                    db 07Dh,01Fh,06Fh,01Fh,062h,01F
0016CC 471F3A1F 2C1F1F1F 
0016D4 121F051F F81EEA1E   B   298                    db 012h,01Fh,005h,01Fh,0F8h,01E
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  48


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\Amiga_to_EZ80P_audio_mono.asm
0016DC DD1ED01E C41EB71E 
0016E4 AA1E9D1E 901E841E   B   299                    db 0AAh,01Eh,09Dh,01Eh,090h,01E
0016EC 771E6A1E 5E1E511E 
0016F4 451E381E 2C1E1F1E   B   300                    db 045h,01Eh,038h,01Eh,02Ch,01E
0016FC 131E071E FA1DEE1D 
001704 E21DD61D CA1DBD1D   B   301                    db 0E2h,01Dh,0D6h,01Dh,0CAh,01D
00170C B11DA51D 991D8D1D 
001714 821D761D 6A1D5E1D   B   302                    db 082h,01Dh,076h,01Dh,06Ah,01D
00171C 521D471D 3B1D2F1D 
001724 241D181D 0D1D011D   B   303                    db 024h,01Dh,018h,01Dh,00Dh,01D
00172C F61CEA1C DF1CD41C 
001734 C81CBD1C B21CA61C   B   304                    db 0C8h,01Ch,0BDh,01Ch,0B2h,01C
00173C 9B1C901C 851C7A1C 
001744 6F1C641C 591C4E1C   B   305                    db 06Fh,01Ch,064h,01Ch,059h,01C
00174C 431C381C 2D1C221C 
001754 181C0D1C 021CF81B   B   306                    db 018h,01Ch,00Dh,01Ch,002h,01C
00175C ED1BE21B D81BCD1B 
001764 C31BB81B AE1BA31B   B   307                    db 0C3h,01Bh,0B8h,01Bh,0AEh,01B
00176C 991B8E1B 841B7A1B 
001774 6F1B651B 5B1B511B   B   308                    db 06Fh,01Bh,065h,01Bh,05Bh,01B
00177C 471B3C1B 321B281B 
001784 1E1B141B 0A1B001B   B   309                    db 01Eh,01Bh,014h,01Bh,00Ah,01B
00178C F61AEC1A E31AD91A 
001794 CF1AC51A BB1AB21A   B   310                    db 0CFh,01Ah,0C5h,01Ah,0BBh,01A
00179C A81A9E1A 951A8B1A 
0017A4 811A781A 6E1A651A   B   311                    db 081h,01Ah,078h,01Ah,06Eh,01A
0017AC 5B1A521A 481A3F1A 
0017B4 361A2C1A 231A1A1A   B   312                    db 036h,01Ah,02Ch,01Ah,023h,01A
0017BC 101A071A FE19F519 
0017C4 EB19E219 D919D019   B   313                    db 0EBh,019h,0E2h,019h,0D9h,019
0017CC C719BE19 B519AC19 
0017D4 A3199A19 91198819   B   314                    db 0A3h,019h,09Ah,019h,091h,019
0017DC 7F197619 6E196519 
0017E4 5C195319 4A194219   B   315                    db 05Ch,019h,053h,019h,04Ah,019
0017EC 39193019 28191F19 
0017F4 16190E19 0519FD18   B   316                    db 016h,019h,00Eh,019h,005h,019
0017FC F418EC18 E318DB18 
001804 D318CA18 C218B918   B   317                    db 0D3h,018h,0CAh,018h,0C2h,018
00180C B118A918 A0189818 
001814 90188818 80187718   B   318                    db 090h,018h,088h,018h,080h,018
00181C 6F186718 5F185718 
001824 4F184718 3F183718   B   319                    db 04Fh,018h,047h,018h,03Fh,018
00182C 2F182718 1F181718 
001834 0F180718 FF17F717   B   320                    db 00Fh,018h,007h,018h,0FFh,017
00183C F017E817 E017D817 
001844 D017C917 C117B917   B   321                    db 0D0h,017h,0C9h,017h,0C1h,017
00184C B217AA17 A2179B17 
001854 93178C17 84177D17   B   322                    db 093h,017h,08Ch,017h,084h,017
00185C 75176D17 66175F17 
001864 57175017 48174117   B   323                    db 057h,017h,050h,017h,048h,017
00186C 3A173217 2B172417 
001874 1C171517 0E170617   B   324                    db 01Ch,017h,015h,017h,00Eh,017
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  49


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~3\src\Amiga_to_EZ80P_audio_mono.asm
00187C FF16F816 F116EA16 
001884 E316DB16 D416CD16   B   325                    db 0E3h,016h,0DBh,016h,0D4h,016
00188C C616BF16 B816B116 
001894 AA16A316 9C169516   B   326                    db 0AAh,016h,0A3h,016h,09Ch,016
00189C 8E168716 80167916 
0018A4 72166C16 65165E16   B   327                    db 072h,016h,06Ch,016h,065h,016
0018AC 57165016 49164316 
0018B4 3C163516 2E162816   B   328                    db 03Ch,016h,035h,016h,02Eh,016
0018BC 21161A16 14160D16 
0018C4 06160016 F915F315   B   329                    db 006h,016h,000h,016h,0F9h,015
0018CC EC15E615 DF15D915 
0018D4 D215CC15 C515BF15   B   330                    db 0D2h,015h,0CCh,015h,0C5h,015
0018DC B815B215 AB15A515 
0018E4 9F159815 92158B15   B   331                    db 09Fh,015h,098h,015h,092h,015
0018EC 85157F15 79157215 
0018F4 6C156615 5F155915   B   332                    db 06Ch,015h,066h,015h,05Fh,015
0018FC 53154D15 47154015 
001904 3A153415 2E152815   B   333                    db 03Ah,015h,034h,015h,02Eh,015
00190C 22151C15 16151015 
001914 0A150415 FE14F814   B   334                    db 00Ah,015h,004h,015h,0FEh,014
00191C F214EC14 E614E014 
001924 DA14D414 CE14C814   B   335                    db 0DAh,014h,0D4h,014h,0CEh,014
00192C C214BC14 B614B114 
001934 AB14A514 9F149914   B   336                    db 0ABh,014h,0A5h,014h,09Fh,014
00193C 93148E14 88148214 
001944 7C147714 71146B14   B   337                    db 07Ch,014h,077h,014h,071h,014
00194C 66146014 5A145514 
001954 4F144914 44143E14   B   338                    db 04Fh,014h,049h,014h,044h,014
00195C 39143314 2E142814 
001964 22141D14 17141214   B   339                    db 022h,014h,01Dh,014h,017h,014
00196C 0C140714 0114FC13 
001974 F713F113 EC13E613   B   340                    db 0F7h,013h,0F1h,013h,0ECh,013
00197C E113DC13 D613D113 
001984 CB13C613 C113       B   341                    db 0CBh,013h,0C6h,013h,0C1h,013
                           B   342    				
                           B   343    				
                           B   344    ;----------------------------------------------
                           B   345    ; EZ80P specific code ends
                           B   346    ;----------------------------------------------
                           B   347    
                           A    91    
                           A    92    ;----------------------------------------------
                           A    93    
       00006000            A    94    music_module equ 06000h
                           A    95    
                           A    96    ;----------------------------------------------
                           A    97    
                           A    98    		
Zilog eZ80 Macro Assembler Version 4.1 (10060805)02-Feb-11     22:10:40     page:  50


PC     Object              I  Line    Source 


Errors: 0
Warnings: 0
Lines Assembled: 2258
