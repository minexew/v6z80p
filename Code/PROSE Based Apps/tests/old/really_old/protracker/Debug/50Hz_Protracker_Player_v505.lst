Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   1


PC     Object              I  Line    Source 
                           A     1    ;----------------------------------------------
                           A     2    ; Z80 Protracker Music Player - V5.05
                           A     3    ; By Phil Ruston 2011
                           A     4    ; http://www.retroleum.co.uk
                           A     5    ;
                           A     6    ; SYNTAX CONVERTED TO ZDSII STANDARD (Z80 mode,
                           A     7    ; NOT OPTIMIZED AT ALL 
                           A     8    ;----------------------------------------------
                           A     9    ;
                           A    10    ;
                           A    11    ; Z80 Code to play standard 31 instrument Protr
                           A    12    ;
                           A    13    ; The code has been designed so that is hardwar
                           A    14    ; does not write to any hardware registers. It 
                           A    15    ; Amiga hardware registers but still uses the A
                           A    16    ; to them. Therefore it is up to a seperate "up
                           A    17    ; variables and adapt/convert the values therei
                           A    18    ; output the sound. (A routine to do this for m
                           A    19    ;
                           A    20    ;
                           A    21    ; Equates (must be defined in external code)
                           A    22    ; -------
                           A    23    ;
                           A    24    ; "music_module" = location of protracker modul
                           A    25    ; at a word address boundary.
                           A    26    ;
                           A    27    ;
                           A    28    ; Routines:
                           A    29    ; ---------
                           A    30    ;
                           A    31    ; call "init_tracker" to initialize/reset tune
                           A    32    ; call "play_tracker" every frame to update the
                           A    33    ;
                           A    34    ; (Obviously you need a routine to read the Ami
                           A    35    ; that this code updates,  convert the values a
                           A    36    ;
                           A    37    ;
                           A    38    ; Variables:
                           A    39    ; ----------
                           A    40    ;
                           A    41    ; "force_sample_base" (WORD) - write the WORD l
                           A    42    ; (ie: not Z80 address space) here  prior to in
                           A    43    ; been seperated from the module (eg: written t
                           A    44    ; ignore it (or write $FFFF).
                           A    45    ;
                           A    46    ; "filter_on_off" (BYTE) reads ONE if player ha
                           A    47    ; zero if not. (Whether or not this is of any u
                           A    48    ;
                           A    49    ; Replacing the Amiga hardware registers is a b
                           A    50    ; These begin at "channel_data". There are 33 b
                           A    51    ; within each block are:
                           A    52    ;
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   2


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
                           A    53    ; samp_loc_lo (WORD address **)	
                           A    54    ; samp_loc_hi (WORD address **)	
                           A    55    ; samp_len_lo 	
                           A    56    ; samp_len_hi 	
                           A    57    ; samp_loop_offset_lo (IN WORDS **)
                           A    58    ; samp_loop_offset_hi (IN WORDS **)	
                           A    59    ; samp_loop_len_lo	
                           A    60    ; samp_loop_len_hi	
                           A    61    ; samp_offset_lo	
                           A    62    ; samp_offset_hi	
                           A    63    ; period_lo
                           A    64    ; period_hi
                           A    65    ; volume
                           A    66    ; control_bits
                           A    67    ;
                           A    68    ; Variable names should be self-explanitory.
                           A    69    ; "control_bits" replaces the Amiga's DMA sound
                           A    70    ; When bit 0 of each channel's control_bits var
                           A    71    ; hardware conversion routine knows to trigger 
                           A    72    ; loopstart/looplength). The conversion routine
                           A    73    ; after triggering a sample.
                           A    74    ;
                           A    75    ; ** These are WORD locations, the Amiga hardwa
                           A    76    ; samples to begin on odd-byte addresses. There
                           A    77    ; to address word locations allows a sample add
                           A    78    ; of 64KB. This is relevent - despite the Z80's
                           A    79    ; hardware may have its own sample RAM . Simply
                           A    80    ; byte addresses.
                           A    81    ;
                           A    82    ; Limitations:
                           A    83    ; ------------
                           A    84    ; The Z80's 64KB address space limits the size 
                           A    85    ; played. However, as mentioned, the samples ca
                           A    86    ; and loaded into seperate dedicated Audio RAM 
                           A    87    ;
                           A    88    ; Revisions:
                           A    89    ; ----------
                           A    90    ;
                           A    91    ; V5.05 - If a pattern note entry is blank, cle
                           A    92    ;
                           A    93    ; V5.04 - Fixed note triggering -  a bug in the
                           A    94    ;         was masking the incorrect retrigging 
                           A    95    ;         period is specified)
                           A    96    ; 
                           A    97    ; Known issues:
                           A    98    ; -------------
                           A    99    ; $EF - invert loop is not implemented (rarely 
                           A   100    ;
                           A   101    ;
                           A   102    ;==============================================
                           A   103    ; Start of hardware-agnostic specific Z80 Protr
                           A   104    ;==============================================
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   3


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
                           A   105    
                           A   106    .assume ADL = 0
                           A   107    
000000                     A   108    init_tracker
                           A   109    
000000 3E06                A   110    				ld a,6						; d
000002 32 46 10            A   111    				ld (songspeed),a
000005 AF                  A   112    				xor a						; c
000006 32 43 10            A   113    				ld (ticker),a
000009 32 44 10            A   114    				ld (songpos),a
00000C 32 45 10            A   115    				ld (patindex),a
00000F 32 47 10            A   116    				ld (arpeggio_counter),a
000012 32 48 10            A   117    				ld (pattloop_pos),a
000015 32 49 10            A   118    				ld (pattloop_count),a
000018 32 4A 10            A   119    				ld (pattdelay_count),a	
00001B 32 4B 10            A   120    				ld (pattdelay_flag),a	
00001E 32 00 00            A   121    				ld (player_frame_counter),a
-----ERROR (405) Label "player_frame_counter" not defined
000021 21 4D 10            A   122    				ld hl,channel_data
000024 06 84               A   123    				ld b,vars_per_channel*4
000026 77                  A   124    clchdlp			ld (hl),a
000027 23                  A   125    				inc hl
000028 10 FC               A   126    				djnz clchdlp
                           A   127    
00002A 21 B8 03            A   128    				ld hl,music_module+952		; f
-----ERROR (405) Label "music_module" not defined
00002D 0680                A   129    				ld b,128					; t
00002F 0E00                A   130    				ld c,0
000031 7E                  A   131    ptfhplp			ld a,(hl)	
000032 B9                  A   132    				cp c
000033 38 01               A   133    				jr c,patlower
000035 4F                  A   134    				ld c,a
000036 23                  A   135    patlower		inc hl
000037 10 F8               A   136    				djnz ptfhplp
000039 0C                  A   137    				inc c
00003A CB21                A   138    				sla c
00003C CB21                A   139    				sla c
00003E 61                  A   140    				ld h,c
00003F 2E00                A   141    				ld l,0
000041 01 3C 04            A   142    				ld bc,music_module+1084			000044 09                  A   143    				add hl,bc						000045 CB3C                A   144    				srl h							000047 CB1D                A   145    				rr l							000049 22 01 10            A   146    				ld (sample_base),hl
                           A   147    
00004C ED5B 03 10          A   148    				ld de,(force_sample_base)		000050 13                  A   149    				inc de							000051 7A                  A   150    				ld a,d							000052 B3                  A   151    				or e
000053 28 03               A   152    				jr z,usenormsb
000055 2A 03 10            A   153    				ld hl,(force_sample_base)	
                           A   154    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   4


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000058 DD21 05 10          A   155    usenormsb		ld ix,sample_location_list		00005C FD21 2A 00          A   156    				ld iy,music_module+42
000060 061F                A   157    				ld b,31
000062 DD7500              A   158    bsstlp			ld (ix),l						000065 DD7401              A   159    				ld (ix+1),h						000068 DD23                A   160    				inc ix
00006A DD23                A   161    				inc ix
00006C FD7E01              A   162    				ld a,(iy+1)						00006F 85                  A   163    				add a,l							000070 6F                  A   164    				ld l,a
000071 FD7E00              A   165    				ld a,(iy)						000074 8C                  A   166    				adc a,h							000075 67                  A   167    				ld h,a	
000076 111E00              A   168    				ld de,30			
000079 FD19                A   169    				add iy,de						00007B 10 E5               A   170    				djnz bsstlp
00007D C9                  A   171    				ret
                           A   172    
                           A   173    ;----------------------------------------------
                           A   174    
00007E                     A   175    play_tracker
                           A   176    
00007E 3A 43 10            A   177    				ld a,(ticker)
000081 B7                  A   178    				or a			
000082 C2 29 02            A   179    				jp nz,not_new_line
                           A   180    
000085 3A 44 10            A   181    				ld a,(songpos)					000088 0600                A   182    				ld b,0
00008A 4F                  A   183    				ld c,a
00008B 21 B8 03            A   184    				ld hl,music_module+952			00008E 09                  A   185    				add hl,bc						00008F 46                  A   186    				ld b,(hl)			
000090 0E00                A   187    				ld c,0
000092 CB20                A   188    				sla b
000094 CB20                A   189    				sla b							                           A   190    				
000096 3A 45 10            A   191    				ld a,(patindex)					000099 61                  A   192    				ld h,c							00009A 6F                  A   193    				ld l,a
00009B 29                  A   194    				add hl,hl
00009C 29                  A   195    				add hl,hl
00009D 29                  A   196    				add hl,hl
00009E 29                  A   197    				add hl,hl						00009F 09                  A   198    				add hl,bc						0000A0 EB                  A   199    				ex de,hl
                           A   200    				
0000A1 FD21 4D 10          A   201    				ld iy,channel_data	
0000A5 DD21 3C 04          A   202    				ld ix,music_module+1084			0000A9 DD19                A   203    				add ix,de						0000AB 0604                A   204    				ld b,4							0000AD C5                  A   205    chan_loop		push bc
0000AE DD7E00              A   206    				ld a,(ix)						Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   5


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0000B1 DDB601              A   207    				or (ix+1)
0000B4 DDB602              A   208    				or (ix+2)
0000B7 DDB603              A   209    				or (ix+3)
0000BA 20 06               A   210    				jr nz,parse_dat
0000BC FD36 04 FF          A   211    				ld (iy+fx_number),0ffh			0000C0 18 03               A   212    				jr skipchan	
0000C2 CD D5 00            A   213    parse_dat		call new_note_data	
0000C5 01 21 00            A   214    skipchan		ld bc,vars_per_channel		
0000C8 FD09                A   215    				add iy,bc						0000CA 010400              A   216    				ld bc,4
0000CD DD09                A   217    				add ix,bc						0000CF C1                  A   218    				pop bc
0000D0 10 DB               A   219    				djnz chan_loop
0000D2 C3 3B 02            A   220    				jp tick_advance
                           A   221    
                           A   222    
                           A   223    ;----- New note routines ----------------------
                           A   224    
0000D5                     A   225    new_note_data
                           A   226    				
0000D5 FD36 12 00          A   227    				ld (iy+instrument_waiting),0
0000D9 DD7E00              A   228    				ld a,(ix)						0000DC E6F0                A   229    				and 0f0h
0000DE DD4602              A   230    				ld b,(ix+2)
0000E1 CB38                A   231    				srl b
0000E3 CB38                A   232    				srl b
0000E5 CB38                A   233    				srl b
0000E7 CB38                A   234    				srl b
0000E9 B0                  A   235    				or b			
0000EA 28 54               A   236    				jr z,no_new_instrument			                           A   237    
0000EC FD77 12             A   238    				ld (iy+instrument_waiting),a
0000EF 3D                  A   239    				dec a
0000F0 CB27                A   240    				sla a
0000F2 4F                  A   241    				ld c,a
0000F3 0600                A   242    				ld b,0
0000F5 21 05 10            A   243    				ld hl,sample_location_list		0000F8 09                  A   244    				add hl,bc
0000F9 7E                  A   245    				ld a,(hl)
0000FA FD77 17             A   246    				ld (iy+samp_loc_lo),a			0000FD 23                  A   247    				inc hl
0000FE 7E                  A   248    				ld a,(hl)
0000FF FD77 18             A   249    				ld (iy+samp_loc_hi),a			                           A   250    				
000102 21 C1 0F            A   251    				ld hl,multiply_30_table			000105 09                  A   252    				add hl,bc
000106 7E                  A   253    				ld a,(hl)
000107 23                  A   254    				inc hl
000108 66                  A   255    				ld h,(hl)
000109 6F                  A   256    				ld l,a
00010A 01 2A 00            A   257    				ld bc,music_module+42	
00010D 09                  A   258    				add hl,bc						Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   6


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
00010E 7E                  A   259    				ld a,(hl)
00010F FD77 1A             A   260    				ld (iy+samp_len_hi),a			000112 23                  A   261    				inc hl
000113 7E                  A   262    				ld a,(hl)
000114 FD77 19             A   263    				ld (iy+samp_len_lo),a			000117 23                  A   264    				inc hl	
000118 7E                  A   265    				ld a,(hl)			
000119 E60F                A   266    				and 0fh
00011B FD77 14             A   267    				ld (iy+finetune),a				00011E 23                  A   268    				inc hl
00011F 7E                  A   269    				ld a,(hl)
000120 FD77 13             A   270    				ld (iy+volume_waiting),a		000123 23                  A   271    				inc hl
000124 46                  A   272    				ld b,(hl)						000125 23                  A   273    				inc hl
000126 4E                  A   274    				ld c,(hl)						000127 E5                  A   275    				push hl
000128 FD66 18             A   276    				ld h,(iy+samp_loc_hi)
00012B FD6E 17             A   277    				ld l,(iy+samp_loc_lo)
00012E 09                  A   278    				add hl,bc
00012F FD74 1C             A   279    				ld (iy+samp_loop_loc_hi),h		000132 FD75 1B             A   280    				ld (iy+samp_loop_loc_lo),l		000135 E1                  A   281    				pop hl	
000136 23                  A   282    				inc hl
000137 7E                  A   283    				ld a,(hl)
000138 FD77 1E             A   284    				ld (iy+samp_loop_len_hi),a		00013B 23                  A   285    				inc hl
00013C 7E                  A   286    				ld a,(hl)
00013D FD77 1D             A   287    				ld (iy+samp_loop_len_lo),a		                           A   288    				
                           A   289    				
                           A   290    				
000140                     A   291    no_new_instrument	
                           A   292    
000140 DD7E00              A   293    				ld a,(ix)						000143 E60F                A   294    				and 0fh
000145 47                  A   295    				ld b,a
000146 DD4E01              A   296    				ld c,(ix+1)						                           A   297    					
000149 DD7E03              A   298    				ld a,(ix+3)						00014C FD77 05             A   299    				ld (iy+fx_args),a				00014F DD7E02              A   300    				ld a,(ix+2)						000152 E60F                A   301    				and 0fh							000154 FD77 04             A   302    				ld (iy+fx_number),a
                           A   303    
000157 FE03                A   304    				cp 3							000159 CA DF 01            A   305    				jp z,set_portadest				00015C FE05                A   306    				cp 5 			
00015E 28 7F               A   307    				jr z,set_portadest
                           A   308    
000160 FE0E                A   309    				cp 0eh							000162 20 11               A   310    				jr nz,no_ftoveride
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   7


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000164 FD7E 05             A   311    				ld a,(iy+fx_args)
000167 E6F0                A   312    				and 0f0h
000169 FE50                A   313    				cp 050h
00016B 20 08               A   314    				jr nz,no_ftoveride
00016D FD7E 05             A   315    				ld a,(iy+fx_args)
000170 E60F                A   316    				and 0fh
000172 FD77 14             A   317    				ld (iy+finetune),a				                           A   318    
000175                     A   319    no_ftoveride
                           A   320    
000175 FDCB 0F 9E          A   321    				res 3,(iy+control_bits)			000179 78                  A   322    				ld a,b							00017A B1                  A   323    				or c							00017B 28 15               A   324    				jr z,nonewp1
                           A   325    
00017D FDCB 0F DE          A   326    				set 3,(iy+control_bits)			000181 C5                  A   327    				push bc
000182 FD71 15             A   328    				ld (iy+arp_base_period_lo),c	000185 FD70 16             A   329    				ld (iy+arp_base_period_hi),b	000188 CD 07 02            A   330    				call finetune_bc_period
00018B FD71 06             A   331    				ld (iy+period_for_fx_lo),c		00018E FD70 07             A   332    				ld (iy+period_for_fx_hi),b
000191 C1                  A   333    				pop bc
                           A   334    				
000192 FD7E 04             A   335    nonewp1			ld a,(iy+fx_number)
000195 FE0E                A   336    				cp 0eh							000197 20 0A               A   337    				jr nz,not_ed		 
000199 FD7E 05             A   338    				ld a,(iy+fx_args)
00019C E6F0                A   339    				and 0f0h
00019E FED0                A   340    				cp 0d0h
0001A0 CA B6 02            A   341    				jp z,check_more_fx
                           A   342    				
0001A3 78                  A   343    not_ed			ld a,b							0001A4 B1                  A   344    				or c			
0001A5 28 19               A   345    				jr z,nonewp2
0001A7 FD4E 06             A   346    				ld c,(iy+period_for_fx_lo)		0001AA FD46 07             A   347    				ld b,(iy+period_for_fx_hi)
0001AD FD71 01             A   348    				ld (iy+period_lo),c
0001B0 FD70 02             A   349    				ld (iy+period_hi),b
0001B3 FDCB 0F C6          A   350    				set 0,(iy+control_bits)			0001B7 FD7E 12             A   351    				ld a,(iy+instrument_waiting)	0001BA B7                  A   352    				or a
0001BB CA B6 02            A   353    				jp z,check_more_fx
0001BE 18 10               A   354    				jr do_vol						                           A   355    				
0001C0 FD7E 12             A   356    nonewp2			ld a,(iy+instrument_waiting)	0001C3 B7                  A   357    				or a							0001C4 CA B6 02            A   358    				jp z,check_more_fx
0001C7 FDBE 00             A   359    				cp (iy+instrument)			
0001CA 28 04               A   360    				jr z,do_vol
0001CC FDCB 0F C6          A   361    				set 0,(iy+control_bits)
                           A   362    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   8


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0001D0 FD77 00             A   363    do_vol			ld (iy+instrument),a
0001D3 FD7E 13             A   364    				ld a,(iy+volume_waiting)		0001D6 FD77 03             A   365    				ld (iy+volume),a	
0001D9 FD77 08             A   366    				ld (iy+volume_for_fx),a			0001DC C3 B6 02            A   367    				jp check_more_fx
                           A   368    				
                           A   369    
0001DF                     A   370    set_portadest
                           A   371    
0001DF 78                  A   372    				ld a,b							0001E0 B1                  A   373    				or c			
0001E1 28 09               A   374    				jr z,spd_same			
0001E3 CD 07 02            A   375    				call finetune_bc_period
0001E6 FD71 10             A   376    				ld (iy+portamento_dest_lo),c	0001E9 FD70 11             A   377    				ld (iy+portamento_dest_hi),b
                           A   378    				
0001EC FD7E 12             A   379    spd_same		ld a,(iy+instrument_waiting)	0001EF B7                  A   380    				or a			
0001F0 C8                  A   381    				ret z
0001F1 FDBE 00             A   382    				cp (iy+instrument)				0001F4 28 07               A   383    				jr z,skiptrig
0001F6 FDCB 0F C6          A   384    				set 0,(iy+control_bits)			0001FA FD77 00             A   385    				ld (iy+instrument),a
0001FD FD7E 13             A   386    skiptrig		ld a,(iy+volume_waiting)
000200 FD77 03             A   387    				ld (iy+volume),a	
000203 FD77 08             A   388    				ld (iy+volume_for_fx),a	
000206 C9                  A   389    				ret
                           A   390    				
                           A   391    
                           A   392    
000207                     A   393    finetune_bc_period
                           A   394    
000207 FD7E 14             A   395    				ld a,(iy+finetune)				00020A B7                  A   396    				or a
00020B C8                  A   397    				ret z
00020C CB27                A   398    				sla a
00020E 21 01 0B            A   399    				ld hl,tuning_table_list	
000211 5F                  A   400    				ld e,a			
000212 1600                A   401    				ld d,0
000214 19                  A   402    				add hl,de
000215 5E                  A   403    				ld e,(hl)
000216 23                  A   404    				inc hl	
000217 56                  A   405    				ld d,(hl)						000218 21 A0 07            A   406    				ld hl,period_lookup_table-113
00021B 09                  A   407    				add hl,bc
00021C 7E                  A   408    				ld a,(hl)						00021D CB27                A   409    				sla a
00021F 83                  A   410    				add a,e
000220 30 01               A   411    				jr nc,ttmok
000222 14                  A   412    				inc d
000223 5F                  A   413    ttmok			ld e,a			
000224 EB                  A   414    				ex de,hl						Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:   9


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000225 4E                  A   415    				ld c,(hl)
000226 23                  A   416    				inc hl
000227 46                  A   417    				ld b,(hl)						000228 C9                  A   418    				ret
                           A   419    				
                           A   420    				
                           A   421    ;-------- "FX during line" routines -----------
                           A   422    
                           A   423    
000229                     A   424    not_new_line
                           A   425    
000229 FD21 4D 10          A   426    				ld iy,channel_data				00022D 0604                A   427    				ld b,4							00022F C5                  A   428    chanfxlp		push bc							000230 CD 81 02            A   429    				call check_fx		
000233 01 21 00            A   430    				ld bc,vars_per_channel
000236 FD09                A   431    				add iy,bc
000238 C1                  A   432    				pop bc
000239 10 F4               A   433    				djnz chanfxlp
                           A   434    				
00023B                     A   435    tick_advance
                           A   436    
00023B 21 47 10            A   437    				ld hl,arpeggio_counter			00023E 34                  A   438    				inc (hl)
00023F 7E                  A   439    				ld a,(hl)
000240 FE03                A   440    				cp 3
000242 20 02               A   441    				jr nz,arp_ok
000244 3600                A   442    				ld (hl),0
000246 21 43 10            A   443    arp_ok			ld hl,ticker					000249 34                  A   444    				inc (hl)
00024A 3A 46 10            A   445    				ld a,(songspeed)	
00024D BE                  A   446    				cp (hl)							00024E 20 30               A   447    				jr nz,nspwrap
000250 AF                  A   448    				xor a
000251 77                  A   449    				ld (hl),a						000252 32 47 10            A   450    				ld (arpeggio_counter),a			000255 21 4A 10            A   451    				ld hl,pattdelay_count			000258 B6                  A   452    				or (hl)
000259 28 04               A   453    				jr z,nopatdel
00025B 35                  A   454    				dec (hl)						00025C C3 80 02            A   455    				jp nspwrap
00025F AF                  A   456    nopatdel		xor a
000260 32 4B 10            A   457    				ld (pattdelay_flag),a
000263 21 45 10            A   458    				ld hl,patindex
000266 34                  A   459    				inc (hl)						000267 7E                  A   460    				ld a,(hl)
000268 FE40                A   461    				cp 64							00026A 20 14               A   462    				jr nz,nspwrap
00026C AF                  A   463    				xor a
00026D 77                  A   464    				ld (hl),a
00026E 32 48 10            A   465    				ld (pattloop_pos),a				000271 32 49 10            A   466    				ld (pattloop_count),a			Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  10


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000274 21 44 10            A   467    				ld hl,songpos		
000277 34                  A   468    				inc (hl)						000278 3A B6 03            A   469    				ld a,(music_module+950)
00027B BE                  A   470    				cp (hl)							00027C 20 02               A   471    				jr nz,nspwrap
00027E 3600                A   472    				ld (hl),0
000280 C9                  A   473    nspwrap			ret
                           A   474    
                           A   475    
                           A   476    ;----------------------------------------------
                           A   477    				
000281 FD7E 04             A   478    check_fx		ld a,(iy+fx_number)	
000284 B7                  A   479    				or a							000285 CA D8 02            A   480    				jp z,arpeggio					000288 FE01                A   481    				cp 1
00028A CA 1F 03            A   482    				jp z,portamento_up
00028D FE02                A   483    				cp 2
00028F CA 47 03            A   484    				jp z,portamento_down
000292 FE03                A   485    				cp 3
000294 CA 6F 03            A   486    				jp z,tone_portamento
000297 FE04                A   487    				cp 4
000299 CA 3D 04            A   488    				jp z,vibrato
00029C FE05                A   489    				cp 5
00029E CA F5 04            A   490    				jp z,tone_portamento_volslide
0002A1 FE06                A   491    				cp 6
0002A3 CA FB 04            A   492    				jp z,vibrato_volslide
0002A6 FE07                A   493    				cp 7
0002A8 CA 01 05            A   494    				jp z,tremolo
0002AB FE0A                A   495    				cp 0ah
0002AD CA FF 05            A   496    				jp z,volslide
0002B0 FE0E                A   497    				cp 0eh
0002B2 CA 69 06            A   498    				jp z,extended_fx
0002B5 C9                  A   499    				ret
                           A   500    
                           A   501    
0002B6                     A   502    check_more_fx
                           A   503    
0002B6 FD7E 04             A   504    				ld a,(iy+fx_number)				0002B9 FE09                A   505    				cp 9
0002BB CA BC 05            A   506    				jp z,sample_offset
0002BE FE0B                A   507    				cp 0bh			
0002C0 CA 24 06            A   508    				jp z,position_jump
0002C3 FE0D                A   509    				cp 0dh
0002C5 CA 40 06            A   510    				jp z,pattern_break
0002C8 FE0E                A   511    				cp 0eh
0002CA CA 69 06            A   512    				jp z,extended_fx
0002CD FE0F                A   513    				cp 0fh
0002CF CA 0A 08            A   514    				jp z,set_speed
0002D2 FE0C                A   515    				cp 0ch
0002D4 CA 30 06            A   516    				jp z,set_volume
0002D7 C9                  A   517    				ret
                           A   518    					
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  11


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
                           A   519    
                           A   520    ;------- FX $00 -------------------------------
                           A   521    
0002D8 FD7E 05             A   522    arpeggio		ld a,(iy+fx_args)				0002DB B7                  A   523    				or a
0002DC C8                  A   524    				ret z
0002DD FD4E 15             A   525    				ld c,(iy+arp_base_period_lo)	0002E0 FD46 16             A   526    				ld b,(iy+arp_base_period_hi)
0002E3 3A 47 10            A   527    				ld a,(arpeggio_counter)	
0002E6 1E00                A   528    				ld e,0
0002E8 B7                  A   529    				or a	
0002E9 28 17               A   530    				jr z,doarp		
0002EB FE02                A   531    				cp 2
0002ED 28 0D               A   532    				jr z,arptwo
0002EF FD5E 05             A   533    arpone			ld e,(iy+fx_args)
0002F2 CB3B                A   534    				srl e
0002F4 CB3B                A   535    				srl e
0002F6 CB3B                A   536    				srl e
0002F8 CB3B                A   537    				srl e							0002FA 18 06               A   538    				jr doarp
0002FC FD7E 05             A   539    arptwo			ld a,(iy+fx_args)
0002FF E60F                A   540    				and 15
000301 5F                  A   541    				ld e,a							000302 21 A0 07            A   542    doarp			ld hl,period_lookup_table-113
000305 09                  A   543    				add hl,bc
000306 7E                  A   544    				ld a,(hl)						000307 83                  A   545    				add a,e							000308 CB27                A   546    				sla a
00030A 21 21 0B            A   547    				ld hl,period_table_p0
00030D 85                  A   548    				add a,l
00030E 30 01               A   549    				jr nc,alumok
000310 24                  A   550    				inc h
000311 6F                  A   551    alumok			ld l,a
000312 4E                  A   552    				ld c,(hl)
000313 23                  A   553    				inc hl
000314 46                  A   554    				ld b,(hl)
000315 CD 07 02            A   555    				call finetune_bc_period
000318 FD71 01             A   556    				ld (iy+period_lo),c
00031B FD70 02             A   557    				ld (iy+period_hi),b
00031E C9                  A   558    				ret
                           A   559    
                           A   560    
                           A   561    ;-------- FX $01 ------------------------------
                           A   562    
00031F                     A   563    portamento_up
                           A   564    
00031F 0600                A   565    				ld b,0							000321 FD4E 05             A   566    				ld c,(iy+fx_args)				000324 FD6E 06             A   567    				ld l,(iy+period_for_fx_lo)
000327 FD66 07             A   568    				ld h,(iy+period_for_fx_hi)
00032A AF                  A   569    				xor a
00032B ED42                A   570    				sbc hl,bc
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  12


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
00032D 38 08               A   571    				jr c,portumin
00032F B4                  A   572    				or h
000330 20 08               A   573    				jr nz,portugnp
000332 7D                  A   574    				ld a,l
000333 FE71                A   575    				cp 113
000335 30 03               A   576    				jr nc,portugnp
000337 217100              A   577    portumin		ld hl,113
00033A FD75 06             A   578    portugnp		ld (iy+period_for_fx_lo),l
00033D FD74 07             A   579    				ld (iy+period_for_fx_hi),h
000340 FD75 01             A   580    				ld (iy+period_lo),l
000343 FD74 02             A   581    				ld (iy+period_hi),h
000346 C9                  A   582    				ret
                           A   583    
                           A   584    				
                           A   585    ;--------- FX $02 -----------------------------
                           A   586    
000347                     A   587    portamento_down			
                           A   588    
000347 0600                A   589    				ld b,0							000349 FD4E 05             A   590    				ld c,(iy+fx_args)				00034C FD6E 06             A   591    				ld l,(iy+period_for_fx_lo)
00034F FD66 07             A   592    				ld h,(iy+period_for_fx_hi)
000352 09                  A   593    				add hl,bc
000353 7C                  A   594    				ld a,h
000354 FE03                A   595    				cp 3
000356 38 0A               A   596    				jr c,portdgnp
000358 20 05               A   597    				jr nz,portdmax
00035A 7D                  A   598    				ld a,l
00035B FE8B                A   599    				cp 139
00035D 38 03               A   600    				jr c,portdgnp
00035F 215803              A   601    portdmax		ld hl,856
000362 FD75 06             A   602    portdgnp		ld (iy+period_for_fx_lo),l
000365 FD74 07             A   603    				ld (iy+period_for_fx_hi),h
000368 FD75 01             A   604    				ld (iy+period_lo),l
00036B FD74 02             A   605    				ld (iy+period_hi),h
00036E C9                  A   606    				ret
                           A   607    
                           A   608    
                           A   609    ;--------- FX $03 -----------------------------
                           A   610    
00036F                     A   611    tone_portamento
                           A   612    
00036F FD4E 09             A   613    				ld c,(iy+portamento_rate)		000372 FD7E 05             A   614    				ld a,(iy+fx_args)
000375 B7                  A   615    				or a
000376 28 0B               A   616    				jr z,uexistpr
000378 4F                  A   617    				ld c,a
000379 FD7E 04             A   618    				ld a,(iy+fx_number)
00037C FE03                A   619    				cp 3							00037E 20 03               A   620    				jr nz,uexistpr
000380 FD71 09             A   621    				ld (iy+portamento_rate),c	
000383 FD5E 10             A   622    uexistpr		ld e,(iy+portamento_dest_lo)	Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  13


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000386 FD56 11             A   623    				ld d,(iy+portamento_dest_hi)
000389 FD6E 06             A   624    				ld l,(iy+period_for_fx_lo)		00038C FD66 07             A   625    				ld h,(iy+period_for_fx_hi)
00038F AF                  A   626    				xor a
000390 ED52                A   627    				sbc hl,de						000392 C8                  A   628    				ret z							000393 38 1B               A   629    				jr c,tp_peru					                           A   630    
000395 FD6E 06             A   631    tp_perd			ld l,(iy+period_for_fx_lo)		000398 FD66 07             A   632    				ld h,(iy+period_for_fx_hi)
00039B 0600                A   633    				ld b,0
00039D AF                  A   634    				xor a
00039E ED42                A   635    				sbc hl,bc						0003A0 30 03               A   636    				jr nc,tp_dnw					0003A2 210000              A   637    				ld hl,0
0003A5 4D                  A   638    tp_dnw			ld c,l							0003A6 44                  A   639    				ld b,h
0003A7 AF                  A   640    				xor a
0003A8 ED52                A   641    				sbc hl,de						0003AA 30 18               A   642    				jr nc,chk_gliss
0003AC 4B                  A   643    				ld c,e
0003AD 42                  A   644    				ld b,d
0003AE 18 1A               A   645    				jr tp_end						                           A   646    
0003B0 FD6E 06             A   647    tp_peru			ld l,(iy+period_for_fx_lo)		0003B3 FD66 07             A   648    				ld h,(iy+period_for_fx_hi)
0003B6 0600                A   649    				ld b,0
0003B8 09                  A   650    				add hl,bc
0003B9 4D                  A   651    				ld c,l							0003BA 44                  A   652    				ld b,h
0003BB AF                  A   653    				xor a
0003BC ED52                A   654    				sbc hl,de		
0003BE 38 04               A   655    				jr c,chk_gliss
0003C0 4B                  A   656    				ld c,e							0003C1 42                  A   657    				ld b,d
0003C2 18 06               A   658    				jr tp_end	
                           A   659    
0003C4 FDCB 0F 4E          A   660    chk_gliss		bit 1,(iy+control_bits)			0003C8 20 0D               A   661    				jr nz,do_gliss		
                           A   662    				
0003CA FD71 06             A   663    tp_end			ld (iy+period_for_fx_lo),c
0003CD FD70 07             A   664    				ld (iy+period_for_fx_hi),b
0003D0 FD71 01             A   665    				ld (iy+period_lo),c	
0003D3 FD70 02             A   666    				ld (iy+period_hi),b
0003D6 C9                  A   667    				ret	
                           A   668    				
0003D7 FD71 06             A   669    do_gliss		ld (iy+period_for_fx_lo),c		0003DA FD70 07             A   670    				ld (iy+period_for_fx_hi),b
0003DD FD7E 14             A   671    				ld a,(iy+finetune)	
0003E0 CB27                A   672    				sla a
0003E2 21 01 0B            A   673    				ld hl,tuning_table_list	
0003E5 5F                  A   674    				ld e,a			
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  14


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0003E6 1600                A   675    				ld d,0
0003E8 19                  A   676    				add hl,de
0003E9 5E                  A   677    				ld e,(hl)
0003EA 23                  A   678    				inc hl	
0003EB 56                  A   679    				ld d,(hl)						                           A   680    
0003EC DDE5                A   681    				push ix
0003EE D5                  A   682    				push de
0003EF DDE1                A   683    				pop ix
0003F1 AF                  A   684    				xor a
0003F2 110000              A   685    				ld de,0							0003F5 DD6E16              A   686    				ld l,(ix+22)					0003F8 DD6617              A   687    				ld h,(ix+23)
0003FB ED42                A   688    				sbc hl,bc
0003FD 28 2B               A   689    				jr z,tp_glend
0003FF 38 12               A   690    				jr c,gltest
000401 111800              A   691    				ld de,24
000404 DD6E2E              A   692    				ld l,(ix+46)
000407 DD662F              A   693    				ld h,(ix+47)
00040A ED42                A   694    				sbc hl,bc
00040C 28 1C               A   695    				jr z,tp_glend
00040E 38 03               A   696    				jr c,gltest
000410 113000              A   697    				ld de,48
                           A   698    
000413 DD19                A   699    gltest			add ix,de
000415 50                  A   700    				ld d,b
000416 59                  A   701    				ld e,c
000417 AF                  A   702    				xor a
000418 060C                A   703    				ld b,12
00041A DD6E00              A   704    glissfper		ld l,(ix)						00041D DD6601              A   705    				ld h,(ix+1)
000420 ED52                A   706    				sbc hl,de
000422 30 0F               A   707    				jr nc,nggliss
000424 DD4E00              A   708    				ld c,(ix)
000427 DD4601              A   709    				ld b,(ix+1)
00042A FD71 01             A   710    tp_glend		ld (iy+period_lo),c	
00042D FD70 02             A   711    				ld (iy+period_hi),b
000430 DDE1                A   712    				pop ix
000432 C9                  A   713    				ret
                           A   714    
000433 DD23                A   715    nggliss			inc ix
000435 DD23                A   716    				inc ix
000437 10 E1               A   717    				djnz glissfper
000439 42                  A   718    				ld b,d
00043A 4B                  A   719    				ld c,e
00043B 18 ED               A   720    				jr tp_glend
                           A   721    
                           A   722    
                           A   723    ;--------- FX $04 -----------------------------
                           A   724    
00043D FD46 0A             A   725    vibrato			ld b,(iy+vibrato_args)			000440 FD7E 04             A   726    				ld a,(iy+fx_number)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  15


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000443 FE04                A   727    				cp 4
000445 20 1C               A   728    				jr nz,vibrsame					000447 FD7E 05             A   729    				ld a,(iy+fx_args)
00044A B7                  A   730    				or a
00044B 28 16               A   731    				jr z,vibrsame					00044D 4F                  A   732    				ld c,a
00044E E60F                A   733    				and 15
000450 28 06               A   734    				jr z,vibdsame					000452 57                  A   735    				ld d,a
000453 78                  A   736    				ld a,b
000454 E6F0                A   737    				and 0f0h
000456 B2                  A   738    				or d
000457 47                  A   739    				ld b,a							000458 79                  A   740    vibdsame		ld a,c
000459 E6F0                A   741    				and 0f0h
00045B 28 06               A   742    				jr z,vibrsame					00045D 4F                  A   743    				ld c,a
00045E 78                  A   744    				ld a,b
00045F E60F                A   745    				and 0fh
000461 B1                  A   746    				or c							000462 47                  A   747    				ld b,a			
000463 FD70 0A             A   748    vibrsame		ld (iy+vibrato_args),b			                           A   749    				
000466 FD4E 0B             A   750    				ld c,(iy+vibrato_pos)
000469 CB39                A   751    				srl c
00046B CB39                A   752    				srl c
00046D 79                  A   753    				ld a,c
00046E E61F                A   754    				and 1fh
000470 4F                  A   755    				ld c,a							000471 FD7E 0E             A   756    				ld a,(iy+wave_type)	
000474 E60F                A   757    				and 0fh
000476 B7                  A   758    				or a							000477 28 1D               A   759    				jr z,vib_sine					000479 CB21                A   760    				sla c		
00047B CB21                A   761    				sla c
00047D CB21                A   762    				sla c							00047F FE01                A   763    				cp 1
000481 28 04               A   764    				jr z,vib_ramp					000483 1EFF                A   765    				ld e,255			
000485 18 16               A   766    				jr vib_gotd						                           A   767    
000487 FDCB 0B 7E          A   768    vib_ramp		bit 7,(iy+vibrato_pos)			00048B 28 06               A   769    				jr z,vibr2
00048D 3EFF                A   770    				ld a,255
00048F 91                  A   771    				sub c
000490 5F                  A   772    				ld e,a
000491 18 0A               A   773    				jr vib_gotd
000493 59                  A   774    vibr2			ld e,c
000494 18 07               A   775    				jr vib_gotd
                           A   776    
000496 21 A1 0F            A   777    vib_sine		ld hl,vibrato_table				000499 0600                A   778    				ld b,0
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  16


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
00049B 09                  A   779    				add hl,bc
00049C 5E                  A   780    				ld e,(hl)			
                           A   781    
00049D DDE5                A   782    vib_gotd		push ix
00049F FD7E 0A             A   783    				ld a,(iy+vibrato_args)	
0004A2 2F                  A   784    				cpl
0004A3 E60F                A   785    				and 0fh			
0004A5 4F                  A   786    				ld c,a							0004A6 0600                A   787    				ld b,0			
0004A8 50                  A   788    				ld d,b
0004A9 21 B4 04            A   789    				ld hl,vmul15
0004AC 09                  A   790    				add hl,bc
0004AD E5                  A   791    				push hl
0004AE DDE1                A   792    				pop ix
0004B0 60                  A   793    				ld h,b
0004B1 68                  A   794    				ld l,b
0004B2 DDE9                A   795    				jp (ix)							0004B4 19                  A   796    vmul15			add hl,de						0004B5 19                  A   797    vmul14			add hl,de						0004B6 19                  A   798    vmul13			add hl,de						0004B7 19                  A   799    vmul12			add hl,de						0004B8 19                  A   800    vmul11			add hl,de						0004B9 19                  A   801    vmul10			add hl,de						0004BA 19                  A   802    vmul9			add hl,de						0004BB 19                  A   803    vmul8			add hl,de						0004BC 19                  A   804    vmul7			add hl,de						0004BD 19                  A   805    vmul6			add hl,de						0004BE 19                  A   806    vmul5			add hl,de						0004BF 19                  A   807    vmul4			add hl,de						0004C0 19                  A   808    vmul3			add hl,de						0004C1 19                  A   809    vmul2			add hl,de						0004C2 19                  A   810    vmul1			add hl,de						0004C3 CB25                A   811    vmul0			sla l							0004C5 CB14                A   812    				rl h
0004C7 5C                  A   813    				ld e,h
0004C8 1600                A   814    				ld d,0
0004CA DDE1                A   815    				pop ix
                           A   816    				
0004CC FD6E 06             A   817    				ld l,(iy+period_for_fx_lo)		0004CF FD66 07             A   818    				ld h,(iy+period_for_fx_hi)
0004D2 FDCB 0B 7E          A   819    				bit 7,(iy+vibrato_pos)
0004D6 20 03               A   820    				jr nz,vib_sub	
0004D8 19                  A   821    				add hl,de						0004D9 18 03               A   822    				jr vib_pdone
0004DB AF                  A   823    vib_sub			xor a
0004DC ED52                A   824    				sbc hl,de						0004DE FD75 01             A   825    vib_pdone		ld (iy+period_lo),l
0004E1 FD74 02             A   826    				ld (iy+period_hi),h
                           A   827    
0004E4 FD46 0B             A   828    				ld b,(iy+vibrato_pos)			0004E7 FD7E 0A             A   829    				ld a,(iy+vibrato_args)
0004EA CB3F                A   830    				srl a
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  17


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0004EC CB3F                A   831    				srl a
0004EE E63C                A   832    				and 3ch							0004F0 80                  A   833    				add a,b
0004F1 FD77 0B             A   834    				ld (iy+vibrato_pos),a			0004F4 C9                  A   835    				ret
                           A   836    
                           A   837    
                           A   838    ;-------- FX $05 ------------------------------
                           A   839    				
0004F5                     A   840    tone_portamento_volslide
                           A   841    
0004F5 CD 6F 03            A   842    				call tone_portamento
0004F8 C3 FF 05            A   843    				jp volslide
                           A   844    
                           A   845    			
                           A   846    ;-------- FX $06 ------------------------------
                           A   847    				
0004FB                     A   848    vibrato_volslide	
                           A   849    				
0004FB CD 3D 04            A   850    				call vibrato
0004FE C3 FF 05            A   851    				jp volslide
                           A   852    				
                           A   853    				
                           A   854    ;-------- FX $07 ------------------------------
                           A   855    
000501 FD46 0C             A   856    tremolo			ld b,(iy+tremolo_args)			000504 FD7E 05             A   857    				ld a,(iy+fx_args)
000507 B7                  A   858    				or a
000508 28 16               A   859    				jr z,trersame					00050A 4F                  A   860    				ld c,a
00050B E60F                A   861    				and 15
00050D 28 06               A   862    				jr z,tredsame					00050F 57                  A   863    				ld d,a
000510 78                  A   864    				ld a,b
000511 E6F0                A   865    				and 0f0h
000513 B2                  A   866    				or d
000514 47                  A   867    				ld b,a							000515 79                  A   868    tredsame		ld a,c
000516 E6F0                A   869    				and 0f0h
000518 28 06               A   870    				jr z,trersame					00051A 4F                  A   871    				ld c,a
00051B 78                  A   872    				ld a,b
00051C E60F                A   873    				and 0fh
00051E B1                  A   874    				or c							00051F 47                  A   875    				ld b,a			
000520 FD70 0C             A   876    trersame		ld (iy+tremolo_args),b			                           A   877    				
000523 FD4E 0D             A   878    				ld c,(iy+tremolo_pos)
000526 CB39                A   879    				srl c
000528 CB39                A   880    				srl c
00052A 79                  A   881    				ld a,c
00052B E61F                A   882    				and 1fh
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  18


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
00052D 4F                  A   883    				ld c,a							00052E FD7E 0E             A   884    				ld a,(iy+wave_type)				000531 CB3F                A   885    				srl a
000533 CB3F                A   886    				srl a
000535 CB3F                A   887    				srl a
000537 CB3F                A   888    				srl a
000539 E60F                A   889    				and 0fh							00053B 28 1D               A   890    				jr z,tre_sine					00053D CB21                A   891    				sla c		
00053F CB21                A   892    				sla c
000541 CB21                A   893    				sla c							000543 FE01                A   894    				cp 1
000545 28 04               A   895    				jr z,tre_ramp					000547 1EFF                A   896    				ld e,255			
000549 18 16               A   897    				jr tre_gotd						                           A   898    
00054B FDCB 0D 7E          A   899    tre_ramp		bit 7,(iy+tremolo_pos)			00054F 28 06               A   900    				jr z,trer2
000551 3EFF                A   901    				ld a,255
000553 91                  A   902    				sub c
000554 5F                  A   903    				ld e,a
000555 18 0A               A   904    				jr tre_gotd
000557 59                  A   905    trer2			ld e,c
000558 18 07               A   906    				jr tre_gotd
                           A   907    
00055A 21 A1 0F            A   908    tre_sine		ld hl,vibrato_table				00055D 0600                A   909    				ld b,0
00055F 09                  A   910    				add hl,bc
000560 5E                  A   911    				ld e,(hl)			
                           A   912    
000561 DDE5                A   913    tre_gotd		push ix
000563 FD7E 0C             A   914    				ld a,(iy+tremolo_args)	
000566 2F                  A   915    				cpl
000567 E60F                A   916    				and 0fh			
000569 4F                  A   917    				ld c,a							00056A 0600                A   918    				ld b,0			
00056C 50                  A   919    				ld d,b
00056D 21 78 05            A   920    				ld hl,tmul15
000570 09                  A   921    				add hl,bc
000571 E5                  A   922    				push hl
000572 DDE1                A   923    				pop ix
000574 60                  A   924    				ld h,b
000575 68                  A   925    				ld l,b
000576 DDE9                A   926    				jp (ix)							000578 19                  A   927    tmul15			add hl,de						000579 19                  A   928    tmul14			add hl,de						00057A 19                  A   929    tmul13			add hl,de						00057B 19                  A   930    tmul12			add hl,de						00057C 19                  A   931    tmul11			add hl,de						00057D 19                  A   932    tmul10			add hl,de						00057E 19                  A   933    tmul9			add hl,de						00057F 19                  A   934    tmul8			add hl,de						Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  19


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000580 19                  A   935    tmul7			add hl,de						000581 19                  A   936    tmul6			add hl,de						000582 19                  A   937    tmul5			add hl,de						000583 19                  A   938    tmul4			add hl,de						000584 19                  A   939    tmul3			add hl,de						000585 19                  A   940    tmul2			add hl,de						000586 19                  A   941    tmul1			add hl,de						000587 CB25                A   942    tmul0			sla l							000589 CB14                A   943    				rl h
00058B CB25                A   944    				sla l
00058D CB14                A   945    				rl h
00058F 6C                  A   946    				ld l,h
000590 DDE1                A   947    				pop ix
                           A   948    				
000592 FD7E 08             A   949    tshftl			ld a,(iy+volume_for_fx)			000595 FDCB 0D 7E          A   950    				bit 7,(iy+tremolo_pos)
000599 20 09               A   951    				jr nz,tre_sub	
00059B 85                  A   952    				add a,l							00059C FE40                A   953    				cp 64
00059E 38 08               A   954    				jr c,tre_done
0005A0 3E40                A   955    				ld a,64
0005A2 18 04               A   956    				jr tre_done
0005A4 95                  A   957    tre_sub			sub l							0005A5 30 01               A   958    				jr nc,tre_done
0005A7 AF                  A   959    				xor a
0005A8 FD77 03             A   960    tre_done		ld (iy+volume),a
                           A   961    				
0005AB FD46 0D             A   962    				ld b,(iy+tremolo_pos)			0005AE FD7E 0C             A   963    				ld a,(iy+tremolo_args)
0005B1 CB3F                A   964    				srl a
0005B3 CB3F                A   965    				srl a
0005B5 E63C                A   966    				and 3ch							0005B7 80                  A   967    				add a,b
0005B8 FD77 0D             A   968    				ld (iy+tremolo_pos),a			0005BB C9                  A   969    				ret
                           A   970    
                           A   971    ;-------- FX $09 ------------------------------
                           A   972    
0005BC                     A   973    sample_offset
                           A   974    
0005BC FD7E 05             A   975    				ld a,(iy+fx_args)		
0005BF B7                  A   976    				or a
0005C0 28 0D               A   977    				jr z,usexoffs					0005C2 47                  A   978    				ld b,a
0005C3 0E00                A   979    				ld c,0
0005C5 CB38                A   980    				srl b
0005C7 CB19                A   981    				rr c							0005C9 FD71 1F             A   982    				ld (iy+samp_offset_lo),c
0005CC FD70 20             A   983    				ld (iy+samp_offset_hi),b
                           A   984    				
0005CF FD4E 1F             A   985    usexoffs		ld c,(iy+samp_offset_lo)		0005D2 FD46 20             A   986    				ld b,(iy+samp_offset_hi)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  20


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0005D5 FD6E 19             A   987    				ld l,(iy+samp_len_lo)
0005D8 FD66 1A             A   988    				ld h,(iy+samp_len_hi)
0005DB AF                  A   989    				xor a
0005DC ED42                A   990    				sbc hl,bc
0005DE 28 16               A   991    				jr z,soffbad
0005E0 38 14               A   992    				jr c,soffbad
0005E2 FD75 19             A   993    				ld (iy+samp_len_lo),l			0005E5 FD74 1A             A   994    				ld (iy+samp_len_hi),h
0005E8 FD6E 17             A   995    				ld l,(iy+samp_loc_lo)
0005EB FD66 18             A   996    				ld h,(iy+samp_loc_hi)
0005EE 09                  A   997    				add hl,bc
0005EF FD75 17             A   998    				ld (iy+samp_loc_lo),l			0005F2 FD74 18             A   999    				ld (iy+samp_loc_hi),h
0005F5 C9                  A  1000    				ret
                           A  1001    
0005F6 FD36 19 01          A  1002    soffbad			ld (iy+samp_len_lo),1			0005FA FD36 1A 00          A  1003    				ld (iy+samp_len_hi),0			0005FE C9                  A  1004    				ret
                           A  1005    				
                           A  1006    
                           A  1007    ;-------- FX $0A ------------------------------
                           A  1008    
                           A  1009    
0005FF FD7E 05             A  1010    volslide		ld a,(iy+fx_args)				000602 47                  A  1011    				ld b,a
000603 E60F                A  1012    				and 15			
000605 28 0B               A  1013    				jr z,volup
000607 FD7E 03             A  1014    				ld a,(iy+volume)
00060A 90                  A  1015    				sub b
00060B 30 01               A  1016    				jr nc,voldok
00060D AF                  A  1017    				xor a
00060E FD77 03             A  1018    voldok			ld (iy+volume),a
000611 C9                  A  1019    				ret
                           A  1020    
000612 78                  A  1021    volup			ld a,b							000613 0F                  A  1022    				rrca
000614 0F                  A  1023    				rrca
000615 0F                  A  1024    				rrca
000616 0F                  A  1025    				rrca
000617 FD86 03             A  1026    				add a,(iy+volume)
00061A FE40                A  1027    				cp 64
00061C 38 02               A  1028    				jr c,voluok
00061E 3E40                A  1029    				ld a,64
000620 FD77 03             A  1030    voluok			ld (iy+volume),a
000623 C9                  A  1031    				ret
                           A  1032    
                           A  1033    
                           A  1034    ;-------- FX $0B ------------------------------
                           A  1035    
000624                     A  1036    position_jump
                           A  1037    
000624 FD7E 05             A  1038    				ld a,(iy+fx_args)
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  21


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000627 32 44 10            A  1039    				ld (songpos),a
00062A 3EFF                A  1040    				ld a,255
00062C 32 45 10            A  1041    				ld (patindex),a
00062F C9                  A  1042    				ret
                           A  1043    
                           A  1044    
                           A  1045    ;-------- FX $0C ------------------------------
                           A  1046    
000630                     A  1047    set_volume
                           A  1048    				
000630 FD7E 05             A  1049    				ld a,(iy+fx_args)
000633 FE40                A  1050    				cp 40h
000635 38 02               A  1051    				jr c,vsetok
000637 3E40                A  1052    				ld a,40h
000639 FD77 03             A  1053    vsetok			ld (iy+volume),a
00063C FD77 13             A  1054    				ld (iy+volume_waiting),a
00063F C9                  A  1055    				ret
                           A  1056    
                           A  1057    
                           A  1058    ;-------- FX $0D ------------------------------
                           A  1059    
000640                     A  1060    pattern_break
                           A  1061    				
000640 FD7E 05             A  1062    				ld a,(iy+fx_args)
000643 47                  A  1063    				ld b,a
000644 CB3F                A  1064    				srl a
000646 CB3F                A  1065    				srl a
000648 CB3F                A  1066    				srl a
00064A CB3F                A  1067    				srl a
00064C 4F                  A  1068    				ld c,a
00064D 81                  A  1069    				add a,c
00064E 81                  A  1070    				add a,c
00064F 81                  A  1071    				add a,c
000650 81                  A  1072    				add a,c
000651 CB27                A  1073    				sla a
000653 4F                  A  1074    				ld c,a
000654 78                  A  1075    				ld a,b
000655 E60F                A  1076    				and 0fh
000657 81                  A  1077    				add a,c
000658 3D                  A  1078    				dec a
000659 32 45 10            A  1079    				ld (patindex),a
00065C 21 44 10            A  1080    				ld hl,songpos
00065F 34                  A  1081    				inc (hl)
000660 3A B6 03            A  1082    				ld a,(music_module+950)
000663 BE                  A  1083    				cp (hl)							000664 20 02               A  1084    				jr nz,nspw_pb
000666 3600                A  1085    				ld (hl),0
000668 C9                  A  1086    nspw_pb			ret
                           A  1087    
                           A  1088    				
                           A  1089    ;-------- FX $0E ------------------------------
                           A  1090    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  22


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
                           A  1091    
000669                     A  1092    extended_fx
                           A  1093    
000669 FD7E 05             A  1094    				ld a,(iy+fx_args)
00066C 47                  A  1095    				ld b,a
00066D E6F0                A  1096    				and 0f0h
00066F FE00                A  1097    				cp 0h
000671 28 40               A  1098    				jr z,e0_filter
000673 FE10                A  1099    				cp 10h
000675 28 43               A  1100    				jr z,e1_fineport_up
000677 FE20                A  1101    				cp 20h
000679 28 69               A  1102    				jr z,e2_fineport_down
00067B FE30                A  1103    				cp 30h
00067D CA 0E 07            A  1104    				jp z,e3_glissando_control
000680 FE40                A  1105    				cp 40h
000682 CA 1B 07            A  1106    				jp z,e4_vibrato_control
000685 FE50                A  1107    				cp 50h
000687 CA 29 07            A  1108    				jp z,e5_finetune_control
00068A FE60                A  1109    				cp 60h
00068C CA 30 07            A  1110    				jp z,e6_pattern_loop
00068F FE70                A  1111    				cp 70h
000691 CA 55 07            A  1112    				jp z,e7_tremolo_control
000694 FE90                A  1113    				cp 90h
000696 CA 6B 07            A  1114    				jp z,e9_retrigger_note
000699 FEA0                A  1115    				cp 0a0h
00069B CA 81 07            A  1116    				jp z,ea_finevol_up
00069E FEB0                A  1117    				cp 0b0h
0006A0 CA 96 07            A  1118    				jp z,eb_finevol_down
0006A3 FEC0                A  1119    				cp 0c0h
0006A5 CA AA 07            A  1120    				jp z,ec_cutnote
0006A8 FED0                A  1121    				cp 0d0h
0006AA CA B8 07            A  1122    				jp z,ed_delayedtrig
0006AD FEE0                A  1123    				cp 0e0h
0006AF CA F9 07            A  1124    				jp z,ee_pattdelay
0006B2 C9                  A  1125    				ret
                           A  1126    
0006B3                     A  1127    e0_filter
                           A  1128    
0006B3 78                  A  1129    				ld a,b							0006B4 E601                A  1130    				and 01h			
0006B6 32 4C 10            A  1131    				ld (filter_on_off),a
0006B9 C9                  A  1132    				ret
                           A  1133    				
                           A  1134    
0006BA                     A  1135    e1_fineport_up
                           A  1136    
0006BA 3A 43 10            A  1137    				ld a,(ticker)
0006BD B7                  A  1138    				or a
0006BE C0                  A  1139    				ret nz
0006BF 0600                A  1140    				ld b,0							0006C1 FD7E 05             A  1141    				ld a,(iy+fx_args)		
0006C4 E60F                A  1142    				and 0fh
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  23


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0006C6 4F                  A  1143    				ld c,a
0006C7 FD6E 01             A  1144    				ld l,(iy+period_lo)
0006CA FD66 02             A  1145    				ld h,(iy+period_hi)
0006CD AF                  A  1146    				xor a
0006CE ED42                A  1147    				sbc hl,bc
0006D0 38 08               A  1148    				jr c,fportumin
0006D2 B4                  A  1149    				or h
0006D3 20 08               A  1150    				jr nz,fportugnp
0006D5 7D                  A  1151    				ld a,l
0006D6 FE71                A  1152    				cp 113
0006D8 30 03               A  1153    				jr nc,fportugnp
0006DA 217100              A  1154    fportumin		ld hl,113						0006DD FD75 01             A  1155    fportugnp		ld (iy+period_lo),l
0006E0 FD74 02             A  1156    				ld (iy+period_hi),h
0006E3 C9                  A  1157    				ret
                           A  1158    
                           A  1159    
0006E4                     A  1160    e2_fineport_down
                           A  1161    				
0006E4 3A 43 10            A  1162    				ld a,(ticker)
0006E7 B7                  A  1163    				or a
0006E8 C0                  A  1164    				ret nz
0006E9 0600                A  1165    				ld b,0							0006EB FD7E 05             A  1166    				ld a,(iy+fx_args)		
0006EE E60F                A  1167    				and 0fh
0006F0 4F                  A  1168    				ld c,a
0006F1 FD6E 01             A  1169    				ld l,(iy+period_lo)
0006F4 FD66 02             A  1170    				ld h,(iy+period_hi)
0006F7 09                  A  1171    				add hl,bc
0006F8 7C                  A  1172    				ld a,h
0006F9 FE03                A  1173    				cp 3
0006FB 38 0A               A  1174    				jr c,fportdgnp
0006FD 20 05               A  1175    				jr nz,fportdmax
0006FF 7D                  A  1176    				ld a,l
000700 FE58                A  1177    				cp 88
000702 38 03               A  1178    				jr c,fportdgnp
000704 215803              A  1179    fportdmax		ld hl,856						000707 FD75 01             A  1180    fportdgnp		ld (iy+period_lo),l
00070A FD74 02             A  1181    				ld (iy+period_hi),h
00070D C9                  A  1182    				ret
                           A  1183    
                           A  1184    
00070E                     A  1185    e3_glissando_control
                           A  1186    
00070E FDCB 0F 8E          A  1187    				res 1,(iy+control_bits)
000712 78                  A  1188    				ld a,b
000713 E601                A  1189    				and 01h
000715 C8                  A  1190    				ret z
000716 FDCB 0F CE          A  1191    				set 1,(iy+control_bits)
00071A C9                  A  1192    				ret
                           A  1193    
                           A  1194    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  24


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
00071B                     A  1195    e4_vibrato_control
                           A  1196    				
00071B 78                  A  1197    				ld a,b
00071C E607                A  1198    				and 07h
00071E 47                  A  1199    				ld b,a
00071F FD7E 0E             A  1200    				ld a,(iy+wave_type)
000722 E6F0                A  1201    				and 0f0h
000724 B0                  A  1202    				or b
000725 FD77 0E             A  1203    				ld (iy+wave_type),a
000728 C9                  A  1204    				ret
                           A  1205    
                           A  1206    
000729                     A  1207    e5_finetune_control
                           A  1208    				
000729 78                  A  1209    				ld a,b							00072A E60F                A  1210    				and 0fh			
00072C FD77 14             A  1211    				ld (iy+finetune),a
00072F C9                  A  1212    				ret
                           A  1213    
                           A  1214    
000730                     A  1215    e6_pattern_loop
                           A  1216    
000730 3A 43 10            A  1217    				ld a,(ticker)
000733 B7                  A  1218    				or a
000734 C0                  A  1219    				ret nz
000735 78                  A  1220    				ld a,b
000736 E60F                A  1221    				and 0fh
000738 28 14               A  1222    				jr z,setplp
00073A 21 49 10            A  1223    				ld hl,pattloop_count
00073D 34                  A  1224    				inc (hl)
00073E BE                  A  1225    				cp (hl)
00073F 38 08               A  1226    				jr c,plp_end
000741 3A 48 10            A  1227    				ld a,(pattloop_pos)				000744 3D                  A  1228    				dec a							000745 32 45 10            A  1229    				ld (patindex),a
000748 C9                  A  1230    				ret
000749 AF                  A  1231    plp_end			xor a			
00074A 32 49 10            A  1232    				ld (pattloop_count),a			00074D C9                  A  1233    				ret
00074E 3A 45 10            A  1234    setplp			ld a,(patindex)					000751 32 48 10            A  1235    				ld (pattloop_pos),a
000754 C9                  A  1236    				ret
                           A  1237    				
                           A  1238    
000755                     A  1239    e7_tremolo_control
                           A  1240    				
000755 78                  A  1241    				ld a,b
000756 E607                A  1242    				and 07h
000758 47                  A  1243    				ld b,a
000759 CB20                A  1244    				sla b
00075B CB20                A  1245    				sla b
00075D CB20                A  1246    				sla b
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  25


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
00075F CB20                A  1247    				sla b
000761 FD7E 0E             A  1248    				ld a,(iy+wave_type)
000764 E60F                A  1249    				and 0fh
000766 B0                  A  1250    				or b
000767 FD77 0E             A  1251    				ld (iy+wave_type),a
00076A C9                  A  1252    				ret
                           A  1253    				
                           A  1254    
00076B                     A  1255    e9_retrigger_note
                           A  1256    
00076B 78                  A  1257    				ld a,b
00076C E60F                A  1258    				and 0fh
00076E C8                  A  1259    				ret z
00076F 47                  A  1260    				ld b,a
000770 3A 43 10            A  1261    				ld a,(ticker)
000773 B7                  A  1262    				or a
000774 28 06               A  1263    				jr z,retrigit
000776 90                  A  1264    rtloop			sub b
000777 28 03               A  1265    				jr z,retrigit
000779 30 FB               A  1266    				jr nc,rtloop
00077B C9                  A  1267    				ret
00077C FDCB 0F C6          A  1268    retrigit		set 0,(iy+control_bits)
000780 C9                  A  1269    				ret
                           A  1270    				
                           A  1271    
                           A  1272    
000781                     A  1273    ea_finevol_up
                           A  1274    
000781 3A 43 10            A  1275    				ld a,(ticker)
000784 B7                  A  1276    				or a
000785 C0                  A  1277    				ret nz
000786 78                  A  1278    				ld a,b
000787 E60F                A  1279    				and 0fh
000789 FD86 03             A  1280    				add a,(iy+volume)
00078C FE40                A  1281    				cp 64
00078E 38 02               A  1282    				jr c,eavolok
000790 3E40                A  1283    				ld a,64
000792 FD77 03             A  1284    eavolok			ld (iy+volume),a
000795 C9                  A  1285    				ret
                           A  1286    				
                           A  1287    
000796                     A  1288    eb_finevol_down
                           A  1289    					
000796 3A 43 10            A  1290    				ld a,(ticker)
000799 B7                  A  1291    				or a
00079A C0                  A  1292    				ret nz
00079B 78                  A  1293    				ld a,b
00079C E60F                A  1294    				and 0fh
00079E 47                  A  1295    				ld b,a
00079F FD7E 03             A  1296    				ld a,(iy+volume)
0007A2 90                  A  1297    				sub b
0007A3 30 01               A  1298    				jr nc,ebvolok
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  26


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0007A5 AF                  A  1299    				xor a
0007A6 FD77 03             A  1300    ebvolok			ld (iy+volume),a
0007A9 C9                  A  1301    				ret
                           A  1302    
                           A  1303    
0007AA                     A  1304    ec_cutnote
                           A  1305    
0007AA 78                  A  1306    				ld a,b
0007AB E60F                A  1307    				and 0fh
0007AD 47                  A  1308    				ld b,a
0007AE 3A 43 10            A  1309    				ld a,(ticker)
0007B1 B8                  A  1310    				cp b
0007B2 C0                  A  1311    				ret nz
0007B3 AF                  A  1312    				xor a
0007B4 FD77 03             A  1313    				ld (iy+volume),a
0007B7 C9                  A  1314    				ret
                           A  1315    				
                           A  1316    
                           A  1317    
                           A  1318    				
0007B8                     A  1319    ed_delayedtrig	
                           A  1320    				
0007B8 78                  A  1321    				ld a,b
0007B9 E60F                A  1322    				and 0fh
0007BB 47                  A  1323    				ld b,a
0007BC 3A 43 10            A  1324    				ld a,(ticker)
0007BF B8                  A  1325    				cp b
0007C0 C0                  A  1326    				ret nz
                           A  1327    				
0007C1 FDCB 0F 5E          A  1328    				bit 3,(iy+control_bits)			0007C5 28 17               A  1329    				jr z,ed_nonewp2
0007C7 FD4E 06             A  1330    				ld c,(iy+period_for_fx_lo)		0007CA FD46 07             A  1331    				ld b,(iy+period_for_fx_hi)
0007CD FD71 01             A  1332    				ld (iy+period_lo),c
0007D0 FD70 02             A  1333    				ld (iy+period_hi),b
0007D3 FDCB 0F C6          A  1334    				set 0,(iy+control_bits)			0007D7 FD7E 12             A  1335    				ld a,(iy+instrument_waiting)	0007DA B7                  A  1336    				or a
0007DB C8                  A  1337    				ret z
0007DC 18 0E               A  1338    				jr ed_do_vol					                           A  1339    				
0007DE                     A  1340    ed_nonewp2
                           A  1341    
0007DE FD7E 12             A  1342    				ld a,(iy+instrument_waiting)	0007E1 B7                  A  1343    				or a							0007E2 C8                  A  1344    				ret z
0007E3 FDBE 00             A  1345    				cp (iy+instrument)			
0007E6 28 04               A  1346    				jr z,ed_do_vol
0007E8 FDCB 0F C6          A  1347    				set 0,(iy+control_bits)
                           A  1348    
0007EC FD77 00             A  1349    ed_do_vol		ld (iy+instrument),a
0007EF FD7E 13             A  1350    				ld a,(iy+volume_waiting)		Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  27


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0007F2 FD77 03             A  1351    				ld (iy+volume),a	
0007F5 FD77 08             A  1352    				ld (iy+volume_for_fx),a			0007F8 C9                  A  1353    				ret
                           A  1354    
                           A  1355    
                           A  1356    
                           A  1357    				
                           A  1358    				
0007F9                     A  1359    ee_pattdelay
                           A  1360    
0007F9 3A 4B 10            A  1361    				ld a,(pattdelay_flag)			0007FC B7                  A  1362    				or a
0007FD C0                  A  1363    				ret nz
0007FE 78                  A  1364    				ld a,b
0007FF E60F                A  1365    				and 0fh
000801 32 4A 10            A  1366    				ld (pattdelay_count),a
000804 3E01                A  1367    				ld a,1
000806 32 4B 10            A  1368    				ld (pattdelay_flag),a
000809 C9                  A  1369    				ret
                           A  1370    				
                           A  1371    
                           A  1372    
                           A  1373    ;-------- FX $0F ------------------------------
                           A  1374    
00080A                     A  1375    set_speed
00080A FD7E 05             A  1376    				ld a,(iy+fx_args)
00080D 32 46 10            A  1377    				ld (songspeed),a
000810 C9                  A  1378    				ret
                           A  1379    
                           A  1380    
                           A  1381    ;---- Amiga Period List -----------------------
                           A  1382    
000811                     A  1383    period_lookup_table	
                           A  1384    
000811 23000000 00000022   A  1385    		DB 35,0,0,0,0,0,0,34,0,0,0,0,0,0,33,0
000819 00000000 00002100 
000821 00000000 00002000   A  1386    		DB 0,0,0,0,0,0,32,0,0,0,0,0,0,0,31,0
000829 00000000 00001F00 
000831 00000000 00001E00   A  1387    		DB 0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,29
000839 00000000 0000001D 
000841 00000000 00000000   A  1388    		DB 0,0,0,0,0,0,0,0,0,28,0,0,0,0,0,0
000849 001C0000 00000000 
000851 0000001B 00000000   A  1389    		DB 0,0,0,27,0,0,0,0,0,0,0,0,0,26,0,0
000859 00000000 001A0000 
000861 00000000 00000000   A  1390    		DB 0,0,0,0,0,0,0,0,0,25,0,0,0,0,0,0
000869 00190000 00000000 
000871 00000000 00180000   A  1391    		DB 0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,0
000879 00000000 00000000 
000881 00170000 00000000   A  1392    		DB 0,23,0,0,0,0,0,0,0,0,0,0,0,0,0,22
000889 00000000 00000016 
000891 00000000 00000000   A  1393    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,0
000899 00000000 00150000 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  28


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
0008A1 00000000 00000000   A  1394    		DB 0,0,0,0,0,0,0,0,0,0,0,0,20,0,0,0
0008A9 00000000 14000000 
0008B1 00000000 00000000   A  1395    		DB 0,0,0,0,0,0,0,0,0,0,0,0,19,0,0,0
0008B9 00000000 13000000 
0008C1 00000000 00000000   A  1396    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0
0008C9 00000000 00120000 
0008D1 00000000 00000000   A  1397    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17
0008D9 00000000 00000011 
0008E1 00000000 00000000   A  1398    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0008E9 00000000 00000000 
0008F1 00001000 00000000   A  1399    		DB 0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0
0008F9 00000000 00000000 
000901 00000000 0000000F   A  1400    		DB 0,0,0,0,0,0,0,15,0,0,0,0,0,0,0,0
000909 00000000 00000000 
000911 00000000 00000000   A  1401    		DB 0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0
000919 00000000 0E000000 
000921 00000000 00000000   A  1402    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000929 00000000 00000000 
000931 0000000D 00000000   A  1403    		DB 0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,0
000939 00000000 00000000 
000941 00000000 00000000   A  1404    		DB 0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0
000949 0000000C 00000000 
000951 00000000 00000000   A  1405    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000959 00000000 00000000 
000961 00000000 0B000000   A  1406    		DB 0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0
000969 00000000 00000000 
000971 00000000 00000000   A  1407    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10
000979 00000000 0000000A 
000981 00000000 00000000   A  1408    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000989 00000000 00000000 
000991 00000000 00000000   A  1409    		DB 0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,0
000999 00000009 00000000 
0009A1 00000000 00000000   A  1410    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0009A9 00000000 00000000 
0009B1 00000000 00000000   A  1411    		DB 0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0
0009B9 00080000 00000000 
0009C1 00000000 00000000   A  1412    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0009C9 00000000 00000000 
0009D1 00000000 00000000   A  1413    		DB 0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0
0009D9 00070000 00000000 
0009E1 00000000 00000000   A  1414    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0009E9 00000000 00000000 
0009F1 00000000 00000000   A  1415    		DB 0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0
0009F9 00000006 00000000 
000A01 00000000 00000000   A  1416    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000A09 00000000 00000000 
000A11 00000000 00000000   A  1417    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5
000A19 00000000 00000005 
000A21 00000000 00000000   A  1418    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000A29 00000000 00000000 
000A31 00000000 00000000   A  1419    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000A39 00000000 00000000 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  29


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000A41 00000000 00040000   A  1420    		DB 0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0
000A49 00000000 00000000 
000A51 00000000 00000000   A  1421    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0	
000A59 00000000 00000000 
000A61 00000000 00000000   A  1422    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
000A69 00000000 00000003 
000A71 00000000 00000000   A  1423    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000A79 00000000 00000000 
000A81 00000000 00000000   A  1424    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000A89 00000000 00000000 
000A91 00000000 00000000   A  1425    		DB 0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0
000A99 00020000 00000000 
000AA1 00000000 00000000   A  1426    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000AA9 00000000 00000000 
000AB1 00000000 00000000   A  1427    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000AB9 00000000 00000000 
000AC1 00000000 00000001   A  1428    		DB 0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0
000AC9 00000000 00000000 
000AD1 00000000 00000000   A  1429    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000AD9 00000000 00000000 
000AE1 00000000 00000000   A  1430    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000AE9 00000000 00000000 
000AF1 00000000 00000000   A  1431    		DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
000AF9 00000000 00000000 
                           A  1432    
                           A  1433    
000B01 210B                A  1434    tuning_table_list	dw period_table_p0
000B03 690B                A  1435    		dw period_table_p1
000B05 B10B                A  1436    		dw period_table_p2
000B07 F90B                A  1437    		dw period_table_p3
000B09 410C                A  1438    		dw period_table_p4
000B0B 890C                A  1439    		dw period_table_p5
000B0D D10C                A  1440    		dw period_table_p6
000B0F 190D                A  1441    		dw period_table_p7
000B11 610D                A  1442    		dw period_table_m8
000B13 A90D                A  1443    		dw period_table_m7
000B15 F10D                A  1444    		dw period_table_m6
000B17 390E                A  1445    		dw period_table_m5
000B19 810E                A  1446    		dw period_table_m4
000B1B C90E                A  1447    		dw period_table_m3
000B1D 110F                A  1448    		dw period_table_m2
000B1F 590F                A  1449    		dw period_table_m1
                           A  1450    		
                           A  1451    
000B21 58032803 FA02D002   A  1452    period_table_p0	dw 856,808,762,720,678,640,604,
000B29 A6028002 5C023A02 
000B31 1A02FC01 E001C501 
000B39 AC019401 7D016801   A  1453    				dw 428,404,381,360,339,320,302,
000B41 53014001 2E011D01 
000B49 0D01FE00 F000E200 
000B51 D600CA00 BE00B400   A  1454    				dw 214,202,190,180,170,160,151,
000B59 AA00A000 97008F00 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  30


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000B61 87007F00 78007100 
                           A  1455    
000B69 52032203 F502CB02   A  1456    period_table_p1	dw 850,802,757,715,674,637,601,
000B71 A2027D02 59023702 
000B79 1702F901 DD01C201 
000B81 A9019101 7B016501   A  1457    				dw 425,401,379,357,337,318,300,
000B89 51013E01 2C011C01 
000B91 0C01FD00 EF00E100 
000B99 D500C900 BD00B300   A  1458    				dw 213,201,189,179,169,159,150,
000BA1 A9009F00 96008E00 
000BA9 86007E00 77007100 
                           A  1459    
000BB1 4C031C03 F002C502   A  1460    period_table_p2	dw 844,796,752,709,670,632,597,
000BB9 9E027802 55023302 
000BC1 1402F601 DA01BF01 
000BC9 A6018E01 78016301   A  1461    				dw 422,398,376,355,335,316,298,
000BD1 4F013C01 2A011A01 
000BD9 0A01FB00 ED00E000 
000BE1 D300C700 BC00B100   A  1462    				dw 211,199,188,177,167,158,149,
000BE9 A7009E00 95008D00 
000BF1 85007D00 76007000 
                           A  1463    
000BF9 46031703 EA02C002   A  1464    period_table_p3	dw 838,791,746,704,665,628,592,
000C01 99027402 50022F02 
000C09 1002F201 D601BC01 
000C11 A3018B01 75016001   A  1465    				dw 419,395,373,352,332,314,296,
000C19 4C013A01 28011801 
000C21 0801F900 EB00DE00 
000C29 D100C600 BB00B000   A  1466    				dw 209,198,187,176,166,157,148,
000C31 A6009D00 94008C00 
000C39 84007D00 76006F00 
                           A  1467    
000C41 40031103 E502BB02   A  1468    period_table_p4	dw 832,785,741,699,660,623,588,
000C49 94026F02 4C022B02 
000C51 0C02EF01 D301B901 
000C59 A0018801 72015E01   A  1469    				dw 416,392,370,350,330,312,294,
000C61 4A013801 26011601 
000C69 0601F700 E900DC00 
000C71 D000C400 B900AF00   A  1470    				dw 208,196,185,175,165,156,147,
000C79 A5009C00 93008B00 
000C81 83007C00 75006E00 
                           A  1471    
000C89 3A030B03 E002B602   A  1472    period_table_p5	dw 826,779,736,694,655,619,584,
000C91 8F026B02 48022702 
000C99 0802EB01 CF01B501 
000CA1 9D018601 70015B01   A  1473    				dw 413,390,368,347,328,309,292,
000CA9 48013501 24011401 
000CB1 0401F500 E800DB00 
000CB9 CE00C300 B800AE00   A  1474    				dw 206,195,184,174,164,155,146,
000CC1 A4009B00 92008A00 
000CC9 82007B00 74006D00 
                           A  1475    
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  31


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000CD1 34030603 DA02B102   A  1476    period_table_p6	dw 820,774,730,689,651,614,580,
000CD9 8B026602 44022302 
000CE1 0402E701 CC01B201 
000CE9 9A018301 6D015901   A  1477    				dw 410,387,365,345,325,307,290,
000CF1 45013301 22011201 
000CF9 0201F400 E600D900 
000D01 CD00C100 B700AC00   A  1478    				dw 205,193,183,172,163,154,145,
000D09 A3009A00 91008900 
000D11 81007A00 73006D00 
                           A  1479    
000D19 2E030003 D502AC02   A  1480    period_table_p7	dw 814,768,725,684,646,610,575,
000D21 86026202 3F021F02 
000D29 0102E401 C901AF01 
000D31 97018001 6B015601   A  1481    				dw 407,384,363,342,323,305,288,
000D39 43013101 20011001 
000D41 0001F200 E400D800 
000D49 CC00C000 B500AB00   A  1482    				dw 204,192,181,171,161,152,144,
000D51 A1009800 90008800 
000D59 80007900 72006C00 
                           A  1483    
000D61 8B035803 2803FA02   A  1484    period_table_m8	dw 907,856,808,762,720,678,640,
000D69 D002A602 80025C02 
000D71 3A021A02 FC01E001 
000D79 C501AC01 94017D01   A  1485    				dw 453,428,404,381,360,339,320,
000D81 68015301 40012E01 
000D89 1D010D01 FE00F000 
000D91 E200D600 CA00BE00   A  1486    				dw 226,214,202,190,180,170,160,
000D99 B400AA00 A0009700 
000DA1 8F008700 7F007800 
                           A  1487    
000DA9 84035203 2203F502   A  1488    period_table_m7	dw 900,850,802,757,715,675,636,
000DB1 CB02A302 7C025902 
000DB9 37021702 F901DD01 
000DC1 C201A901 91017B01   A  1489    				dw 450,425,401,379,357,337,318,
000DC9 65015101 3E012C01 
000DD1 1C010C01 FD00EE00 
000DD9 E100D400 C800BD00   A  1490    				dw 225,212,200,189,179,169,159,
000DE1 B300A900 9F009600 
000DE9 8E008600 7E007700 
                           A  1491    
000DF1 7E034C03 1C03F002   A  1492    period_table_m6	dw 894,844,796,752,709,670,632,
000DF9 C5029E02 78025502 
000E01 33021402 F601DA01 
000E09 BF01A601 8E017801   A  1493    				dw 447,422,398,376,355,335,316,
000E11 63014F01 3C012A01 
000E19 1A010A01 FB00ED00 
000E21 DF00D300 C700BC00   A  1494    				dw 223,211,199,188,177,167,158,
000E29 B100A700 9E009500 
000E31 8D008500 7D007600 
                           A  1495    
000E39 77034603 1703EA02   A  1496    period_table_m5	dw 887,838,791,746,704,665,628,
000E41 C0029902 74025002 
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  32


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000E49 2F021002 F201D601 
000E51 BC01A301 8B017501   A  1497    				dw 444,419,395,373,352,332,314,
000E59 60014C01 3A012801 
000E61 18010801 F900EB00 
000E69 DE00D100 C600BB00   A  1498    				dw 222,209,198,187,176,166,157,
000E71 B000A600 9D009400 
000E79 8C008400 7D007600 
                           A  1499    
000E81 71034003 1103E502   A  1500    period_table_m4	dw 881,832,785,741,699,660,623,
000E89 BB029402 6F024C02 
000E91 2B020C02 EE01D301 
000E99 B901A001 88017201   A  1501    				dw 441,416,392,370,350,330,312,
000EA1 5E014A01 38012601 
000EA9 16010601 F700E900 
000EB1 DC00D000 C400B900   A  1502    				dw 220,208,196,185,175,165,156,
000EB9 AF00A500 9C009300 
000EC1 8B008300 7B007500 
                           A  1503    
000EC9 6B033A03 0B03E002   A  1504    period_table_m3	dw 875,826,779,736,694,655,619,
000ED1 B6028F02 6B024802 
000ED9 27020802 EB01CF01 
000EE1 B5019D01 86017001   A  1505    				dw 437,413,390,368,347,328,309,
000EE9 5B014801 35012401 
000EF1 14010401 F500E800 
000EF9 DB00CE00 C300B800   A  1506    				dw 219,206,195,184,174,164,155,
000F01 AE00A400 9B009200 
000F09 8A008200 7B007400 
                           A  1507    
000F11 64033403 0603DA02   A  1508    period_table_m2	dw 868,820,774,730,689,651,614,
000F19 B1028B02 66024402 
000F21 23020402 E701CC01 
000F29 B2019A01 83016D01   A  1509    				dw 434,410,387,365,345,325,307,
000F31 59014501 33012201 
000F39 12010201 F400E600 
000F41 D900CD00 C100B700   A  1510    				dw 217,205,193,183,172,163,154,
000F49 AC00A300 9A009100 
000F51 89008100 7A007300 
                           A  1511    
000F59 5E032E03 0003D502   A  1512    period_table_m1	dw 862,814,768,725,684,646,610,
000F61 AC028602 62023F02 
000F69 1F020102 E401C901 
000F71 AF019701 80016B01   A  1513    				dw 431,407,384,363,342,323,305,
000F79 56014301 31012001 
000F81 10010001 F200E400 
000F89 D800CB00 C000B500   A  1514    				dw 216,203,192,181,171,161,152,
000F91 AB00A100 98009000 
000F99 88008000 79007200 
                           A  1515    
                           A  1516    ;----- Vibrato sine wave ----------------------
                           A  1517    
000FA1 0018314A 61788DA1   A  1518    vibrato_table	db 000,024,049,074,097,120,141,
000FA9 B4C5D4E0 EBF4FAFD   A  1519    				db 180,197,212,224,235,244,250,
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  33


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
000FB1 FFFDFAF4 EBE0D4C5   A  1520    				db 255,253,250,244,235,224,212,
000FB9 B4A18D78 614A3118   A  1521    				db 180,161,141,120,097,074,049,
                           A  1522    
                           A  1523    ;----------------------------------------------
                           A  1524    
000FC1 00001E00 3C005A00   A  1525    multiply_30_table	dw 000,030,060,090,120,150,
000FC9 78009600 B400D200 
000FD1 F0000E01 2C014A01   A  1526    					dw 240,270,300,330,360,390,
000FD9 68018601 A401C201 
000FE1 E001FE01 1C023A02   A  1527    					dw 480,510,540,570,600,630,
000FE9 58027602 9402B202 
000FF1 D002EE02 0C032A03   A  1528    					dw 720,750,780,810,840,870,
000FF9 48036603 8403A203 
                           A  1529    
                           A  1530    ;----------------------------------------------
                           A  1531    
001001 0000                A  1532    sample_base				dw 0			; "init
001003 0000                A  1533    force_sample_base		dw 0			; set t
                           A  1534    
001005 00 00 00 00 00 00   A  1535    sample_location_list	blkb 62,0		; for 3
00100B 00 00 00 00 00 00 
001011 00 00 00 00 00 00 
001017 00 00 00 00 00 00 
00101D 00 00 00 00 00 00 
001023 00 00 00 00 00 00 
001029 00 00 00 00 00 00 
00102F 00 00 00 00 00 00 
001035 00 00 00 00 00 00 
00103B 00 00 00 00 00 00 
001041 00 00 
                           A  1536    
                           A  1537    ;----------------------------------------------
                           A  1538    
001043 00                  A  1539    ticker				db 0
001044 00                  A  1540    songpos				db 0
001045 00                  A  1541    patindex			db 0
001046 00                  A  1542    songspeed			db 0
001047 00                  A  1543    arpeggio_counter	db 0
001048 00                  A  1544    pattloop_pos		db 0
001049 00                  A  1545    pattloop_count		db 0
00104A 00                  A  1546    pattdelay_count		db 0
00104B 00                  A  1547    pattdelay_flag		db 0
00104C 00                  A  1548    filter_on_off		db 0
                           A  1549    
                           A  1550    ;----------------------------------------------
                           A  1551    
       00000021            A  1552    vars_per_channel	equ 33
                           A  1553    
00104D                     A  1554    channel_data		ds vars_per_channel*4,0
-----ERROR (401) Syntax Error in operand 1
                           A  1555    	
       00000000            A  1556    instrument			equ 0
Zilog eZ80 Macro Assembler Version 4.1 (10060805)30-Jan-11     15:35:11     page:  34


PC     Object              I  Line    Source E:\MY_OWN~1\Coding\EZ80PR~1\Code\PROSEA~1\PROTRA~1\src\50Hz_Protracker_Player_v505.asm
       00000001            A  1557    period_lo			equ 1
       00000002            A  1558    period_hi			equ 2
       00000003            A  1559    volume				equ 3
       00000004            A  1560    fx_number			equ 4
       00000005            A  1561    fx_args				equ 5
       00000006            A  1562    period_for_fx_lo	equ 6
       00000007            A  1563    period_for_fx_hi	equ 7
       00000008            A  1564    volume_for_fx		equ 8
       00000009            A  1565    portamento_rate		equ 9
       0000000A            A  1566    vibrato_args		equ 10
       0000000B            A  1567    vibrato_pos			equ 11
       0000000C            A  1568    tremolo_args		equ 12
       0000000D            A  1569    tremolo_pos			equ 13
       0000000E            A  1570    wave_type 			equ 14		;bits 7:4 = tre
       0000000F            A  1571    control_bits		equ 15		;bit 0 = note t
       00000010            A  1572    portamento_dest_lo	equ 16		;bit 2 = channe
       00000011            A  1573    portamento_dest_hi	equ 17
       00000012            A  1574    instrument_waiting	equ 18
       00000013            A  1575    volume_waiting		equ 19
       00000014            A  1576    finetune			equ 20
       00000015            A  1577    arp_base_period_lo  equ 21
       00000016            A  1578    arp_base_period_hi	equ 22
                           A  1579    
       00000017            A  1580    samp_loc_lo			equ 23
       00000018            A  1581    samp_loc_hi			equ 24
       00000019            A  1582    samp_len_lo			equ 25
       0000001A            A  1583    samp_len_hi			equ 26
       0000001B            A  1584    samp_loop_loc_lo	equ 27
       0000001C            A  1585    samp_loop_loc_hi	equ 28
       0000001D            A  1586    samp_loop_len_lo	equ 29
       0000001E            A  1587    samp_loop_len_hi	equ 30
       0000001F            A  1588    samp_offset_lo		equ 31
       00000020            A  1589    samp_offset_hi		equ 32
                           A  1590    
                           A  1591    ;==============================================
                           A  1592    ; End of non-hardware specific Z80 Protracker c
                           A  1593    ;==============================================
                           A  1594    


Errors: 3
Warnings: 0
Lines Assembled: 1595
